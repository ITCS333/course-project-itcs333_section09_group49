{"file_contents":{"src/common/js/background.js":{"content":"// Create neural network animation\nfunction createNeuralNetwork() {\n    const container = document.getElementById('neuralNetwork');\n    const nodes = 20;\n\n    for (let i = 0; i < nodes; i++) {\n        const node = document.createElement('div');\n        node.className = 'node';\n        node.style.left = Math.random() * 100 + '%';\n        node.style.top = Math.random() * 100 + '%';\n        node.style.animationDelay = Math.random() * 2 + 's';\n        container.appendChild(node);\n\n        // Create connections\n        if (i > 0 && Math.random() > 0.5) {\n            const connection = document.createElement('div');\n            connection.className = 'connection';\n            connection.style.left = Math.random() * 100 + '%';\n            connection.style.top = Math.random() * 100 + '%';\n            connection.style.width = Math.random() * 200 + 50 + 'px';\n            connection.style.animationDelay = Math.random() * 3 + 's';\n            container.appendChild(connection);\n        }\n    }\n}\n\n// Create floating particles\nfunction createParticles() {\n    const container = document.getElementById('particles');\n    const particleCount = 50;\n\n    for (let i = 0; i < particleCount; i++) {\n        const particle = document.createElement('div');\n        particle.className = 'particle';\n        particle.style.left = Math.random() * 100 + '%';\n        particle.style.animationDelay = Math.random() * 6 + 's';\n        particle.style.animationDuration = (10 + Math.random() * 4) + 's';\n        container.appendChild(particle);\n    }\n}\n\n// Initialize background animations\nfunction initBackgroundAnimations() {\n    createNeuralNetwork();\n    createParticles();\n}\n\n// Call when page loads\nwindow.addEventListener('load', initBackgroundAnimations);","path":null,"size_bytes":1747,"size_tokens":null},"src/common/css/weekly-list.css":{"content":"\n\n:root {\n    --primary: #00ffff;\n    --secondary: #ff00ff;\n    --accent: #7c3aed;\n    --dark: #0a0a0f;\n    --darker: #050508;\n    --light: #ffffff;\n    --gray: #9ca3af;\n}\n\n\nbody {\n    margin: 0;\n    font-family: 'Segoe UI', Tahoma, sans-serif;\n    background: var(--darker);\n    color: var(--light);\n}\n\n\nheader {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    padding: 2rem;\n    padding-bottom: 1rem;\n    margin-left: 3.5rem;\n    gap: 2.5rem;\n}\n\n#go-back-btn {\n    width: 45px;\n    height: 45px;\n    background: linear-gradient(45deg, var(--primary), var(--accent));\n    color: var(--dark);\n    border: none;\n    border-radius: 50%;\n    cursor: pointer;\n    font-size: 1.5rem;\n    font-weight: bold;\n    display: flex;\n    align-items: center;\n    justify-content: center;\nmargin: 0px;\n    transition: 0.25s ease;\n}\n\n#go-back-btn:hover {\n    transform: translateX(-4px);\n    box-shadow: 0 0 15px rgba(0,255,255,0.6);\n}\n\nheader h1 {\n    font-size: 3rem;\n    margin-top: 1rem;\n    font-weight: bold;\n\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n\n    animation: neonTitleGlow 1.6s ease-in-out infinite alternate;\n}\n\n@keyframes neonTitleGlow {\n    from {\n        filter: drop-shadow(0 0 10px rgba(0,255,255,0.35));\n    }\n    to {\n        filter: drop-shadow(0 0 18px rgba(255,0,255,0.55));\n    }\n}\n\n\nmain {\n    max-width: 1100px;\n    margin: 0 auto;\n    padding: 2rem;\n}\n\n\n#week-list-section {\n    display: flex;\n    flex-direction: column;\n    gap: 2rem;\n}\n\n\narticle {\n    padding: 2rem;\n    border-radius: 18px;\n\n    background: rgba(255,255,255,0.05);\n    border: 1px solid rgba(255,255,255,0.10);\n    backdrop-filter: blur(10px);\n    box-shadow: 0 0 18px rgba(0,255,255,0.12);\n\n    transition: transform 0.25s ease, box-shadow 0.25s ease;\n}\n\narticle:hover {\n    transform: translateY(-6px);\n    box-shadow: 0 0 28px rgba(0,255,255,0.25);\n}\n\n\narticle h2 {\n    margin-bottom: 0.5rem;\n    font-size: 1.8rem;\n\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n}\n\n\narticle p {\n    margin: 0.4rem 0;\n    font-size: 1rem;\n    opacity: 0.95;\n}\n\n\narticle a {\n    margin-top: 1rem;\n    display: inline-block;\n\n    text-decoration: none;\n    font-weight: 600;\n    font-size: 1rem;\n\n    color: var(--primary);\n    text-shadow: 0 0 6px rgba(0,255,255,0.5);\n\n    transition: 0.3s ease;\n}\n\narticle a:hover {\n    color: var(--secondary);\n    text-shadow: 0 0 10px rgba(255,0,255,0.7);\n}\n\narticle a:visited {\n    color: var(--secondary);\n}\n\n\n@media (max-width: 768px) {\n    header h1 {\n        font-size: 2.3rem;\n    }\n\n    article {\n        padding: 1.5rem;\n    }\n\n    article h2 {\n        font-size: 1.5rem;\n    }\n}\n","path":null,"size_bytes":2826,"size_tokens":null},"src/assignments/api/index.php":{"content":"<?php\n/*For testing:\nini_set('display_errors', 1);\nerror_reporting(E_ALL);*/\n/**\n * Assignment Management API\n * \n * This is a RESTful API that handles all CRUD operations for course assignments\n * and their associated discussion comments.\n * It uses PDO to interact with a MySQL database.\n * \n * Database Table Structures (for reference):\n * \n * Table: assignments\n * Columns:\n *   - id (INT, PRIMARY KEY, AUTO_INCREMENT)\n *   - title (VARCHAR(200))\n *   - description (TEXT)\n *   - due_date (DATE)\n *   - files (TEXT)\n *   - created_at (TIMESTAMP)\n *   - updated_at (TIMESTAMP)\n * \n * Table: comments\n * Columns:\n *   - id (INT, PRIMARY KEY, AUTO_INCREMENT)\n *   - assignment_id (VARCHAR(50), FOREIGN KEY)\n *   - author (VARCHAR(100))\n *   - text (TEXT)\n *   - created_at (TIMESTAMP)\n * \n * HTTP Methods Supported:\n *   - GET: Retrieve assignment(s) or comment(s)\n *   - POST: Create a new assignment or comment\n *   - PUT: Update an existing assignment\n *   - DELETE: Delete an assignment or comment\n * \n * Response Format: JSON\n */\n//JSON.stringify() -> ?\n// ============================================================================\n// HEADERS AND CORS CONFIGURATION\n// ============================================================================\n\n//session_start();\n// TODO: Set Content-Type header to application/json\nheader(\"Content-Type: application/json\");\nheader(\"Access-Control-Allow-Headers: Content-Type\");\n\n// TODO: Set CORS headers to allow cross-origin requests\nheader(\"Access-Control-Allow-Origin: *\");\n\n// TODO: Handle preflight OPTIONS request\nheader(\"Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS\");\nif ($_SERVER['REQUEST_METHOD'] === 'OPTIONS')\n    {\n    // Return 200 OK status to the browser's security check:http_response_code(200);\n    // Stop execution here for preflight: exit();\n        http_response_code(200);\n        exit();\n    }\n\n\n// ============================================================================\n// DATABASE CONNECTION\n// ============================================================================\n\n// Include the database connection\nrequire_once __DIR__ . '/../../../config/Config.php';\n\n// Use the connection from Config.php\n$db = $conn;\n\n// ============================================================================\n// REQUEST PARSING\n// ============================================================================\n\n// TODO: Get the HTTP request method \n    $method = $_SERVER['REQUEST_METHOD'];\n/*Get the Resource:\n    $resource = $_GET['resource'] ?? '';*/\n//Get the id:\n    $id = $_GET['id'] ?? null;\n// TODO: Get the request body for POST and PUT requests\n    $data = json_decode(file_get_contents(\"php://input\"), true);  \n // TODO: Parse query parameters \n    $queryParams = $_GET;\n\n// ============================================================================\n// ASSIGNMENT CRUD FUNCTIONS\n// ============================================================================\n\n/**\n * Function: Get all assignments\n * Method: GET\n * Endpoint: ?resource=assignments\n * \n * Query Parameters:\n *   - search: Optional search term to filter by title or description\n *   - sort: Optional field to sort by (title, due_date, created_at)\n *   - order: Optional sort order (asc or desc, default: asc)\n * \n * Response: JSON array of assignment objects\n */\n\nfunction getAllAssignments($db)\n{\n    // TODO: Start building the SQL query\n     //Read optional query parameters(search, order, and sort):\n       $search = trim($_REQUEST['search']?? '');\n     //order default ACS, and DES  another option:\n     //strtoupper protects the SQL string (Case-sensitivity):\n       $order = (isset($_GET['order']) && strtoupper($_GET['order']) === 'DESC') ? 'DESC' : 'ASC';\n     //sort default by title or others if exists:\n     //Allowed sort fields (prevent SQL injection) using a white list:\n        //$allowedSortedFields = ['title','due_date', 'created_at'];\n       $allowedValues = ['title','due_date', 'created_at'];\n       //$sort = in_array($_GET['sort'] ?? '', $allowedValues) ? $_GET['sort'] : 'title';\n        $value = in_array($_GET['sort'] ?? '', $allowedValues) ? $_GET['sort'] : 'title';\n     //flag to track if search is used:\n       $flag = false;\n    // TODO: Check if 'search' query parameter exists in $_GET\n     if(!empty($search)&&validateAllowedValue($value,$allowedValues)&&$order)\n        {\n            $sql = \"SELECT * FROM assignments WHERE title LIKE :search OR description LIKE :search ORDER BY $value $order\";\n            $flag = true;\n        }\n    else if(!empty($search))\n        {\n            $sql = \"SELECT * FROM assignments WHERE title LIKE :search OR description LIKE :search\";\n            $flag = true;\n        }\n\n    // TODO: Check if 'sort' and 'order' query parameters exist\n    else if(validateAllowedValue($value,$allowedValues) && $order)\n        {\n            $sql = \"SELECT * FROM assignments ORDER BY $value $order\";\n        }\n    else if(validateAllowedValue($value,$allowedValues))\n        {\n            $sql = \"SELECT * FROM assignments ORDER BY $value $order\";\n        }\n    else if($order)\n        {\n            $sql = \"SELECT * FROM assignments ORDER BY $value $order\";\n        }\n    else\n        {\n            $sql  =\"SELECT * FROM assignments\";\n        }\n\n    // TODO: Prepare the SQL statement using $db->prepare()\n      $stmt = $db->prepare($sql);\n\n    // TODO: Bind parameters if search is used\n      if($flag===true)\n        {\n           $stmt->bindValue(':search', \"%$search%\", PDO::PARAM_STR);\n        }\n\n    // TODO: Execute the prepared statement\n      $stmt->execute();\n\n    // TODO: Fetch all results as associative array\n      $assignments = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n    // TODO: For each assignment, decode the 'files' field from JSON to array\n     foreach($assignments as &$assignment)\n        {\n           //Decode(convert string to json object):\n           if (isset($assignment['files']))\n            {\n               $assignment['files'] = json_decode($assignment['files'], true);\n            } \n        }\n    // TODO: Return JSON response\n        return $assignments;\n}\n\n\n/**\n * Function: Get a single assignment by ID\n * Method: GET\n * Endpoint: ?resource=assignments&id={assignment_id}\n * \n * Query Parameters:\n *   - id: The assignment ID (required)\n * \n * Response: JSON object with assignment details\n */\n\nfunction getAssignmentById($db, $assignmentId)\n{\n    // TODO: Validate that $assignmentId is provided and not empty\n     if(empty($assignmentId))\n        {\n            http_response_code(400);\n            return [\"error\" => \"Assignment ID is required!\"];\n        };\n\n    // TODO: Prepare SQL query to select assignment by id\n    $sql = \"SELECT * FROM assignments WHERE id = :id\";\n    $stmt = $db->prepare($sql);\n\n    // TODO: Bind the :id parameter\n    $stmt->bindValue(':id', $assignmentId, PDO::PARAM_INT);\n\n    // TODO: Execute the statement\n    $stmt->execute();\n\n    // TODO: Fetch the result as associative array\n    $assignmentWithThatId = $stmt->fetch(PDO::FETCH_ASSOC);\n\n    // TODO: Check if assignment was found\n    if (!$assignmentWithThatId)\n      {\n        http_response_code(404);\n        return ([\"error\" => \"No assignment found with that ID.\"]);\n      }\n\n    // TODO: Decode the 'files' field from JSON to array\n      //Decode(convert string to json object):\n           if (isset($assignmentWithThatId['files']))\n            {\n               $assignmentWithThatId['files'] = json_decode($assignmentWithThatId['files'], true);\n            } \n\n    // TODO: Return success response with assignment data\n     return $assignmentWithThatId;\n}\n\n\n/**\n * Function: Create a new assignment\n * Method: POST\n * Endpoint: ?resource=assignments\n * \n * Required JSON Body:\n *   - title: Assignment title (required)\n *   - description: Assignment description (required)\n *   - due_date: Due date in YYYY-MM-DD format (required)\n *   - files: Array of file URLs/paths (optional)\n * \n * Response: JSON object with created assignment data\n */\n\nfunction createAssignment($db, $data)\n{\n    // TODO: Validate required fields\n      if(empty($data)||empty($data['title']) || empty($data['description']) || empty($data['due_date']))\n        {\n            http_response_code(400);\n            return([\"error\" => \" Assignment title, description, and due date are required!\"]);\n        };\n\n    // TODO: Sanitize input data\n     //Prevent XSS and remove extra space:$title = htmlspecialchars(trim($data['title']));\n     //Remove extra space:$due_date = trim($data['due_date']);\n     //Prevent XSS and remove extra space:$description = htmlspecialchars(trim($data['description']));\n     //Split by newline, prevent XSS, clean spaces, and remove empty lines:\n      $title = sanitizeInput($data['title']);\n      $due_date = sanitizeInput($data['due_date']);\n      $description = sanitizeInput($data['description']);\n      $files = array_filter(array_map('trim', array_map('strip_tags', explode(\"\\n\", $data['files'] ?? ''))));\n\n    // TODO: Validate due_date format\n      //using regex: $regex = '/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/';\n      //matching:if(!preg_match($regex, $due_date)){return ([\"error\" => \"Invalid date format!\"]);}\n      //using helper function validateDate:\n      if(!validateDate($due_date)){return ([\"error\" => \"Invalid date format!\"]); };\n\n    // TODO: Generate a unique assignment ID\n     //combine time built-in function to get the time and mt_rand to generate random numbers betwen 100 and 999\n       //$id = time() . mt_rand(100, 999);\n\n    // TODO: Handle the 'files' field\n      //Decode(convert string to json object):\n      $newFiles = json_encode(array_values($files));\n\n    // TODO: Prepare INSERT query\n      //$sql = \"INSERT INTO assignments (id, title, description, due_date, files) VALUES (:id, :title, :description, :due_date, :files)\";\n       $sql = \"INSERT INTO assignments (title, description, due_date, files) VALUES (:title, :description, :due_date, :files)\";\n       $stmt = $db->prepare($sql);\n\n    // TODO: Bind all parameters\n      //$stmt->bindValue(':id', $id, PDO::PARAM_INT);\n      $stmt->bindValue(':title', $title, PDO::PARAM_STR);\n      $stmt->bindValue(':description', $description, PDO::PARAM_STR);\n      $stmt->bindValue(':due_date', $due_date, PDO::PARAM_STR);\n      $stmt->bindValue(':files', $newFiles, PDO::PARAM_STR);\n\n    // TODO: Execute the statement\n    // TODO: Check if insert was successful\n     if($stmt->execute())\n        {\n            $newId = $db->lastInsertId();\n            $newAssignment = getAssignmentById($db, $newId);\n            http_response_code(201);\n            return([\n                \"success\" => true,\n                \"message\" => \"Assignment created successfully!\",\n                //\"id\" => $id, \n                   \"id\" => $newId,\n                \"assignment\" => $newAssignment\n            ]);\n        }\n\n    // TODO: If insert failed, return 500 error\n     else\n        {\n            http_response_code(500);\n            return([\n                \"success\" => false,\n                \"message\" => \"Assignment not created successfully!\",\n                \"id\" => null\n            ]);\n        }\n}\n\n/**\n * Function: Update an existing assignment\n * Method: PUT\n * Endpoint: ?resource=assignments\n * \n * Required JSON Body:\n *   - id: Assignment ID (required, to identify which assignment to update)\n *   - title: Updated title (optional)\n *   - description: Updated description (optional)\n *   - due_date: Updated due date (optional)\n *   - files: Updated files array (optional)\n * \n * Response: JSON object with success status\n */\n   function updateAssignment($db, $data)\n{\n    // TODO: Validate that 'id' is provided in $data\n     if(empty($data)||empty($data['id']))\n         {\n             http_response_code(400);\n            return ([\"error\" => \" Assignment ID is required!\"]);\n         };\n\n    // TODO: Store assignment ID in variable\n    $updatedAssignmentId = $data['id'];\n\n    // TODO: Check if assignment exists\n     $checkStmt = $db->prepare(\"SELECT COUNT(*) FROM assignments WHERE id = :id\");\n     $checkStmt->execute([':id' => $updatedAssignmentId]);\n     if ($checkStmt->fetchColumn() == 0) \n         {\n             http_response_code(404);\n             return ([\"error\" => \"Assignment not found!\"]);\n         }\n    $requiredFields = ['title', 'description', 'due_date'];\n    $missingFields = [];\n    // Check that all required fields are present and not empty after basic sanitization:\n    foreach ($requiredFields as $field)\n    {\n        // Run sanitizeInput to ensure the field isn't just whitespace or tags\n        if (empty($data[$field]) || empty(sanitizeInput($data[$field])))\n        {\n            $missingFields[] = $field;\n        }\n    }\n\n    // Check if date format is valid:\n    if (empty($missingFields) && !validateDate($data['due_date']))\n    {\n        http_response_code(400);\n        return [\"error\" => \"Invalid date format for due_date.\"];\n    }\n\n    if (!empty($missingFields))\n    {\n        http_response_code(400);\n        return [\"error\" => \"The following required fields are missing or empty: \" . implode(', ', $missingFields) . \".\"];\n    }\n    // TODO: Build UPDATE query dynamically based on provided fields\n    // TODO: Check which fields are provided and add to SET clause\n     //fields array to complete UPDATE:\n      $fields = [];\n     //params array pass it for execution:\n      $params = [];\n\n    // Required Fields:\n\n     // Title\n     $fields[] = \"title = :title\";\n     $params[':title'] = sanitizeInput($data['title']);\n\n     // Description\n     $fields[] = \"description = :description\";\n     $params[':description'] = sanitizeInput($data['description']);\n\n     // Due Date\n     $fields[] = \"due_date = :due_date\";\n     $params[':due_date'] = sanitizeInput($data['due_date']);\n\n\n    //files\n    if (isset($data['files']))\n    {\n        // Ensure we treat the input as a string (it might be null if the JSON was malformed)\n        $filesString = (string)($data['files'] ?? '');\n\n        // Process the newline-separated string into a clean array\n        // This matches the original intent (to store an array/JSON in the DB)\n        $filesArray = array_filter(array_map('trim', array_map('strip_tags', explode(\"\\n\", $filesString))));\n\n        $fields[] = \"files = :files\";\n        // Encode the resulting array (which is [] if the textarea was empty)\n        $params[':files'] = json_encode(array_values($filesArray));\n    }\n\n    // TODO: If no fields to update (besides updated_at), return 400 error\n    if (empty($fields))\n         {\n              http_response_code(400);\n              return [\"error\" => \"No valid fields provided for update.\"];\n         }\n    // TODO: Complete the UPDATE query\n      $params[':id'] = (int)$updatedAssignmentId;\n      $sql = \"UPDATE assignments SET \" . implode(', ', $fields) . \" WHERE id = :id\";\n    // TODO: Prepare the statement\n      try {\n         $stmt = $db->prepare($sql);\n\n          // TODO: Bind all parameters dynamically\n         $stmt->execute($params);\n\n          // TODO: Execute the statement\n         if ($stmt->rowCount() > 0)\n           {\n              // TODO: Check if update was successful\n               http_response_code(200);\n               return [\"success\" => true, \"message\" => \"Assignment updated successfully.\"];\n           } \n         else \n           {\n              // TODO: If no rows affected, return appropriate message\n              return [\"message\" => \"No changes were made or assignment not found.\"];\n             }\n\n      } catch (PDOException $error)\n     {\n         http_response_code(500);\n         return [\"error\" => \"Faild: \" . $error->getMessage()];\n     }    \n}\n\n\n/**\n * Function: Delete an assignment\n * Method: DELETE\n * Endpoint: ?resource=assignments&id={assignment_id}\n * \n * Query Parameters:\n *   - id: Assignment ID (required)\n * \n * Response: JSON object with success status\n */\n\nfunction deleteAssignment($db, $assignmentId)\n{\n    // TODO: Validate that $assignmentId is provided and not empty\n     if(empty($assignmentId))\n        {\n            http_response_code(400);\n            return([\"error\" => \"Assignment ID is required!\"]);\n        };\n\n    // TODO: Check if assignment exists\n      $checkStmt = $db->prepare(\"SELECT COUNT(*) FROM assignments WHERE id = :id\");\n      $checkStmt->execute([':id' => $assignmentId]);\n     if ($checkStmt->fetchColumn() == 0) \n        {\n            http_response_code(404);\n            return([\"error\" => \"Assignment not found!\"]);\n        }\n    try{\n    $db->beginTransaction();\n    // TODO: Delete associated comments first (due to foreign key constraint)\n    $sqlDeleteComments = \"DELETE FROM comments_assignment WHERE assignment_id = :id\";\n    $stmtDeleteComments = $db->prepare($sqlDeleteComments);\n    $stmtDeleteComments->bindValue(':id', $assignmentId, PDO::PARAM_INT);\n    $stmtDeleteComments->execute();\n\n    // TODO: Prepare DELETE query for assignment\n      $sql = \"DELETE FROM assignments WHERE id = :id\";\n      $stmt = $db->prepare($sql);\n\n    // TODO: Bind the :id parameter\n      $stmt->bindValue(':id', $assignmentId, PDO::PARAM_INT);\n    // TODO: Execute the statement\n      $stmt->execute();\n    // TODO: Check if delete was successful\n      /*if($stmt->execute())\n        {\n           return [\"success\" => true, \"message\" => \"Assignment and associated comments deleted successfully.\"];\n        }*/\n        $db->commit();\n    if($stmt->rowCount() > 0)\n    {\n        http_response_code(200);\n        return [\"success\" => true, \"message\" => \"Assignment and associated comments deleted successfully.\"];\n    }\n    else\n    {\n            \n         return [\"message\" => \"No changes were made or assignment not found.\"];\n    }\n\n    // TODO: If delete failed, return 500 error\n      /*else\n        {\n            http_response_code(500);\n            return [\"error\" => \"Failed!\"];\n        }*/\n    } catch (PDOException $e) {\n        // If anything fails (including foreign key errors if not caught by explicit delete)\n        $db->rollBack(); \n        http_response_code(500);\n        return [\"error\" => \"Failed to delete assignment due to database error: \" . $e->getMessage()];\n    }\n}\n\n\n// ============================================================================\n// COMMENT CRUD FUNCTIONS\n// ============================================================================\n\n/**\n * Function: Get all comments for a specific assignment\n * Method: GET\n * Endpoint: ?resource=comments&assignment_id={assignment_id}\n * \n * Query Parameters:\n *   - assignment_id: The assignment ID (required)\n * \n * Response: JSON array of comment objects\n */\n\nfunction getCommentsByAssignment($db, $assignmentId)\n{\n    try\n    {\n    // TODO: Validate that $assignmentId is provided and not empty\n      if(empty($assignmentId))\n        {\n            http_response_code(400);\n            return ([\"error\" => \"Assignment ID is required!\"]);\n        };\n\n    // TODO: Prepare SQL query to select all comments for the assignment\n      $sql = \"SELECT * FROM comments_assignment WHERE assignment_id = :id\";\n      $stmt = $db->prepare($sql);\n\n    // TODO: Bind the :assignment_id parameter\n      $stmt->bindValue(':id', $assignmentId, PDO::PARAM_INT);\n\n    // TODO: Execute the statement\n      $stmt->execute();\n\n    // TODO: Fetch the result as associative array\n    // TODO: Fetch all results as associative array\n      $allCommentsOfThatAssignment = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n    // TODO: Return success response with comments data\n          http_response_code(200);\n          return [\n          \"success\" => true,\n          \"comments\" =>$allCommentsOfThatAssignment];\n    }\n    catch(PDOException $error)\n    {\n        http_response_code(500);\n        return [\"error\" => \"Failed: \" . $error->getMessage()];\n    }\n}\n\n/**\n * Function: Create a new comment\n * Method: POST\n * Endpoint: ?resource=comments\n * \n * Required JSON Body:\n *   - assignment_id: Assignment ID (required)\n *   - author: Comment author name (required)\n *   - text: Comment content (required)\n * \n * Response: JSON object with created comment data\n */\n\nfunction createComment($db, $data)\n{\n    // TODO: Validate required fields\n      if(empty($data)||empty($data['assignment_id']) || empty($data['author']) || empty($data['text']))\n        {\n            http_response_code(400);\n            return ([\"error\" => \" Assignmet ID, author, and comment content are required!\"]);\n        };\n\n    // TODO: Sanitize input data\n      //Prevent XSS and remove extra space:$author = htmlspecialchars(trim($data['author'])); and $text = htmlspecialchars(trim($data['text']));\n       $author = sanitizeInput($data['author']);\n       $text = sanitizeInput($data['text']);\n    // TODO: Validate that text is not empty after trimming\n      if($text===\"\")\n        {\n            http_response_code(400);\n            return([\"error\" => \" Empty text!\"]);\n        }\n\n    // TODO: Verify that the assignment exists\n      $checkStmt = $db->prepare(\"SELECT COUNT(*) FROM assignments WHERE id = :id\");\n      $assignmentId = $data['assignment_id'];\n      $checkStmt->execute([':id' => $assignmentId]);\n     if ($checkStmt->fetchColumn() == 0) \n        {\n            http_response_code(404);\n            return([\"error\" => \"Assignment not found!\"]);\n        }\n\n    // TODO: Prepare INSERT query for comment\n      $sql = \"INSERT INTO comments_assignment (assignment_id, author, text) VALUES (:assignment_id, :author, :text)\";\n      $stmt = $db->prepare($sql);\n\n    // TODO: Bind all parameters\n      $stmt->bindValue(':assignment_id', $assignmentId, PDO::PARAM_INT);\n      $stmt->bindValue(':author', $author, PDO::PARAM_STR);\n      $stmt->bindValue(':text', $text, PDO::PARAM_STR);\n\n    // TODO: Execute the statement\n     $stmt->execute();\n\n    // TODO: Get the ID of the inserted comment\n     $lastId = $db->lastInsertId();\n\n    // TODO: Return success response with created comment data\n       /*http_response_code(201);\n          return \n          [\n            \"success\" => true,\n            \"comments\" =>[$lastId,\n            \"author\" => $author,\n             \"text\" => $text]\n          ];*/\n    http_response_code(201);\n    return\n    [\n           \"success\" => true,\n            \"message\" => \"Comment created successfully!\",\n            \"comment\" => [  \n                           \"id\" => $lastId,\n                           \"assignment_id\" => $assignmentId,\n                           \"author\" => $author,\n                           \"text\" => $text]\n    ];\n}\n\n\n/**\n * Function: Delete a comment\n * Method: DELETE\n * Endpoint: ?resource=comments&id={comment_id}\n * \n * Query Parameters:\n *   - id: Comment ID (required)\n * \n * Response: JSON object with success status\n */\n\nfunction deleteComment($db, $commentId)\n{\n    // TODO: Validate that $commentId is provided and not empty\n      if(empty($commentId))\n        {\n            http_response_code(400);\n            return([\"error\" => \"Comment ID is required!\"]);\n        };\n\n    // TODO: Check if comment exists\n      $checkStmt = $db->prepare(\"SELECT COUNT(*) FROM comments_assignment WHERE id = :id\");\n      $checkStmt->execute([':id' => $commentId]);\n     if ($checkStmt->fetchColumn() == 0) \n        {\n            http_response_code(404);\n            return([\"error\" => \"Comment not found!\"]);\n        }\n    try \n    {\n    // TODO: Prepare DELETE query\n    $sql = \"DELETE FROM comments_assignment WHERE id = :id\";\n    $stmt = $db->prepare($sql);\n\n    // TODO: Bind the :id parameter\n      $stmt->bindValue(':id', $commentId, PDO::PARAM_INT);\n\n    // TODO: Execute the statement\n        $stmt->execute();\n    // TODO: Check if delete was successful\n      /*if($stmt->execute())\n        {\n           return [\"success\" => true, \"message\" => \"Comment deleted successfully.\"];\n        }*/\n        if ($stmt->rowCount() > 0)\n        {\n            http_response_code(200);    \n            return [\"success\" => true, \"message\" => \"Comment deleted successfully.\"];\n        } \n        else \n        {\n                http_response_code(404);\n                return [\"error\" => \"Comment not found or already deleted.\"];\n        \n        }\n    }\n    // TODO: If delete failed, return 500 error\n      /*else\n        {\n            http_response_code(500);\n            return [\"error\" => \"Failed!\"];\n        }*/\ncatch (PDOException $e)\n    {   \n        http_response_code(500);\n       return [\"error\" => \"Failed!\"];\n    }\n}\n\n\n// ============================================================================\n// MAIN REQUEST ROUTER\n// ============================================================================\n\n/*if ($method === 'POST' || $method === 'PUT')\n{\n    // Read raw JSON body for POST/PUT requests\n    $input = file_get_contents('php://input');\n    $data = json_decode($input, true);\n\n    // Check for JSON decoding errors\n    if ($data === null && $input !== '')\n    {\n        http_response_code(400);\n        echo json_encode([\"error\" => \"Invalid JSON payload received.\"]);\n        exit;\n    }\n}*/\n/*Basic auth:\n <?php\nsession_start();\nrequire_once __DIR__ . '/auth.php'; // provided by Task 1\n\nrequire_login(); // blocks if not logged in\n\n// For admin-only endpoints:\nrequire_role('teacher'); // blocks if current user is not teacher\n */\ntry {\n    // TODO: Get the 'resource' query parameter to determine which resource to access\n    $resource = $_GET['resource'] ?? '';\n    $res = null;\n\n    // TODO: Route based on HTTP method and resource type\n    if ($method === 'GET')\n    {\n        // TODO: Handle GET requests\n        if ($resource === 'assignments')\n        {\n            // TODO: Check if 'id' query parameter exists\n            if (isset($_GET['id']))\n            {\n                $assignmentId = $_GET['id'];\n                $res = getAssignmentById($db, $assignmentId);\n            }\n            else\n            {\n                $res = getAllAssignments($db);\n            }\n        }\n        elseif ($resource === 'comments') \n        {\n           if (isset($_GET['id'])) \n            {\n               $assignmentId = $_GET['id'];\n               $res = getCommentsByAssignment($db, $assignmentId);\n            } \n            else \n            {\n               http_response_code(400);\n               $res = [\"error\" => \"Assignment ID is required!\"];\n            }\n        } \n        else\n        {\n            // TODO: Invalid resource, return 400 error\n             http_response_code(400);\n             $res = [\"error\" => \"Invalid resource: \" . $resource];\n        }\n    } \n    elseif ($method === 'POST')\n    {\n        // TODO: Handle POST requests (create operations)\n        if ($resource === 'assignments')\n        {\n            // TODO: Call createAssignment($db, $data)\n             $res = createAssignment($db, $data);\n        } \n        elseif ($resource === 'comments')\n        {\n        // TODO: Call createComment($db, $data)\n           $res = createComment($db, $data);\n        }\n       else\n        {\n        // TODO: Invalid resource, return 400 error\n        http_response_code(400);\n        $res = [\"error\" => \"Invalid resource: \" . $resource];\n        }   \n    }\n    elseif ($method === 'PUT') \n    {\n        // TODO: Handle PUT requests (update operations)\n        if ($resource === 'assignments')\n        {\n            // TODO: Call updateAssignment($db, $data)\n             $res = updateAssignment($db, $data);\n        }\n        else\n        {\n            // TODO: PUT not supported for other resources\n             http_response_code(405);\n             $res = [\"error\" => \"Method not supported for resource: \" . $resource];\n        }\n    }\n    elseif ($method === 'DELETE')\n    {\n        // TODO: Handle DELETE requests\n        if ($resource === 'assignments')\n        {\n            // TODO: Get 'id' from query parameter or request body\n            $deleteIdAssignment = $_GET['id'] ?? null;\n            if (!$deleteIdAssignment)\n            {\n                http_response_code(400);\n                $res = [\"error\" => \"ID is required.\"];\n            }\n            else\n            {\n                $res = deleteAssignment($db, $deleteIdAssignment);\n            }\n        }\n        elseif ($resource === 'comments')\n        {\n            // TODO: Get comment 'id' from query parameter\n            $deleteIdComment = $_GET['id'] ?? null;\n            if (!$deleteIdComment)\n            {\n                http_response_code(400);\n                $res = [\"error\" => \"ID is required.\"];\n            }\n            else\n            {\n                $res = deleteComment($db, $deleteIdComment);\n            }\n        } \n        else\n        {\n            // TODO: Invalid resource, return 400 error\n            http_response_code(400);\n            $res = [\"error\" => \"Invalid resource: \" . $resource];\n        }\n    }\n    else\n    {\n        // TODO: Method not supported\n        http_response_code(405);\n        $res = [\"error\" => \"Unsupported method: \" . $method];\n    }\n} catch (PDOException $e)\n{\n    // TODO: Handle database errors\n      http_response_code(500);\n      $res = [\"error\" => \"Database failure: \" . $e->getMessage()];\n} catch (Exception $e)\n{\n    // TODO: Handle general errors\n    http_response_code(500);\n    $res = [\"error\" => \"An unexpected error occurred: \" . $e->getMessage()];\n}\n//ob_clean();\necho json_encode($res);\n\n// ============================================================================\n// HELPER FUNCTIONS\n// ============================================================================\n\n/**\n * Helper function to send JSON response and exit\n * \n * @param array $data - Data to send as JSON\n * @param int $statusCode - HTTP status code (default: 200)\n */\nfunction sendResponse($data, $statusCode = 200)\n{\n    // TODO: Set HTTP response code\n     http_response_code($statusCode);\n\n    // TODO: Ensure data is an array\n     if($data!==null && $statusCode!==204)\n        {\n            // TODO: Echo JSON encoded data\n             echo json_encode($data);\n        }\n    // TODO: Exit to prevent further execution\n     exit();\n}\n\n/**\n * Helper function to sanitize string input\n * \n * @param string $data - Input data to sanitize\n * @return string - Sanitized data\n */\nfunction sanitizeInput($data)\n{\n    // TODO: Trim whitespace from beginning and end\n     $newData = trim($data);\n\n    // TODO: Remove HTML and PHP tags\n     $newData = strip_tags($newData);\n\n    // TODO: Convert special characters to HTML entities\n     $newData = htmlentities($newData);\n\n    // TODO: Return the sanitized data\n     return $newData;\n}\n\n/**\n * Helper function to validate date format (YYYY-MM-DD)\n * \n * @param string $date - Date string to validate\n * @return bool - True if valid, false otherwise\n */\nfunction validateDate($date)\n{\n    // TODO: Use DateTime::createFromFormat to validate\n      $dateTime = DateTime::createFromFormat('Y-m-d', $date);\n\n    // TODO: Return true if valid, false otherwise\n       return $dateTime !== false && $dateTime->format('Y-m-d') === $date;\n}\n\n/**\n * Helper function to validate allowed values (for sort fields, order, etc.)\n * \n * @param string $value - Value to validate\n * @param array $allowedValues - Array of allowed values\n * @return bool - True if valid, false otherwise\n */\nfunction validateAllowedValue($value, $allowedValues)\n{\n    // TODO: Check if $value exists in $allowedValues array\n    $isValid = in_array($value, $allowedValues, true);\n    // TODO: Return the result\n    return $isValid;\n}\n?>","path":null,"size_bytes":31311,"size_tokens":null},"assets/README.md":{"content":"Add your images and other required assets here.\n","path":null,"size_bytes":48,"size_tokens":null},"src/common/css/dashboard.css":{"content":"/* ================================================\n   GLOBAL NEON THEME (MATCHES WEEKLY-ADMIN EXACTLY)\n================================================= */\n\n:root {\n    --primary: #00ffff;\n    --secondary: #ff00ff;\n    --accent: #7c3aed;\n    --dark: #0a0a0f;\n    --darker: #050508;\n    --light: #ffffff;\n    --gray: #9ca3af;\n}\n\nbody {\n    margin: 0;\n    padding: 0;\n    background: var(--darker);\n    font-family: 'Segoe UI', Tahoma, sans-serif;\n    color: var(--light);\n}\n\nma\n/* ================================================\n   HEADER (MATCHES WEEKLY-ADMIN HEADER)\n================================================= */\n\n.header {\n    background: rgba(255, 255, 255, 0.04);\n    padding: 2rem 2rem;\n    margin: 0 3.5rem;\n    border-radius: 0 0 20px 20px;\n    backdrop-filter: blur(14px);\n    box-shadow: 0 0 20px rgba(0, 255, 255, 0.10);\n}\n\n.header h1 {\n    font-size: 2rem;\n    margin: 2rem;\n\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n\n    animation: neonTitleGlow 1.6s ease-in-out infinite alternate;\n}\n\n@keyframes neonTitleGlow {\n    from { filter: drop-shadow(0 0 12px rgba(0, 255, 255, 0.5)); }\n    to   { filter: drop-shadow(0 0 18px rgba(255, 0, 255, 0.7)); }\n}\n\n\n/* ================================================\n   NAVIGATION BAR (NEON MATCHING STYLE)\n================================================= */\n\n.nav {\n    background: rgba(255, 255, 255, 0.05);\n    padding: 1rem 2rem;\n    margin: 1.5rem 3.5rem;\n    border-radius: 14px;\n    backdrop-filter: blur(12px);\n    box-shadow: 0 0 18px rgba(0, 255, 255, 0.08);\n      display: flex;\n    justify-content: space-between; /* left side and right side */\n    align-items: center; /* keep them vertically centered */\n    flex-wrap: nowrap;   /* prevents stacking */\n}\n\n.nav-left {\n    display: flex;\n    gap: 1rem; /* space between links */\n}\n\n.nav-right {\n    display: flex;\n}\n\n.nav a {\n    color: var(--primary);\n    font-weight: 500;\n    text-decoration: none;\n    margin-right: 1.5rem;\n    padding: 0.5rem 1rem;\n    border-radius: 12px;\n    text-shadow: 0 0 6px rgba(0,255,255,0.6);\n    transition: 0.3s ease;\n}\n\n.nav a:hover {\n    color: var(--secondary);\n    background: rgba(255,255,255,0.08);\n    box-shadow: 0 0 12px rgba(255,0,255,0.4);\n}\n\n\n/* ================================================\n   WELCOME BOX (MATCHES FIELDSET STYLE)\n================================================= */\n\n.welcome-box {\n    margin: 2rem 3.5rem;\n    padding: 2rem;\n\n    border-radius: 20px;\n    border: 1px solid rgba(255,255,255,0.12);\n\n    background: rgba(255,255,255,0.04);\n    backdrop-filter: blur(14px);\n\n    box-shadow: 0 0 20px rgba(0,255,255,0.12);\n}\n\n.welcome-box h2 {\n    background: linear-gradient(45deg, var(--primary), var(--accent));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    margin: 0 0 10px 0;\n}\n\n\n/* ================================================\n   DASHBOARD GRID (GLASSY CARDS)\n================================================= */\n\n.dashboard-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(290px, 1fr));\n    gap: 2rem;\n    padding: 2rem 3.5rem;\n}\n\n.card {\n    padding: 2rem;\n\n    border-radius: 20px;\n    background: rgba(255,255,255,0.04);\n    border: 1px solid rgba(255,255,255,0.12);\n\n    box-shadow: 0 0 20px rgba(0,255,255,0.10);\n    backdrop-filter: blur(12px);\n\n    transition: 0.3s ease;\n}\n\n.card:hover {\n    transform: translateY(-6px);\n    box-shadow:\n        0 0 25px rgba(0,255,255,0.25),\n        0 0 35px rgba(255,0,255,0.25);\n}\n\n.card h3 {\n    margin-top: 0;\n    margin-bottom: 0.6rem;\n    font-size: 1.4rem;\n\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n}\n\n\n/* ================================================\n   BUTTONS (MATCH EXACT SAME STYLE AS WEEKLY)\n================================================= */\n\nbutton,\n.card button {\n    padding: 0.8rem 1.3rem;\n    border: none;\n    border-radius: 25px;\n\n    font-size: 1rem;\n    font-weight: bold;\n\n    cursor: pointer;\n\n    background: linear-gradient(45deg, var(--primary), var(--accent));\n    color: var(--dark);\n\n    transition: 0.3s ease;\n}\n\nbutton:hover {\n    transform: translateY(-3px);\n    box-shadow: 0 10px 25px rgba(0,255,255,0.3);\n}\n\n\n/* ================================================\n   ANY LINKS INSIDE CARDS\n================================================= */\n\n.card a {\n    text-decoration: none;\n}\n\n.card a button {\n    width: 100%;\n}\n\n\n/* ================================================\n   RESPONSIVE\n================================================= */\n\n@media (max-width: 600px) {\n    .header {\n        margin-left: 1rem;\n        padding: 1.5rem;\n    }\n    .nav {\n        margin: 1rem;\n    }\n    .welcome-box {\n        margin: 1rem;\n    }\n    .dashboard-grid {\n        padding: 1rem;\n    }\n}\n","path":null,"size_bytes":4942,"size_tokens":null},"src/admin/manage_users.js":{"content":"/*\n  Requirement: Add interactivity and data management to the Admin Portal.\n\n  Instructions:\n  1. Link this file to your HTML using a <script> tag with the 'defer' attribute.\n     Example: <script src=\"manage_users.js\" defer></script>\n  2. Implement the JavaScript functionality as described in the TODO comments.\n  3. All data management will be done by manipulating the 'students' array\n     and re-rendering the table.\n*/\n\n// --- Global Data Store ---\n// This array will be populated with data fetched from 'students.json'.\nlet students = [];\n\n// --- Element Selections ---\n// We can safely select elements here because 'defer' guarantees\n// the HTML document is parsed before this script runs.\n\n// TODO: Select the student table body (tbody).\nconst studentTableBody = document.querySelector('#student-table tbody');\n// TODO: Select the \"Add Student\" form.\n// (You'll need to add id=\"add-student-form\" to this form in your HTML).\nconst addStudentForm = document.getElementById('add-student-form');\n// TODO: Select the \"Change Password\" form.\n// (You'll need to add id=\"password-form\" to this form in your HTML).\nconst passwordForm = document.getElementById('password-form');\n// TODO: Select the search input field.\n// (You'll need to add id=\"search-input\" to this input in your HTML).\nconst searchInput = document.getElementById('search-input');\n// TODO: Select all table header (th) elements in thead.\nconst tableHeaders = document.querySelectorAll('#student-table thead th');\n// --- Functions ---\n\n/**\n * TODO: Implement the createStudentRow function.\n * This function should take a student object {name, id, email} and return a <tr> element.\n * The <tr> should contain:\n * 1. A <td> for the student's name.\n * 2. A <td> for the student's ID.\n * 3. A <td> for the student's email.\n * 4. A <td> containing two buttons:\n * - An \"Edit\" button with class \"edit-btn\" and a data-id attribute set to the student's ID.\n * - A \"Delete\" button with class \"delete-btn\" and a data-id attribute set to the student's ID.\n */\nfunction createStudentRow(student) {\n  const row = document.createElement('tr');\n  \n  const nameCell = document.createElement('td');\n  nameCell.textContent = student.name;\n  \n  const idCell = document.createElement('td');\n  idCell.textContent = student.id;\n  \n  const emailCell = document.createElement('td');\n  emailCell.textContent = student.email;\n  \n  const actionsCell = document.createElement('td');\n  \n  const editButton = document.createElement('button');\n  editButton.textContent = 'Edit';\n  editButton.className = 'edit-btn';\n  editButton.setAttribute('data-id', student.id);\n  \n  const deleteButton = document.createElement('button');\n  deleteButton.textContent = 'Delete';\n  deleteButton.className = 'delete-btn';\n  deleteButton.setAttribute('data-id', student.id);\n  \n  actionsCell.appendChild(editButton);\n  actionsCell.appendChild(deleteButton);\n  \n  row.appendChild(nameCell);\n  row.appendChild(idCell);\n  row.appendChild(emailCell);\n  row.appendChild(actionsCell);\n  \n  return row;\n}\n\n/**\n * TODO: Implement the renderTable function.\n * This function takes an array of student objects.\n * It should:\n * 1. Clear the current content of the `studentTableBody`.\n * 2. Loop through the provided array of students.\n * 3. For each student, call `createStudentRow` and append the returned <tr> to `studentTableBody`.\n */\nfunction renderTable(studentArray) {\n  studentTableBody.innerHTML = '';\n  studentArray.forEach(student => {\n    const row = createStudentRow(student);\n    studentTableBody.appendChild(row);\n  });}\n\n/**\n * TODO: Implement the handleChangePassword function.\n * This function will be called when the \"Update Password\" button is clicked.\n * It should:\n * 1. Prevent the form's default submission behavior.\n * 2. Get the values from \"current-password\", \"new-password\", and \"confirm-password\" inputs.\n * 3. Perform validation:\n * - If \"new-password\" and \"confirm-password\" do not match, show an alert: \"Passwords do not match.\"\n * - If \"new-password\" is less than 8 characters, show an alert: \"Password must be at least 8 characters.\"\n * 4. If validation passes, show an alert: \"Password updated successfully!\"\n * 5. Clear all three password input fields.\n */\nfunction handleChangePassword(event) {\n  event.preventDefault();\n  \n  const currentPassword = document.getElementById('current-password').value;\n  const newPassword = document.getElementById('new-password').value;\n  const confirmPassword = document.getElementById('confirm-password').value;\n  \n  if (newPassword !== confirmPassword) {\n    alert(\"Passwords do not match.\");\n    return;\n  }\n  \n  if (newPassword.length < 8) {\n    alert(\"Password must be at least 8 characters.\");\n    return;\n  }\n  \n  alert(\"Password updated successfully!\");\n  passwordForm.reset();\n}\n\n/**\n * TODO: Implement the handleAddStudent function.\n * This function will be called when the \"Add Student\" button is clicked.\n * It should:\n * 1. Prevent the form's default submission behavior.\n * 2. Get the values from \"student-name\", \"student-id\", and \"student-email\".\n * 3. Perform validation:\n * - If any of the three fields are empty, show an alert: \"Please fill out all required fields.\"\n * - (Optional) Check if a student with the same ID already exists in the 'students' array.\n * 4. If validation passes:\n * - Create a new student object: { name, id, email }.\n * - Add the new student object to the global 'students' array.\n * - Call `renderTable(students)` to update the view.\n * 5. Clear the \"student-name\", \"student-id\", \"student-email\", and \"default-password\" input fields.\n */\nfunction handleAddStudent(event) {\n  event.preventDefault();\n  \n  const name = document.getElementById('student-name').value;\n  const id = document.getElementById('student-id').value;\n  const email = document.getElementById('student-email').value;\n  \n  if (!name || !id || !email) {\n    alert(\"Please fill out all required fields.\");\n    return;\n  }\n  \n  if (students.some(student => student.id === id)) {\n    alert(\"A student with this ID already exists.\");\n    return;\n  }\n  \n  const newStudent = { name, id, email };\n  students.push(newStudent);\n  renderTable(students);\n  addStudentForm.reset();\n}\n\n/**\n * TODO: Implement the handleTableClick function.\n * This function will be an event listener on the `studentTableBody` (event delegation).\n * It should:\n * 1. Check if the clicked element (`event.target`) has the class \"delete-btn\".\n * 2. If it is a \"delete-btn\":\n * - Get the `data-id` attribute from the button.\n * - Update the global 'students' array by filtering out the student with the matching ID.\n * - Call `renderTable(students)` to update the view.\n * 3. (Optional) Check for \"edit-btn\" and implement edit logic.\n */\nfunction handleTableClick(event) {\n   if (event.target.classList.contains('delete-btn')) {\n    const studentId = event.target.getAttribute('data-id');\n    students = students.filter(student => student.id !== studentId);\n    renderTable(students);\n  }\n}\n\n/**\n * TODO: Implement the handleSearch function.\n * This function will be called on the \"input\" event of the `searchInput`.\n * It should:\n * 1. Get the search term from `searchInput.value` and convert it to lowercase.\n * 2. If the search term is empty, call `renderTable(students)` to show all students.\n * 3. If the search term is not empty:\n * - Filter the global 'students' array to find students whose name (lowercase)\n * includes the search term.\n * - Call `renderTable` with the *filtered array*.\n */\nfunction handleSearch(event) {\n  const searchTerm = searchInput.value.toLowerCase();\n  \n  if (searchTerm === '') {\n    renderTable(students);\n  } else {\n    const filteredStudents = students.filter(student => \n      student.name.toLowerCase().includes(searchTerm)\n    );\n    renderTable(filteredStudents);\n  }\n}\n\n/**\n * TODO: Implement the handleSort function.\n * This function will be called when any `th` in the `thead` is clicked.\n * It should:\n * 1. Identify which column was clicked (e.g., `event.currentTarget.cellIndex`).\n * 2. Determine the property to sort by ('name', 'id', 'email') based on the index.\n * 3. Determine the sort direction. Use a data-attribute (e.g., `data-sort-dir=\"asc\"`) on the `th`\n * to track the current direction. Toggle between \"asc\" and \"desc\".\n * 4. Sort the global 'students' array *in place* using `array.sort()`.\n * - For 'name' and 'email', use `localeCompare` for string comparison.\n * - For 'id', compare the values as numbers.\n * 5. Respect the sort direction (ascending or descending).\n * 6. After sorting, call `renderTable(students)` to update the view.\n */\nfunction handleSort(event) {\n  const th = event.currentTarget;\n  const columnIndex = th.cellIndex;\n  const sortProperty = ['name', 'id', 'email'][columnIndex];\n  const currentSortDir = th.getAttribute('data-sort-dir') || 'asc';\n  const newSortDir = currentSortDir === 'asc' ? 'desc' : 'asc';\n  \n  th.setAttribute('data-sort-dir', newSortDir);\n  \n  students.sort((a, b) => {\n    let aValue = a[sortProperty];\n    let bValue = b[sortProperty];\n    \n    if (sortProperty === 'id') {\n      aValue = parseInt(aValue);\n      bValue = parseInt(bValue);\n    } else {\n      aValue = aValue.toLowerCase();\n      bValue = bValue.toLowerCase();\n    }\n     if (aValue < bValue) return newSortDir === 'asc' ? -1 : 1;\n    if (aValue > bValue) return newSortDir === 'asc' ? 1 : -1;\n    return 0;\n  });\n  \n  renderTable(students);\n}\n\n/**\n * TODO: Implement the loadStudentsAndInitialize function.\n * This function needs to be 'async'.\n * It should:\n * 1. Use the `fetch()` API to get data from 'students.json'.\n * 2. Check if the response is 'ok'. If not, log an error.\n * 3. Parse the JSON response (e.g., `await response.json()`).\n * 4. Assign the resulting array to the global 'students' variable.\n * 5. Call `renderTable(students)` to populate the table for the first time.\n * 6. After data is loaded, set up all the event listeners:\n * - \"submit\" on `changePasswordForm` -> `handleChangePassword`\n * - \"submit\" on `addStudentForm` -> `handleAddStudent`\n * - \"click\" on `studentTableBody` -> `handleTableClick`\n * - \"input\" on `searchInput` -> `handleSearch`\n * - \"click\" on each header in `tableHeaders` -> `handleSort`\n */\nasync function loadStudentsAndInitialize() {\n    try {\n    const response = await fetch('students.json');\n    if (!response.ok) throw new Error('Failed to load students');\n    students = await response.json();\n    renderTable(students);\n    \n    passwordForm.addEventListener('submit', handleChangePassword);\n    addStudentForm.addEventListener('submit', handleAddStudent);\n    studentTableBody.addEventListener('click', handleTableClick);\n    searchInput.addEventListener('input', handleSearch);\n    tableHeaders.forEach(th => th.addEventListener('click', handleSort));\n  } catch (error) {\n    console.error('Error loading students:', error);\n  }\n}\n\n// --- Initial Page Load ---\n// Call the main async function to start the application.\nloadStudentsAndInitialize();\n","path":null,"size_bytes":10941,"size_tokens":null},"config/Config.php":{"content":"<?php\nif (session_status() === PHP_SESSION_NONE) {\n    ini_set('session.cookie_lifetime', 0);\n    ini_set('session.gc_maxlifetime', 1800);\n    ini_set('session.cookie_httponly', 1);\n    ini_set('session.use_strict_mode', 1);\n    \n    session_start();\n}\n\n$database_url = getenv('DATABASE_URL');\n\nif ($database_url) {\n    $db_parts = parse_url($database_url);\n    $host = $db_parts['host'] ?? 'localhost';\n    $port = $db_parts['port'] ?? 5432;\n    $user = $db_parts['user'] ?? '';\n    $password = $db_parts['pass'] ?? '';\n    $database = ltrim($db_parts['path'] ?? '', '/');\n} else {\n    $host = getenv('PGHOST') ?: 'localhost';\n    $port = getenv('PGPORT') ?: 5432;\n    $user = getenv('PGUSER') ?: '';\n    $password = getenv('PGPASSWORD') ?: '';\n    $database = getenv('PGDATABASE') ?: '';\n}\n\ntry {\n    $conn = new PDO(\"pgsql:host=$host;port=$port;dbname=$database\", $user, $password);\n    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n    $conn->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);\n    $conn->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);\n} catch (PDOException $e) {\n    error_log(\"Database connection failed: \" . $e->getMessage());\n    die(\"Database connection failed. Please try again later.\");\n}\n\nfunction isLoggedIn() {\n    if (isset($_SESSION['user_id']) && isset($_SESSION['username']) && isset($_SESSION['role'])) {\n        return true;\n    }\n    elseif (isset($_COOKIE['user_id']) && isset($_COOKIE['username']) && isset($_COOKIE['role'])) {\n        if (!is_numeric($_COOKIE['user_id']) || empty($_COOKIE['username']) || empty($_COOKIE['role'])) {\n            return false;\n        }\n        \n        $_SESSION['user_id'] = (int)$_COOKIE['user_id'];\n        $_SESSION['username'] = htmlspecialchars($_COOKIE['username'], ENT_QUOTES, 'UTF-8');\n        $_SESSION['role'] = htmlspecialchars($_COOKIE['role'], ENT_QUOTES, 'UTF-8');\n        return true;\n    }\n    return false;\n}\n\nfunction isAdmin() {\n    return isset($_SESSION['role']) && $_SESSION['role'] === 'admin';\n}\n\nfunction isInstructor() {\n    return isset($_SESSION['role']) && $_SESSION['role'] === 'instructor';\n}\n\nfunction isStudent() {\n    return isset($_SESSION['role']) && $_SESSION['role'] === 'student';\n}\n\nfunction requireLogin() {\n    if (!isLoggedIn()) {\n        header(\"Location: login.php\");\n        exit();\n    }\n}\n\nfunction requireAdmin() {\n    if (!isLoggedIn() || !isAdmin()) {\n        header(\"Location: unauthorized.php\");\n        exit();\n    }\n}\n\nfunction requireInstructor() {\n    if (!isLoggedIn() || !isInstructor()) {\n        header(\"Location: unauthorized.php\");\n        exit();\n    }\n}\n\nfunction requireStudent() {\n    if (!isLoggedIn() || !isStudent()) {\n        header(\"Location: unauthorized.php\");\n        exit();\n    }\n}\n\nfunction generateCSRFToken() {\n    if (empty($_SESSION['csrf_token'])) {\n        $_SESSION['csrf_token'] = bin2hex(random_bytes(32));\n    }\n    return $_SESSION['csrf_token'];\n}\n\nfunction verifyCSRFToken($token) {\n    return isset($_SESSION['csrf_token']) && hash_equals($_SESSION['csrf_token'], $token);\n}\n?>\n","path":null,"size_bytes":3075,"size_tokens":null},"src/assignments/list.js":{"content":"/*\n  Requirement: Populate the \"Course Assignments\" list page.\n\n  Instructions:\n  1. Link this file to `list.html` using:\n     <script src=\"list.js\" defer></script>\n\n  2. In `list.html`, add an `id=\"assignment-list-section\"` to the\n     <section> element that will contain the assignment articles.\n\n  3. Implement the TODOs below.\n*/\n\n// --- Element Selections ---\n// TODO: Select the section for the assignment list ('#assignment-list-section').\nconst assignmentList = document.getElementById(\"assignment-list-section\");\n\n// --- Functions ---\n//API:\n const API = \"/api/assignments?resource=assignments\";\n/**\n * TODO: Implement the createAssignmentArticle function.\n * It takes one assignment object {id, title, dueDate, description}.\n * It should return an <article> element matching the structure in `list.html`.\n * The \"View Details\" link's `href` MUST be set to `details.html?id=${id}`.\n * This is how the detail page will know which assignment to load.\n */\nfunction createAssignmentArticle(assignment)\n{\n  // Destructure assignment object for easier access:\n  const { id, title, due_date, description } = assignment;\n  //creating article element:\n  const article = document.createElement(\"article\");\n  //creating details:\n  const h2 = document.createElement(\"h2\");\n  const p1 = document.createElement(\"p\");\n  const p2 = document.createElement(\"p\");\n  const a = document.createElement(\"a\");\n  //assigning data to each new element:\n  a.textContent = \"View Details\";\n  a.href=`/assignments/details?id=${id}`;\n  h2.textContent = `Assignment ${id}: ${title}`;\n  p1.textContent=\"Due:\" + ` ${due_date}`;\n  p2.textContent= description;\n  //adding element to article:\n  article.append(h2, p1, p2, a);\n  //return\n  return article;\n}\n\n/**\n * TODO: Implement the loadAssignments function.\n * This function needs to be 'async'.\n * It should:\n * 1. Use `fetch()` to get data from 'assignments.json'.\n * 2. Parse the JSON response into an array.\n * 3. Clear any existing content from `listSection`.\n * 4. Loop through the assignments array. For each assignment:\n * - Call `createAssignmentArticle()`.\n * - Append the returned <article> element to `listSection`.\n */\nasync function loadAssignments()\n{\n  //fetch\n  const response = await fetch(API);\n  //parse(converting json to object)\n  const assignments = await response.json();\n  //clear content from assignment list:\n  assignmentList.textContent=\"\";\n  //Loop for each assignment:\n  assignments.forEach(assignment =>\n    {\n      //call create article function:\n      const newArticle = createAssignmentArticle(assignment);\n      //Append article to section:\n      assignmentList.appendChild(newArticle);\n    });\n}\n\n// --- Initial Page Load ---\n// Call the function to populate the page.\nloadAssignments();","path":null,"size_bytes":2747,"size_tokens":null},"src/assignments/admin.js":{"content":"/*\n  Requirement: Make the \"Manage Assignments\" page interactive.\n\n  Instructions:\n  1. Link this file to `admin.html` using:\n     <script src=\"admin.js\" defer></script>\n\n  2. In `admin.html`, add an `id=\"assignments-tbody\"` to the <tbody> element\n     so you can select it.\n\n  3. Implement the TODOs below.\n*/\n\n// --- Global Data Store ---\n// This will hold the assignments loaded from the JSON file.\nlet assignments = [];\n\n// --- Element Selections ---\n// TODO: Select the assignment form ('#assignment-form').\nconst assignmentForm = document.getElementById(\"assignment-form\");\n\n// TODO: Select the assignments table body ('#assignments-tbody').\nconst assignmentTableBody = document.getElementById(\"assignments-tbody\");\n\n// --- Functions ---\n\n/**\n * TODO: Implement the createAssignmentRow function.\n * It takes one assignment object {id, title, dueDate}.\n * It should return a <tr> element with the following <td>s:\n * 1. A <td> for the `title`.\n * 2. A <td> for the `dueDate`.\n * 3. A <td> containing two buttons:\n * - An \"Edit\" button with class \"edit-btn\" and `data-id=\"${id}\"`.\n * - A \"Delete\" button with class \"delete-btn\" and `data-id=\"${id}\"`.\n */\nfunction createAssignmentRow(assignment)\n{\n  // Destructure assignment object for easier access:\n  const { id, title, due_date} = assignment;\n  //create tr and tds:\n  const tr = document.createElement(\"tr\");\n  const tdtitle = document.createElement(\"td\");\n  const tdDueDate = document.createElement(\"td\");\n  const tdButtons = document.createElement(\"td\");\n  const editButton = document.createElement(\"button\");\n  const deleteButton = document.createElement(\"button\");\n  //assigning data to each new element:\n  tdtitle.textContent = `${title}`\n  tdDueDate.textContent= `${due_date}`;\n  editButton.textContent = \"Edit\";\n  editButton.className = \"edit-btn\";\n  editButton.dataset.id=`${id}`;\n  deleteButton.textContent = \"Delete\";\n  deleteButton.className = \"delete-btn\";\n  deleteButton.dataset.id=`${id}`;\n  //append buttons in their td:\n  tdButtons.append(editButton, deleteButton);\n  //append elements to tr:\n  tr.append(tdtitle, tdDueDate, tdButtons);\n  //return\n  return tr;\n}\n\n/**\n * TODO: Implement the renderTable function.\n * It should:\n * 1. Clear the `assignmentsTableBody`.\n * 2. Loop through the global `assignments` array.\n * 3. For each assignment, call `createAssignmentRow()`, and\n * append the resulting <tr> to `assignmentsTableBody`.\n */\nfunction renderTable()\n{\n  //clear assignmentsTableBody:\n  assignmentTableBody.innerHTML = \"\";\n  //loop through assignments array:\n  assignments.forEach(assignment =>\n    {\n       //calling createAssignmentRow()\n       const tableRow = createAssignmentRow(assignment);\n       //append tr:\n       assignmentTableBody.appendChild(tableRow);\n    })\n}\n\n/**\n * TODO: Implement the handleAddAssignment function.\n * This is the event handler for the form's 'submit' event.\n * It should:\n * 1. Prevent the form's default submission.\n * 2. Get the values from the title, description, due date, and files inputs.\n * 3. Create a new assignment object with a unique ID (e.g., `id: \\`asg_${Date.now()}\\``).\n * 4. Add this new assignment object to the global `assignments` array (in-memory only).\n * 5. Call `renderTable()` to refresh the list.\n * 6. Reset the form.\n */\nasync function handleAddAssignment(event)\n{\n  //prevent default submission:\n  event.preventDefault();\n  //Get the values from the title, description, due date, and files inputs:\n  const title = document.getElementById(\"assignment-title\").value;\n  const description = document.getElementById(\"assignment-description\").value;\n  const due_date = document.getElementById(\"assignment-due-date\").value;\n  const files = document.getElementById(\"assignment-files\").value;\n  /*//create new assignmet object:\n  const assignment = {id: Date.now(), title: title, description: description, dueDate: dueDate, files: [file] }\n  //add new assignment to assignmets array:\n  assignments.push(assignment);*/\n  const newAssignmentData = {title: title,description: description, due_date: due_date, files: files};\n  const response = await fetch(\"/api/assignments?resource=assignments\", {method: 'POST',headers: {'Content-Type': 'application/json'},body: JSON.stringify(newAssignmentData)});\n  const result = await response.json();\n  if (result.success && result.assignment)\n    {\n      assignments.push(result.assignment);\n      //Refresh list:\n        renderTable();\n      //Reset the form:\n        event.target.reset();\n    }\n  else \n    {\n        console.error(\"Failed to create assignment:\", result.error || result.message);\n    }\n}\n\n/**\n * TODO: Implement the handleTableClick function.\n * This is an event listener on the `assignmentsTableBody` (for delegation).\n * It should:\n * 1. Check if the clicked element (`event.target`) has the class \"delete-btn\".\n * 2. If it does, get the `data-id` attribute from the button.\n * 3. Update the global `assignments` array by filtering out the assignment\n * with the matching ID (in-memory only).\n * 4. Call `renderTable()` to refresh the list.\n */\nasync function handleTableClick(event)\n{\n  //Check if the clicked element (`event.target`) has the class \"delete-btn\":\n  if(event.target.className===\"delete-btn\")\n    {\n      //get `data-id`\n      const assignmentId = event.target.dataset.id;\n      //filtering out the assignment with the matching ID:assignments = assignments.filter(a => a.id !==id);\n      const response = await fetch(`/api/assignments?resource=assignments&id=${assignmentId}`, { method: 'DELETE'});\n      const result = await response.json();\n      if (result.success)\n        {\n          assignments = assignments.filter(a => String(a.id) !== assignmentId);\n          //refresh list:\n           renderTable();\n           //alert(result.message);\n        }\n        else\n        {\n           console.error(\"Failed to delete assignment:\", result.error || result.message);\n           alert(\"Error deleting assignment: \" + (result.error || result.message));\n        }\n    }\n    else if (event.target.classList.contains(\"edit-btn\"))\n    {\n    const assignmentId = event.target.dataset.id;\n\n    if (assignmentId) {\n    // Construct the URL to redirect to update.html, passing the ID as a query parameter\n    const redirectUrl = `/assignments/update?id=${assignmentId}`;\n\n    // Perform the redirection\n    window.location.href = redirectUrl;\n    } else {\n    console.error(\"Edit button clicked but no assignment ID found.\");\n    }\n    }\n  else\n  {\n      console.log(`Assignment not found.`);\n  }\n}\n\n/**\n * TODO: Implement the loadAndInitialize function.\n * This function needs to be 'async'.\n * It should:\n * 1. Use `fetch()` to get data from 'assignments.json'.\n * 2. Parse the JSON response and store the result in the global `assignments` array.\n * 3. Call `renderTable()` to populate the table for the first time.\n * 4. Add the 'submit' event listener to `assignmentForm` (calls `handleAddAssignment`).\n * 5. Add the 'click' event listener to `assignmentsTableBody` (calls `handleTableClick`).\n */\nasync function loadAndInitialize()\n{\n  //get data from assignments.json using fetch:const data = await fetch(\"assignments.json\");\n  const response = await fetch(\"/api/assignments?resource=assignments\");\n  //parse:data = await data.json();\n  try\n  {\n   const result = await response.json();\n   if (response.ok)\n    {\n         //store:assignments = result; \n         assignments = Array.isArray(result) ? result : [];\n         //populate:\n          renderTable();\n    }\n   else\n   {\n     console.error(\"Failed to load assignments:\", result.error || response.statusText);\n   }\n  } \n  catch (e) {console.error(\"Error:\", e);}\n  //submit eventListener:\n  assignmentForm.addEventListener(\"submit\", handleAddAssignment);\n  //click eventListener:\n  assignmentTableBody.addEventListener(\"click\", handleTableClick);\n}\n\n// --- Initial Page Load ---\n// Call the main async function to start the application.\nloadAndInitialize();","path":null,"size_bytes":7925,"size_tokens":null},"src/resources/admin.php":{"content":"<?php\nrequire_once __DIR__ . \"/../../config/Config.php\";\n\nif (!isLoggedIn() || !isAdmin()) {\n    header(\"Location: /login\");\n    exit();\n}\n?>\n<!--\n  Admin View - Course Resources\n  This page allows the teacher/admin to manage all course resources (CRUD).\n-->\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    \n    <title>Manage Resources</title>\n\n    <!-- CSS Framework (optional) -->\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/pico-css@1.5.10/dist/pico.min.css\">\n\n    <!-- Custom CSS (optional) -->\n    <style>\n        main {\n            width: 90%;\n            max-width: 900px;\n            margin: auto;\n            padding-top: 20px;\n        }\n        table {\n            width: 100%;\n        }\n        #add-resource {\n            margin-top: 15px;\n        }\n    </style>\n\n    <!-- Link JS -->\n    <link rel=\"stylesheet\" href=\"/src/common/css/background.css\">\n<link rel=\"stylesheet\" href=\"/src/common/css/weekly-admin.css\">\n<script src=\"/src/common/js/background.js\"></script>\n<script src=\"/src/common/js/goBackButton.js\" defer></script>\n<script src=\"/src/resources/admin.js\" defer></script>\n\n</head>\n\n<body>\n<div class=\"bg-animation\">\n    <div class=\"neural-network\" id=\"neuralNetwork\"></div>\n    <div class=\"particles\" id=\"particles\"></div>\n</div>\n\n\n    <header>\n        <button id=\"go-back-btn\"></button>\n        <h1>Manage Course Resources</h1>\n    </header>\n\n    <main>\n\n        <!-- Section 1: Add New Resource Form -->\n        <section>\n            <h2>Add a New Resource</h2>\n\n            <form id=\"resource-form\">\n                <fieldset>\n                    <legend>Resource Details</legend>\n\n                    <label for=\"resource-title\">Title:</label>\n                    <input id=\"resource-title\" type=\"text\" required>\n\n                    <label for=\"resource-description\">Description:</label>\n                    <textarea id=\"resource-description\"></textarea>\n\n                    <label for=\"resource-link\">Link:</label>\n                    <input id=\"resource-link\" type=\"url\" required>\n\n                    <button id=\"add-resource\" type=\"submit\">Add Resource</button>\n                </fieldset>\n            </form>\n        </section>\n\n        <!-- Section 2: Existing Resources List -->\n        <section>\n            <h2>Existing Resources</h2>\n\n            <table id=\"resources-table\">\n                <thead>\n                    <tr>\n                        <th>Title</th>\n                        <th>Description</th>\n                        <th>Actions</th>\n                    </tr>\n                </thead>\n\n                <!-- REQUIRED: tbody must have id=\"resources-tbody\" -->\n                <tbody id=\"resources-tbody\">\n                    <!-- JavaScript will populate the rows here -->\n                </tbody>\n            </table>\n        </section>\n\n    </main>\n\n</body>\n</html>\n","path":null,"size_bytes":2942,"size_tokens":null},"src/resources/list.js":{"content":"/* list.js */\n\nconst listSection = document.querySelector(\"#resource-list-section\");\n\nconst API_URL = \"/api/resources\";\n\nasync function loadResources() {\n    try {\n        const res = await fetch(API_URL);\n\n        const data = await res.json();\n\n        listSection.innerHTML = \"\";\n\n        data.data.forEach(resource => {\n            const article = document.createElement(\"article\");\n\n            article.innerHTML = `\n                <h2>${resource.title}</h2>\n                <p>${resource.description}</p>\n                <a href=\"/resources/details?id=${resource.id}\">\n                    View Resource & Discussion\n                </a>\n            `;\n\n            listSection.appendChild(article);\n        });\n    } catch (err) {\n        console.error(err);\n        listSection.innerHTML = \"<p>Error loading resources</p>\";\n    }\n}\n\nloadResources();\n","path":null,"size_bytes":858,"size_tokens":null},"src/resources/admin.js":{"content":"// ==== Elements ====\nconst resourceForm = document.querySelector(\"#resource-form\");\nconst resourcesTableBody = document.querySelector(\"#resources-tbody\");\n\nconst titleInput = document.querySelector(\"#resource-title\");\nconst descriptionInput = document.querySelector(\"#resource-description\");\nconst linkInput = document.querySelector(\"#resource-link\");\n\n// API BASE URL\nconst API_URL = \"/api/resources\";\n\n// Load all resources from the API\nasync function loadResources() {\n    try {\n        const response = await fetch(API_URL);\n        const data = await response.json();\n\n        resourcesTableBody.innerHTML = \"\";\n\n        data.data.forEach(resource => {\n            const tr = document.createElement(\"tr\");\n\n            tr.innerHTML = `\n                <td>${resource.title}</td>\n                <td>${resource.description}</td>\n                <td>\n                    <button class=\"delete-btn\" data-id=\"${resource.id}\">\n                        Delete\n                    </button>\n                </td>\n            `;\n\n            resourcesTableBody.appendChild(tr);\n        });\n\n    } catch (error) {\n        console.error(\"Error loading resources:\", error);\n    }\n}\n\n// Add a new resource\nasync function addResource(e) {\n    e.preventDefault();\n\n    const payload = {\n        title: titleInput.value,\n        description: descriptionInput.value,\n        link: linkInput.value\n    };\n\n    const response = await fetch(API_URL, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload)\n    });\n\n    const result = await response.json();\n\n    if (result.success) {\n        alert(\"Resource added!\");\n        resourceForm.reset();\n        loadResources(); \n    } else {\n        alert(\"Error: \" + result.message);\n    }\n}\n\n// Delete a resource\nasync function deleteResource(id) {\n    const response = await fetch(API_URL + \"?id=\" + id, {\n        method: \"DELETE\"\n    });\n\n    const result = await response.json();\n\n    if (result.success) {\n        alert(\"Deleted!\");\n        loadResources();\n    } else {\n        alert(\"Error deleting resource\");\n    }\n}\n\nresourceForm.addEventListener(\"submit\", addResource);\n\nresourcesTableBody.addEventListener(\"click\", function (e) {\n    if (e.target.classList.contains(\"delete-btn\")) {\n        const id = e.target.dataset.id;\n        deleteResource(id);\n    }\n});\n\nloadResources();\n","path":null,"size_bytes":2388,"size_tokens":null},"src/assignments/details.js":{"content":"/*\n  Requirement: Populate the assignment detail page and discussion forum.\n\n  Instructions:\n  1. Link this file to `details.html` using:\n     <script src=\"details.js\" defer></script>\n\n  2. In `details.html`, add the following IDs:\n     - To the <h1>: `id=\"assignment-title\"`\n     - To the \"Due\" <p>: `id=\"assignment-due-date\"`\n     - To the \"Description\" <p>: `id=\"assignment-description\"`\n     - To the \"Attached Files\" <ul>: `id=\"assignment-files-list\"`\n     - To the <div> for comments: `id=\"comment-list\"`\n     - To the \"Add a Comment\" <form>: `id=\"comment-form\"`\n     - To the <textarea>: `id=\"new-comment-text\"`\n\n  3. Implement the TODOs below.\n*/\n\n// --- Global Data Store ---\n// These will hold the data related to *this* assignment.\nlet currentAssignmentId = null;\nlet currentComments = [];\n\n// --- Element Selections ---\n// TODO: Select all the elements you added IDs for in step 2.\nconst assignmentTitle = document.getElementById(\"assignment-title\");\nconst assignmentDueDate = document.getElementById(\"assignment-due-date\");\nconst assignmentDescription = document.getElementById(\"assignment-description\");\nconst assignmentFilesList = document.getElementById(\"assignment-files-list\");\nconst commentList = document.getElementById(\"comment-list\");\nconst commentForm = document.getElementById(\"comment-form\");\nconst textArea = document.getElementById(\"new-comment-text\");\n\n// --- Functions ---\n\n/**\n * TODO: Implement the getAssignmentIdFromURL function.\n * It should:\n * 1. Get the query string from `window.location.search`.\n * 2. Use the `URLSearchParams` object to get the value of the 'id' parameter.\n * 3. Return the id.\n */\nfunction getAssignmentIdFromURL()\n{\n  // Get the query string:\n  const params = new URLSearchParams(window.location.search);\n  //Get value of the 'id' parameter:\n  $assignmentId = $_GET['id'] ?? null;\n  const id = params.get('id');\n  //return id and make sure it is number not string:\n  return parseInt(id);\n}\n\n/**\n * TODO: Implement the renderAssignmentDetails function.\n * It takes one assignment object.\n * It should:\n * 1. Set the `textContent` of `assignmentTitle` to the assignment's title.\n * 2. Set the `textContent` of `assignmentDueDate` to \"Due: \" + assignment's dueDate.\n * 3. Set the `textContent` of `assignmentDescription`.\n * 4. Clear `assignmentFilesList` and then create and append\n * `<li><a href=\"#\">...</a></li>` for each file in the assignment's 'files' array.\n */\nfunction renderAssignmentDetails(assignment)\n{\n  //set textContent to assignment details:\n  assignmentTitle.textContent = assignment.title;\n  assignmentDueDate.textContent = \"Due: \" + assignment.due_date;\n  assignmentDescription.textContent = assignment.description;\n  //clear file list:\n  assignmentFilesList.textContent = \"\";\n  // append file with anchor tag and its link for each file of assignment to files array:\n  const filesArray = Array.isArray(assignment.files) ? assignment.files : (assignment.files ? assignment.files.split(',') : []);\n  filesArray.forEach(fileName => \n  {\n    //create list and anchor tags:\n    const list = document.createElement(\"li\");\n    const anchor = document.createElement(\"a\");\n    //set textContnet for each:\n    anchor.textContent = fileName;\n    anchor.href = \"#\";\n    //anchor.target=\"_blank\"; if upload files were real.\n    //append file in list:\n    list.append(anchor);\n    //append list to files:\n    assignmentFilesList.append(list);\n  });\n}\n\n/**\n * TODO: Implement the createCommentArticle function.\n * It takes one comment object {author, text}.\n * It should return an <article> element matching the structure in `details.html`.\n */\nfunction createCommentArticle(comment)\n{\n  // Destructure commnet object for easier access:\n  const { author, text } = comment;\n  //create article,paragraphs, headings for details:\n  const article = document.createElement(\"article\");\n  const commentText = document.createElement(\"p\")\n  const footer = document.createElement(\"footer\");\n  //set content of  details:\n  commentText.textContent = text;\n  footer.textContent = \"By: \" + author;\n  //append div -> comment + footer, article -> div:\n  article.append(commentText,footer);\n  //return article:\n  return article;\n}\n\n/**\n * TODO: Implement the renderComments function.\n * It should:\n * 1. Clear the `commentList`.\n * 2. Loop through the global `currentComments` array.\n * 3. For each comment, call `createCommentArticle()`, and\n * append the resulting <article> to `commentList`.\n */\nfunction renderComments()\n{\n  //clear commentList:\n  commentList.textContent = \"\";\n  //loop through currentComments array:\n  currentComments.forEach(comment =>\n    {\n      //call createCommentArticle for each comment:\n      const newCommentText = createCommentArticle(comment);\n      //append each comment to commentList:\n       commentList.appendChild(newCommentText);\n    });\n    \n}\n\n/**\n * TODO: Implement the handleAddComment function.\n * This is the event handler for the `commentForm` 'submit' event.\n * It should:\n * 1. Prevent the form's default submission.\n * 2. Get the text from `newCommentText.value`.\n * 3. If the text is empty, return.\n * 4. Create a new comment object: { author: 'Student', text: commentText }\n * (For this exercise, 'Student' is a fine hardcoded author).\n * 5. Add the new comment to the global `currentComments` array (in-memory only).\n * 6. Call `renderComments()` to refresh the list.\n * 7. Clear the `newCommentText` textarea.\n */\nfunction handleAddComment(event)\n{\n  //prevent default submission:\n  event.preventDefault();\n  //Get text: Select and get value\n  const commentText = textArea.value;\n  //check if text is empty:\n  if(commentText===\"\"){return;};\n  //create new comment object:\n  const newCommentObject = {author: 'Student', text: commentText};\n  //add newCommentObject to currentComments array:\n  currentComments.push(newCommentObject);\n  //Refresh list:\n  renderComments();\n  //clear textarea:\n  textArea.value = \"\";\n}\n\n/**\n * TODO: Implement an `initializePage` function.\n * This function needs to be 'async'.\n * It should:\n * 1. Get the `currentAssignmentId` by calling `getAssignmentIdFromURL()`.\n * 2. If no ID is found, display an error and stop.\n * 3. `fetch` both 'assignments.json' and 'comments.json' (you can use `Promise.all`).\n * 4. Find the correct assignment from the assignments array using the `currentAssignmentId`.\n * 5. Get the correct comments array from the comments object using the `currentAssignmentId`.\n * Store this in the global `currentComments` variable.\n * 6. If the assignment is found:\n * - Call `renderAssignmentDetails()` with the assignment object.\n * - Call `renderComments()` to show the initial comments.\n * - Add the 'submit' event listener to `commentForm` (calls `handleAddComment`).\n * 7. If the assignment is not found, display an error.\n */\nasync function initializePage()\n{\n  //currentAssignmentId:\n  currentAssignmentId = getAssignmentIdFromURL();\n  //Error handeling:\n  if(currentAssignmentId===null){console.log(\"Error! No ID found.\"); return;};\n  //fetch:\n  try{\n    const [assignmentsResponse, commentsResponse] = await Promise.all([fetch(`/api/assignments?resource=assignments&id=${currentAssignmentId}`), fetch(`/api/assignments?resource=comments&id=${currentAssignmentId}`)]);\n    if (!assignmentsResponse.ok || !commentsResponse.ok) \n      {\n        throw new Error('Failed to fetch data from the API.');\n      }\n    //parse(converting json to object):\n    //const [assignments, comments] = await Promise.all([assignmentsResponse.json(), commentsResponse.json()]);\n    //find correct assignment and comments from the assignments array using the `currentAssignmentId`:\n     // option 1:assignment = assignments[currentAssignmentId];\n     //option2: const assignment= assignments.find(a => a.id === currentAssignmentId);\n     const assignment = await assignmentsResponse.json();\n     const comment= await commentsResponse.json();\n     //Store in comments in `currentComments`\n     //currentComments = comments[currentAssignmentId];\n     currentComments = comment.comments || [];\n     //If assignment is found:\n  if(assignment && typeof assignment === 'object' && Object.keys(assignment).length > 0)\n    {\n      //show asssignment details:\n      renderAssignmentDetails(assignment);\n      //show assignment comments:\n      renderComments(currentComments);\n      //event listener to `commentForm`:\n      commentForm.addEventListener(\"submit\", handleAddComment);\n    }\n    //If assignment not found display an error:\n    else{console.log(\"Error! No assignment found.\");};\n  }\n  catch (error) {\n        console.error(\"Failed:\", error);\n    }\n}\n\n// --- Initial Page Load ---\ninitializePage();","path":null,"size_bytes":8632,"size_tokens":null},"src/resources/details.js":{"content":"/*\n  details.js - Database Connected Version\n*/\n\n// --- Global Data ---\nlet currentResourceId = null;\nlet currentComments = [];\n\n// --- Element Selectors ---\nconst resourceTitle = document.querySelector(\"#resource-title\");\nconst resourceDescription = document.querySelector(\"#resource-description\");\nconst resourceLink = document.querySelector(\"#resource-link\");\n\nconst commentList = document.querySelector(\"#comment-list\");\nconst commentForm = document.querySelector(\"#comment-form\");\nconst newComment = document.querySelector(\"#new-comment-text\");\n\n// API URL\nconst API_URL = \"/api/resources\";\n\nfunction getResourceIdFromURL() {\n  const params = new URLSearchParams(window.location.search);\n  return params.get(\"id\");\n}\n\nfunction renderResourceDetails(resource) {\n  resourceTitle.textContent = resource.title;\n  resourceDescription.textContent = resource.description;\n  resourceLink.href = resource.external_url;\n}\n\nfunction createCommentArticle(comment) {\n  const article = document.createElement(\"article\");\n  article.innerHTML = `\n    <p>${comment.comment_text}</p>\n    <footer>Posted by: User ${comment.user_id}</footer>\n  `;\n  return article;\n}\n\nfunction renderComments() {\n  commentList.innerHTML = \"\";\n  currentComments.forEach((c) => {\n    commentList.appendChild(createCommentArticle(c));\n  });\n}\n\nasync function handleAddComment(event) {\n  event.preventDefault();\n\n  const text = newComment.value.trim();\n  if (!text) return;\n\n  const bodyData = {\n    resource_id: currentResourceId,\n    text: text\n  };\n\n  const response = await fetch(`${API_URL}?action=comment`, {\n    method: \"POST\",\n    headers: {\"Content-Type\": \"application/json\"},\n    body: JSON.stringify(bodyData)\n  });\n\n  const result = await response.json();\n\n  if (result.success) {\n    currentComments.push({\n      comment_text: text,\n      user_id: \"You\"\n    });\n\n    renderComments();\n    newComment.value = \"\";\n  } else {\n    alert(\"Error posting comment\");\n  }\n}\n\nasync function initializePage() {\n  currentResourceId = getResourceIdFromURL();\n\n  if (!currentResourceId) {\n    resourceTitle.textContent = \"Invalid resource ID.\";\n    return;\n  }\n\n  try {\n    const resourceRes = await fetch(`${API_URL}?id=${currentResourceId}`);\n    const resourceData = await resourceRes.json();\n\n    if (!resourceData.success) {\n      resourceTitle.textContent = \"Resource not found.\";\n      return;\n    }\n\n    renderResourceDetails(resourceData.data);\n\n    const commentsRes = await fetch(\n      `${API_URL}?action=comments&resource_id=${currentResourceId}`\n    );\n    const commentsData = await commentsRes.json();\n\n    currentComments = commentsData.data || [];\n    renderComments();\n\n    commentForm.addEventListener(\"submit\", handleAddComment);\n\n  } catch (error) {\n    console.error(error);\n    resourceTitle.textContent = \"Error loading resource.\";\n  }\n}\n\ninitializePage();\n\n","path":null,"size_bytes":2846,"size_tokens":null},"src/weekly/details.js":{"content":"\n\n\nlet currentWeekId = null;\nlet currentComments = [];\nlet weekData = null;\n\n\nconst weekTitle = document.getElementById(\"week-title\");\nconst weekStartDate = document.getElementById(\"week-start-date\");\nconst weekDescription = document.getElementById(\"week-description\");\nconst weekLinksList = document.getElementById(\"week-links-list\");\nconst commentList = document.getElementById(\"comment-list\");\nconst commentForm = document.getElementById(\"comment-form\");\nconst newCommentText = document.getElementById(\"new-comment-text\");\n\n\nconst cache = {\n    week: null,\n    comments: null,\n    timestamp: 0,\n    CACHE_DURATION: 30000,\n\n    setWeek(data) {\n        this.week = data;\n        this.timestamp = Date.now();\n    },\n\n    getWeek() {\n        if (this.week && Date.now() - this.timestamp < this.CACHE_DURATION) {\n            return this.week;\n        }\n        return null;\n    },\n\n    clear() {\n        this.week = null;\n        this.comments = null;\n        this.timestamp = 0;\n    }\n};\n\n\nfunction getWeekIdFromURL() {\n    return new URLSearchParams(window.location.search).get(\"id\");\n}\n\nfunction formatDateTime(date) {\n    const d = new Date(date);\n    return `${d.getMonth() + 1}/${d.getDate()} ${d.getHours()}:${d.getMinutes().toString().padStart(2, '0')}`;\n}\n\nfunction getInitials(name = \"\") {\n    if (!name) return \"U\";\n    const parts = name.trim().split(\" \");\n    return ((parts[0]?.[0] || \"\") + (parts[1]?.[0] || \"\")).toUpperCase();\n}\n\nfunction escapeHtml(text) {\n    const div = document.createElement(\"div\");\n    div.textContent = text;\n    return div.innerHTML;\n}\n\n\nasync function deleteComment(id) {\n    try {\n        const res = await fetch(`/api/weekly?action=delete_comment&id=${id}`, {\n            method: \"DELETE\"\n        });\n        const data = await res.json();\n        return data.success;\n    } catch (e) {\n        console.error(\"Delete API failed:\", e);\n        return false;\n    }\n}\n\n\nfunction renderWeekDetails(week) {\n    requestAnimationFrame(() => {\n        weekTitle.textContent = week.title || \"\";\n        weekStartDate.textContent = week.start_date ? `Starts on: ${week.start_date}` : \"\";\n        weekDescription.textContent = week.description || \"\";\n\n        if (Array.isArray(week.links) && week.links.length > 0) {\n            const fragment = document.createDocumentFragment();\n            week.links.forEach(link => {\n                const li = document.createElement(\"li\");\n                const a = document.createElement(\"a\");\n                a.href = link;\n                a.target = \"_blank\";\n                a.textContent = link.length > 50 ? link.substring(0, 50) + \"...\" : link;\n                li.appendChild(a);\n                fragment.appendChild(li);\n            });\n            weekLinksList.innerHTML = \"\";\n            weekLinksList.appendChild(fragment);\n        } else {\n            weekLinksList.innerHTML = \"\";\n        }\n    });\n}\n\n\nfunction createReplyHTML(reply) {\n    return `\n        <div class=\"reply\">\n           <div class=\"reply-header\">\n    <div class=\"reply-header-left\">\n        <div class=\"reply-icon\">${getInitials(reply.username)}</div>\n        <div class=\"reply-author\">${escapeHtml(reply.username)}</div>\n        <div class=\"reply-timestamp\">${formatDateTime(reply.created_at)}</div>\n    </div>\n\n    ${window.IS_ADMIN ? `<button class=\"delete-reply-btn\" data-id=\"${reply.id}\"></button>` : \"\"}\n</div>\n\n            <p>${escapeHtml(reply.comment_text)}</p>\n        </div>\n    `;\n}\n\n\nfunction createCommentElement(comment) {\n    const article = document.createElement(\"article\");\n    article.className = \"comment\";\n    article.dataset.commentId = comment.id;\n\n    article.innerHTML = `\n<div class=\"comment-header\">\n    <div class=\"comment-header-left\">\n        <div class=\"comment-icon\">${getInitials(comment.username)}</div>\n        <div class=\"comment-author\">${escapeHtml(comment.username)}</div>\n        <div class=\"comment-timestamp\">${formatDateTime(comment.created_at)}</div>\n    </div>\n\n    ${window.IS_ADMIN ? `<button class=\"delete-comment-btn\" data-id=\"${comment.id}\"></button>` : \"\"}\n</div>\n\n\n        <p>${escapeHtml(comment.comment_text)}</p>\n\n        <div class=\"nested-replies\" ${comment.replies?.length ? \"\" : 'style=\"display:none\"'} >\n            ${comment.replies?.map(r => createReplyHTML(r)).join(\"\") || \"\"}\n        </div>\n\n        <form class=\"reply-form\" data-comment-id=\"${comment.id}\">\n            <textarea class=\"reply-textarea\" rows=\"2\" placeholder=\"Write a reply...\" required></textarea>\n            <button type=\"submit\" class=\"reply-btn\">Send</button>\n        </form>\n    `;\n\n    const replyForm = article.querySelector(\".reply-form\");\n    replyForm.addEventListener(\"submit\", (e) => handleReplySubmit(e, comment.id));\n\n    return article;\n}\n\n\nfunction renderComments() {\n    commentList.innerHTML = \"\";\n\n    if (!currentComments.length) {\n        commentList.innerHTML = `<p style=\"text-align:center; opacity:0.7\">No comments yet.</p>`;\n        return;\n    }\n\n    const fragment = document.createDocumentFragment();\n    currentComments.forEach(c => fragment.appendChild(createCommentElement(c)));\n    commentList.appendChild(fragment);\n}\n\n\nasync function handleReplySubmit(e, parentCommentId) {\n    e.preventDefault();\n    const form = e.target;\n    const textArea = form.querySelector(\".reply-textarea\");\n    const text = textArea.value.trim();\n\n    if (!text) return;\n\n    const payload = {\n        week_id: Number(currentWeekId),\n        user_id: Number(window.LOGGED_IN_USER_ID),\n        comment_text: text,\n        parent_comment_id: parentCommentId\n    };\n\n    const res = await fetch(\"/api/weekly?action=weekly_comments\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload)\n    });\n\n    const data = await res.json();\n    if (data.success) {\n        textArea.value = \"\";\n        await loadComments();\n    }\n}\n\n\nasync function handleAddComment(e) {\n    e.preventDefault();\n\n    const text = newCommentText.value.trim();\n    if (!text) return;\n\n    const payload = {\n        week_id: Number(currentWeekId),\n        user_id: Number(window.LOGGED_IN_USER_ID),\n        comment_text: text\n    };\n\n    const res = await fetch(\"/api/weekly?action=weekly_comments\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload)\n    });\n\n    const data = await res.json();\n    if (data.success) {\n        newCommentText.value = \"\";\n        await loadComments();\n    }\n}\n\n\nasync function loadWeek() {\n    const cached = cache.getWeek();\n    if (cached) {\n        weekData = cached;\n        renderWeekDetails(weekData);\n        return;\n    }\n\n    const res = await fetch(`/api/weekly?id=${currentWeekId}`);\n    const data = await res.json();\n\n    if (data.success) {\n        weekData = data.data;\n        cache.setWeek(weekData);\n        renderWeekDetails(weekData);\n    }\n}\n\n\nasync function loadComments() {\n    const res = await fetch(`/api/weekly?resource=weekly_comments&week_id=${currentWeekId}`);\n    const data = await res.json();\n\n    if (!data.success) {\n        currentComments = [];\n        renderComments();\n        return;\n    }\n\n    const flat = data.data;\n    const map = new Map();\n    flat.forEach(c => {\n        c.replies = [];\n        map.set(c.id, c);\n    });\n\n    const roots = [];\n    flat.forEach(c => {\n        if (c.parent_comment_id) {\n            map.get(c.parent_comment_id)?.replies.push(c);\n        } else roots.push(c);\n    });\n\n    currentComments = roots;\n    renderComments();\n}\n\n\ndocument.addEventListener(\"click\", async (e) => {\n    if (e.target.classList.contains(\"delete-comment-btn\")) {\n        const id = e.target.dataset.id;\n        if (confirm(\"Delete this comment?\")) {\n            if (await deleteComment(id)) loadComments();\n        }\n    }\n\n    if (e.target.classList.contains(\"delete-reply-btn\")) {\n        const id = e.target.dataset.id;\n        if (confirm(\"Delete this reply?\")) {\n            if (await deleteComment(id)) loadComments();\n        }\n    }\n});\n\n\nasync function initializePage() {\n    currentWeekId = getWeekIdFromURL();\n    if (!currentWeekId) {\n        weekTitle.textContent = \"Week not found\";\n        return;\n    }\n\n    await Promise.all([loadWeek(), loadComments()]);\n\n    if (!commentForm._attached) {\n        commentForm.addEventListener(\"submit\", handleAddComment);\n        commentForm._attached = true;\n    }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    const btn = document.getElementById(\"go-back-btn\");\n    if (!btn) return;\n\n    btn.addEventListener(\"click\", () => {\n        window.location.href = window.BACK_URL;\n    });\n});\n\n\n\ndocument.addEventListener(\"DOMContentLoaded\", initializePage);\n","path":null,"size_bytes":8714,"size_tokens":null},"src/auth/logout.php":{"content":"<?php\nif (session_status() === PHP_SESSION_NONE) {\n    session_start();\n}\n\n// Unset all session variables\n$_SESSION = array();\n\n// Delete session cookie\nif (ini_get(\"session.use_cookies\")) {\n    $params = session_get_cookie_params();\n    setcookie(session_name(), '', time() - 42000,\n        $params[\"path\"], $params[\"domain\"],\n        $params[\"secure\"], $params[\"httponly\"]\n    );\n}\n\n// Destroy the session\nsession_destroy();\n\n// Delete other cookies\nsetcookie('user_id', '', time() - 3600, \"/\");\nsetcookie('username', '', time() - 3600, \"/\");\nsetcookie('role', '', time() - 3600, \"/\");\n\n// Redirect to login page\nheader(\"Location: /login\");\nexit();\n?>","path":null,"size_bytes":653,"size_tokens":null},"src/errors/404.php":{"content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <title>404 - Page Not Found</title>\n\n    <!-- FIXED PATHS -->\n    <link rel=\"stylesheet\" href=\"/src/common/css/background.css\">\n    <script src=\"/src/common/js/background.js\" defer></script>\n\n    <style>\n        :root {\n            --dark: #0a0a0f;\n            --darker: #050508;\n            --primary: #00ffff;\n            --secondary: #ff00ff;\n            --accent: #7c3aed;\n        }\n\n        body {\n            margin: 0;\n            padding: 0;\n            min-height: 100vh;\n            background: #0a0a0f;\n            color: #ffffff;\n            font-family: Arial, sans-serif;\n        }\n\n        .content {\n            position: relative;\n            z-index: 10;\n            text-align: center;\n            padding-top: 100px;\n        }\n\n        h1 {\n            font-size: 4rem;\n            color: #ff4d4d;\n        }\n\n        p {\n            font-size: 1.2rem;\n            color: #ccc;\n        }\n\n        a {\n            margin-top: 20px;\n            display: inline-block;\n            padding: 12px 22px;\n            background: #00ffff;\n            color: #000;\n            font-weight: bold;\n            text-decoration: none;\n            border-radius: 8px;\n            transition: 0.2s;\n        }\n\n        a:hover {\n            background: #7c3aed;\n            color: #fff;\n        }\n    </style>\n</head>\n\n<body>\n    <div class=\"bg-animation\">\n        <div class=\"neural-network\" id=\"neuralNetwork\"></div>\n        <div class=\"particles\" id=\"particles\"></div>\n    </div>\n\n    <div class=\"content\">\n        <h1>404</h1>\n        <p>Oops! The page you are looking for does not exist.</p>\n        <a href=\"/login\">Go Back Home</a>\n    </div>\n\n</body>\n\n</html>\n","path":null,"size_bytes":1743,"size_tokens":null},"src/auth/api/index.php":{"content":"<?php\n/**\n * Authentication Handler for Login Form\n * \n * This PHP script handles user authentication via POST requests from the Fetch API.\n * It validates credentials against a MySQL database using PDO,\n * creates sessions, and returns JSON responses.\n */\n\n// --- Session Management ---\n// TODO: Start a PHP session using session_start()\n// This must be called before any output is sent to the browser\n// Sessions allow us to store user data across multiple pages\nsession_start();\n\n// --- Set Response Headers ---\n// TODO: Set the Content-Type header to 'application/json'\n// This tells the browser that we're sending JSON data back\nheader('Content-Type: application/json');\n\n// TODO: (Optional) Set CORS headers if your frontend and backend are on different domains\n// You'll need headers for Access-Control-Allow-Origin, Methods, and Headers\nheader('Access-Control-Allow-Origin: *');\nheader('Access-Control-Allow-Methods: POST, OPTIONS');\nheader('Access-Control-Allow-Headers: Content-Type');\n\n// --- Check Request Method ---\n// TODO: Verify that the request method is POST\n// Use the $_SERVER superglobal to check the REQUEST_METHOD\n// If the request is not POST, return an error response and exit\nif ($_SERVER['REQUEST_METHOD'] !== 'POST') {\n    echo json_encode(['success' => false, 'message' => 'Method not allowed']);\n    exit;\n}\n\n// --- Get POST Data ---\n// TODO: Retrieve the raw POST data\n// The Fetch API sends JSON data in the request body\n// Use file_get_contents with 'php://input' to read the raw request body\n$input = file_get_contents('php://input');\n\n// TODO: Decode the JSON data into a PHP associative array\n// Use json_decode with the second parameter set to true\n$data = json_decode($input, true);\n\n// TODO: Extract the email and password from the decoded data\n// Check if both 'email' and 'password' keys exist in the array\n// If either is missing, return an error response and exit\nif (!isset($data['email']) || !isset($data['password'])) {\n    echo json_encode(['success' => false, 'message' => 'Email and password are required']);\n    exit;\n}\n\n// TODO: Store the email and password in variables\n// Trim any whitespace from the email\n$email = trim($data['email']);\n$password = $data['password'];\n\n// --- Server-Side Validation (Optional but Recommended) ---\n// TODO: Validate the email format on the server side\n// Use the appropriate filter function for email validation\n// If invalid, return an error response and exit\nif (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n    echo json_encode(['success' => false, 'message' => 'Invalid email format']);\n    exit;\n}\n\n// TODO: Validate the password length (minimum 8 characters)\n// If invalid, return an error response and exit\nif (strlen($password) < 8) {\n    echo json_encode(['success' => false, 'message' => 'Password must be at least 8 characters']);\n    exit;\n}\n\n// --- Database Connection ---\n// Include the database connection from Config.php\nrequire_once __DIR__ . '/../../config/Config.php';\n$db = $conn;\n// TODO: Wrap database operations in a try-catch block to handle PDO exceptions\n// This ensures you can return a proper JSON error response if something goes wrong\ntry {\n\n    // --- Prepare SQL Query ---\n    $sql = \"SELECT id, username, email, password_hash, role, student_id FROM users WHERE email = :email AND is_active = true\";\n    $stmt = $db->prepare($sql);\n    $stmt->execute(['email' => $email]);\n    $user = $stmt->fetch(PDO::FETCH_ASSOC);\n\n    // --- Verify User Exists and Password Matches ---\n    if (!$user) {\n        echo json_encode(['success' => false, 'message' => 'Invalid email or password']);\n        exit;\n    }\n\n    if (!password_verify($password, $user['password_hash'])) {\n        echo json_encode(['success' => false, 'message' => 'Invalid email or password']);\n        exit;\n    }\n\n    // --- Handle Successful Authentication ---\n    $_SESSION['user_id'] = $user['id'];\n    $_SESSION['username'] = $user['username'];\n    $_SESSION['role'] = $user['role'];\n    $_SESSION['logged_in'] = true;\n\n    setcookie('user_id', $user['id'], time() + (86400 * 30), \"/\");\n    setcookie('username', $user['username'], time() + (86400 * 30), \"/\");\n    setcookie('role', $user['role'], time() + (86400 * 30), \"/\");\n    \n    $updateStmt = $db->prepare(\"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?\");\n    $updateStmt->execute([$user['id']]);\n\n    $response = [\n        'success' => true,\n        'message' => 'Login successful',\n        'user' => [\n            'id' => $user['id'],\n            'username' => $user['username'],\n            'email' => $user['email'],\n            'role' => $user['role']\n        ],\n        'redirect' => '/dashboard'\n    ];\n\n    echo json_encode($response);\n    exit;\n\n} catch (PDOException $e) {\n    error_log(\"Database error: \" . $e->getMessage());\n    echo json_encode(['success' => false, 'message' => 'Database error occurred']);\n    exit;\n}\n?>\n<?php\n// Unreachable code removed\nif (false) {\n    // --- Handle Failed Authentication ---\n        // - 'success' => false\n        // - 'message' => 'Invalid email or password'\n        //\n        // SECURITY NOTE: Don't specify whether email or password was wrong\n        // This prevents attackers from enumerating valid email addresses\n        $errorResponse = [\n        'success' => false,\n        'message' => 'Invalid email or password'\n    ];\n\n        // TODO: Encode the error response as JSON and echo it\n        echo json_encode($errorResponse);\n        \n        // TODO: Exit the script\n        exit;\n\n    // TODO: Catch PDO exceptions in the catch block\n    // Catch PDOException type\n\n    } catch (PDOException $e) {\n    // TODO: Log the error for debugging\n    // Use error_log() to write the error message to the server error log\n    error_log(\"Database error: \" . $e->getMessage());\n    \n    // TODO: Return a generic error message to the client\n    // DON'T expose database details to the user for security reasons\n    // Return a JSON response with success false and a generic message\n    echo json_encode(['success' => false, 'message' => 'Database error occurred']);\n\n    // TODO: Exit the script\n    exit;\n}\n\n// --- End of Script ---\n\n?>\n","path":null,"size_bytes":6151,"size_tokens":null},"src/admin/api/index.php":{"content":"<?php\n/**\n * Student Management API\n * \n * This is a RESTful API that handles all CRUD operations for student management.\n * It uses PDO to interact with a MySQL database.\n * \n * Database Table Structure (for reference):\n * Table: students\n * Columns:\n *   - id (INT, PRIMARY KEY, AUTO_INCREMENT)\n *   - student_id (VARCHAR(50), UNIQUE) - The student's university ID\n *   - name (VARCHAR(100))\n *   - email (VARCHAR(100), UNIQUE)\n *   - password (VARCHAR(255)) - Hashed password\n *   - created_at (TIMESTAMP)\n * \n * HTTP Methods Supported:\n *   - GET: Retrieve student(s)\n *   - POST: Create a new student OR change password\n *   - PUT: Update an existing student\n *   - DELETE: Delete a student\n * \n * Response Format: JSON\n */\n\n// TODO: Set headers for JSON response and CORS\n// Set Content-Type to application/json\n// Allow cross-origin requests (CORS) if needed\n// Allow specific HTTP methods (GET, POST, PUT, DELETE, OPTIONS)\n// Allow specific headers (Content-Type, Authorization)\nheader('Content-Type: application/json');\nheader('Access-Control-Allow-Origin: *');\nheader('Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS');\nheader('Access-Control-Allow-Headers: Content-Type, Authorization');\n\n// TODO: Handle preflight OPTIONS request\n// If the request method is OPTIONS, return 200 status and exit\nif ($_SERVER['REQUEST_METHOD'] === 'OPTIONS') {\n    http_response_code(200);\n    exit;\n}\n\n// Include the database connection\nrequire_once __DIR__ . '/../../../config/Config.php';\n\n// Get the PDO database connection\n$db = $conn;\n\n// TODO: Get the HTTP request method\n// Use $_SERVER['REQUEST_METHOD']\n$method = $_SERVER['REQUEST_METHOD'];\n\n// TODO: Get the request body for POST and PUT requests\n// Use file_get_contents('php://input') to get raw POST data\n// Decode JSON data using json_decode()\n$input = file_get_contents('php://input');\n$data = json_decode($input, true);\n\n\n// TODO: Parse query parameters for filtering and searching\n$queryParams = $_GET;\n\n/**\n * Function: Get all students or search for specific students\n * Method: GET\n * \n * Query Parameters:\n *   - search: Optional search term to filter by name, student_id, or email\n *   - sort: Optional field to sort by (name, student_id, email)\n *   - order: Optional sort order (asc or desc)\n */\nfunction getStudents($db) {\n     global $queryParams;\n    // TODO: Check if search parameter exists\n    // If yes, prepare SQL query with WHERE clause using LIKE\n    // Search should work on name, student_id, and email fields\n    $search = isset($queryParams['search']) ? $queryParams['search'] : null;\n    $sql = \"SELECT student_id, username as name, email, full_name, created_at FROM users WHERE role = 'student'\";\n    \n    if ($search) {\n        $sql .= \" AND (username LIKE :search OR full_name LIKE :search OR email LIKE :search OR student_id LIKE :search)\";\n    }\n    // TODO: Check if sort and order parameters exist\n    // If yes, add ORDER BY clause to the query\n    // Validate sort field to prevent SQL injection (only allow: name, student_id, email)\n    // Validate order to prevent SQL injection (only allow: asc, desc)\n    $sort = isset($queryParams['sort']) ? $queryParams['sort'] : null;\n    $order = isset($queryParams['order']) ? $queryParams['order'] : 'asc';\n    \n    $allowedSort = ['name', 'student_id', 'email', 'full_name', 'created_at'];\n    $allowedOrder = ['asc', 'desc'];\n    \n    if ($sort && in_array($sort, $allowedSort) && in_array(strtolower($order), $allowedOrder)) {\n        $sql .= \" ORDER BY $sort $order\";\n    }\n    // TODO: Prepare the SQL query using PDO\n    // Note: Do NOT select the password field\n    $stmt = $db->prepare($sql);\n    // TODO: Bind parameters if using search\n    if ($search) {\n        $searchTerm = \"%$search%\";\n        $stmt->bindParam(':search', $searchTerm);\n    }\n    // TODO: Execute the query\n    $stmt->execute();\n    // TODO: Fetch all results as an associative array\n    $students = $stmt->fetchAll(PDO::FETCH_ASSOC);\n    \n    // TODO: Return JSON response with success status and data\n    sendResponse(['success' => true, 'data' => $students]);\n}\n\n\n/**\n * Function: Get a single student by student_id\n * Method: GET\n * \n * Query Parameters:\n *   - student_id: The student's university ID\n */\nfunction getStudentById($db, $studentId) {\n    // TODO: Prepare SQL query to select student by student_id\n    $sql = \"SELECT student_id, username as name, email, full_name, created_at FROM users WHERE student_id = :student_id AND role = 'student'\";\n    $stmt = $db->prepare($sql);\n    // TODO: Bind the student_id parameter\n    $stmt->bindParam(':student_id', $studentId);\n    // TODO: Execute the query\n    $stmt->execute();\n    \n    // TODO: Fetch the result\n    $student = $stmt->fetch(PDO::FETCH_ASSOC);\n    \n    // TODO: Check if student exists\n    // If yes, return success response with student data\n    // If no, return error response with 404 status\n    if ($student) {\n        sendResponse(['success' => true, 'data' => $student]);\n    } else {\n        sendResponse(['success' => false, 'message' => 'Student not found'], 404);\n    }\n}\n\n\n/**\n * Function: Create a new student\n * Method: POST\n * \n * Required JSON Body:\n *   - student_id: The student's university ID (must be unique)\n *   - name: Student's full name\n *   - email: Student's email (must be unique)\n *   - password: Default password (will be hashed)\n */\nfunction createStudent($db, $data) {\n    // TODO: Validate required fields\n    // Check if student_id, name, email, and password are provided\n    // If any field is missing, return error response with 400 status\n     if (!isset($data['student_id']) || !isset($data['name']) || !isset($data['email']) || !isset($data['password'])) {\n        sendResponse(['success' => false, 'message' => 'Missing required fields'], 400);\n        return;\n    }\n    // TODO: Sanitize input data\n    // Trim whitespace from all fields\n    // Validate email format using filter_var()\n    $student_id = trim($data['student_id']);\n    $name = trim($data['name']);\n    $email = trim($data['email']);\n    $password = $data['password'];\n    \n    if (!validateEmail($email)) {\n        sendResponse(['success' => false, 'message' => 'Invalid email format'], 400);\n        return;\n    }\n    // TODO: Check if student_id or email already exists\n    // Prepare and execute a SELECT query to check for duplicates\n    // If duplicate found, return error response with 409 status (Conflict)\n     $checkStmt = $db->prepare(\"SELECT student_id FROM users WHERE student_id = :student_id OR email = :email\");\n    $checkStmt->execute([':student_id' => $student_id, ':email' => $email]);\n    \n    if ($checkStmt->fetch()) {\n        sendResponse(['success' => false, 'message' => 'Student ID or email already exists'], 409);\n        return;\n    }\n    // TODO: Hash the password\n    // Use password_hash() with PASSWORD_DEFAULT\n    $hashed_password = password_hash($password, PASSWORD_DEFAULT);\n    // TODO: Prepare INSERT query\n    $sql = \"INSERT INTO users (student_id, username, password, email, role, full_name) VALUES (:student_id, :username, :password, :email, 'student', :full_name)\";\n    $stmt = $db->prepare($sql);\n    \n    // TODO: Bind parameters\n    // Bind student_id, name, email, and hashed password\n    $stmt->bindParam(':student_id', $student_id);\n    $stmt->bindParam(':username', $name);\n    $stmt->bindParam(':password', $hashed_password);\n    $stmt->bindParam(':email', $email);\n    $stmt->bindParam(':full_name', $name);\n    // TODO: Execute the query\n    if ($stmt->execute()) {\n        sendResponse(['success' => true, 'message' => 'Student created successfully'], 201);\n    } else {\n        sendResponse(['success' => false, 'message' => 'Failed to create student'], 500);\n    }\n    \n    // TODO: Check if insert was successful\n    // If yes, return success response with 201 status (Created)\n    // If no, return error response with 500 status\n}\n\n\n/**\n * Function: Update an existing student\n * Method: PUT\n * \n * Required JSON Body:\n *   - student_id: The student's university ID (to identify which student to update)\n *   - name: Updated student name (optional)\n *   - email: Updated student email (optional)\n */\nfunction updateStudent($db, $data) {\n    // TODO: Validate that student_id is provided\n    // If not, return error response with 400 status\n     if (!isset($data['student_id'])) {\n        sendResponse(['success' => false, 'message' => 'Student ID is required'], 400);\n        return;\n    }\n    $student_id = trim($data['student_id']);\n    // TODO: Check if student exists\n    // Prepare and execute a SELECT query to find the student\n    // If not found, return error response with 404 status\n    $checkStmt = $db->prepare(\"SELECT student_id FROM users WHERE student_id = :student_id AND role = 'student'\");\n    $checkStmt->execute([':student_id' => $student_id]);\n    \n    if (!$checkStmt->fetch()) {\n        sendResponse(['success' => false, 'message' => 'Student not found'], 404);\n        return;\n    }\n    // TODO: Build UPDATE query dynamically based on provided fields\n    // Only update fields that are provided in the request\n    $updates = [];\n    $params = [':student_id' => $student_id];\n    \n    if (isset($data['name'])) {\n        $updates[] = \"username = :username\";\n        $updates[] = \"full_name = :full_name\";\n        $params[':username'] = trim($data['name']);\n        $params[':full_name'] = trim($data['name']);\n    }\n    \n    if (isset($data['email'])) {\n        $email = trim($data['email']);\n    // TODO: If email is being updated, check if new email already exists\n    // Prepare and execute a SELECT query\n    // Exclude the current student from the check\n    // If duplicate found, return error response with 409 status\n     $emailCheck = $db->prepare(\"SELECT student_id FROM users WHERE email = :email AND student_id != :student_id\");\n        $emailCheck->execute([':email' => $email, ':student_id' => $student_id]);\n        \n        if ($emailCheck->fetch()) {\n            sendResponse(['success' => false, 'message' => 'Email already exists'], 409);\n            return;\n        }\n        \n        $updates[] = \"email = :email\";\n        $params[':email'] = $email;\n    }\n    \n    if (empty($updates)) {\n        sendResponse(['success' => false, 'message' => 'No fields to update'], 400);\n        return;\n    }\n    \n    $sql = \"UPDATE users SET \" . implode(', ', $updates) . \" WHERE student_id = :student_id\";\n    $stmt = $db->prepare($sql);\n    // TODO: Bind parameters dynamically\n    // Bind only the parameters that are being updated\n    foreach ($params as $key => $value) {\n        $stmt->bindValue($key, $value);\n    }\n    // TODO: Execute the query\n    $stmt->execute();\n\n    // TODO: Check if update was successful\n    // If yes, return success response\n    // If no, return error response with 500 status\n     if ($stmt->rowCount() > 0) {\n        sendResponse(['success' => true, 'message' => 'Student updated successfully']);\n    } else {\n        sendResponse(['success' => false, 'message' => 'Failed to update student'], 500);\n    }\n}\n\n\n/**\n * Function: Delete a student\n * Method: DELETE\n * \n * Query Parameters or JSON Body:\n *   - student_id: The student's university ID\n */\nfunction deleteStudent($db, $studentId) {\n    // TODO: Validate that student_id is provided\n    // If not, return error response with 400 status\n     if (!$studentId) {\n        sendResponse(['success' => false, 'message' => 'Student ID is required'], 400);\n        return;\n    }\n    // TODO: Check if student exists\n    // Prepare and execute a SELECT query\n    // If not found, return error response with 404 status\n    $checkStmt = $db->prepare(\"SELECT student_id FROM users WHERE student_id = :student_id AND role = 'student'\");\n    $checkStmt->execute([':student_id' => $studentId]);\n    \n    if (!$checkStmt->fetch()) {\n        sendResponse(['success' => false, 'message' => 'Student not found'], 404);\n        return;\n    }\n    // TODO: Prepare DELETE query\n     $stmt = $db->prepare(\"DELETE FROM users WHERE student_id = :student_id AND role = 'student'\");\n    // TODO: Bind the student_id parameter\n    $stmt->bindValue(':student_id', $studentId);\n    \n    // TODO: Execute the query\n    $stmt->execute();\n    // TODO: Check if delete was successful\n    // If yes, return success response\n    // If no, return error response with 500 status\n        if ($stmt->rowCount() > 0) {\n            sendResponse(['success' => true, 'message' => 'Student deleted successfully']);\n        } else {\n            sendResponse(['success' => false, 'message' => 'Failed to delete student'], 500);\n        }\n}\n\n\n/**\n * Function: Change password\n * Method: POST with action=change_password\n * \n * Required JSON Body:\n *   - student_id: The student's university ID (identifies whose password to change)\n *   - current_password: The student's current password\n *   - new_password: The new password to set\n */\nfunction changePassword($db, $data) {\n    // TODO: Validate required fields\n    // Check if student_id, current_password, and new_password are provided\n    // If any field is missing, return error response with 400 status\n    if (!isset($data['student_id']) || !isset($data['current_password']) || !isset($data['new_password'])) {\n        sendResponse(['success' => false, 'message' => 'Missing required fields'], 400);\n        return;\n    }\n    // TODO: Validate new password strength\n    // Check minimum length (at least 8 characters)\n    // If validation fails, return error response with 400 status\n    if (strlen($data['new_password']) < 8) {\n        sendResponse(['success' => false, 'message' => 'New password must be at least 8 characters'], 400);\n        return;\n    }\n     $student_id = $data['student_id'];\n    $current_password = $data['current_password'];\n    $new_password = $data['new_password'];\n    // TODO: Retrieve current password hash from database\n    // Prepare and execute SELECT query to get password\n    $stmt = $db->prepare(\"SELECT password FROM users WHERE student_id = :student_id\");\n    $stmt->execute([':student_id' => $student_id]);\n    $user = $stmt->fetch(PDO::FETCH_ASSOC);\n    \n    if (!$user) {\n        sendResponse(['success' => false, 'message' => 'Student not found'], 404);\n        return;\n    }\n    // TODO: Verify current password\n    // Use password_verify() to check if current_password matches the hash\n    // If verification fails, return error response with 401 status (Unauthorized)\n    if (!password_verify($current_password, $user['password'])) {\n        sendResponse(['success' => false, 'message' => 'Current password is incorrect'], 401);\n        return;\n    }\n    // TODO: Hash the new password\n    // Use password_hash() with PASSWORD_DEFAULT\n    $hashed_password = password_hash($new_password, PASSWORD_DEFAULT);\n    // TODO: Update password in database\n    // Prepare UPDATE query\n    $updateStmt = $db->prepare(\"UPDATE users SET password = :password WHERE student_id = :student_id\");\n    // TODO: Bind parameters and execute\n    $updateStmt->execute([':password' => $hashed_password, ':student_id' => $student_id]);\n\n    // TODO: Check if update was successful\n    // If yes, return success response\n    // If no, return error response with 500 status\n    if ($updateStmt->rowCount() > 0) {\n        sendResponse(['success' => true, 'message' => 'Password changed successfully']);\n    } else {\n        sendResponse(['success' => false, 'message' => 'Failed to change password'], 500);\n    }\n}\n\n\n\n// ============================================================================\n// MAIN REQUEST ROUTER\n// ============================================================================\n\ntry {\n    // TODO: Route the request based on HTTP method\n    \n    if ($method === 'GET') {\n        // TODO: Check if student_id is provided in query parameters\n        // If yes, call getStudentById()\n        // If no, call getStudents() to get all students (with optional search/sort)\n         if (isset($queryParams['student_id'])) {\n            getStudentById($db, $queryParams['student_id']);\n        } else {\n            getStudents($db);\n        }\n        \n    } elseif ($method === 'POST') {\n        // TODO: Check if this is a change password request\n        // Look for action=change_password in query parameters\n        // If yes, call changePassword()\n        // If no, call createStudent()\n        if (isset($queryParams['action']) && $queryParams['action'] === 'change_password') {\n            changePassword($db, $data);\n        } else {\n            createStudent($db, $data);\n        }\n    } elseif ($method === 'PUT') {\n        // TODO: Call updateStudent()\n        updateStudent($db, $data);\n    } elseif ($method === 'DELETE') {\n        // TODO: Get student_id from query parameter or request body\n        // Call deleteStudent()\n        $student_id = isset($queryParams['student_id']) ? $queryParams['student_id'] : (isset($data['student_id']) ? $data['student_id'] : null);\n        deleteStudent($db, $student_id);\n    } else {\n        // TODO: Return error for unsupported methods\n        // Set HTTP status to 405 (Method Not Allowed)\n        // Return JSON error message\n        sendResponse(['success' => false, 'message' => 'Method not allowed'], 405);\n    }\n    \n} catch (PDOException $e) {\n    // TODO: Handle database errors\n    // Log the error message (optional)\n    // Return generic error response with 500 status\n    error_log(\"Database error: \" . $e->getMessage());\n    sendResponse(['success' => false, 'message' => 'Database error occurred'], 500);\n} catch (Exception $e) {\n    // TODO: Handle general errors\n    // Return error response with 500 status\n    error_log(\"General error: \" . $e->getMessage());\n    sendResponse(['success' => false, 'message' => 'An error occurred'], 500);\n}\n\n\n// ============================================================================\n// HELPER FUNCTIONS (Optional but Recommended)\n// ============================================================================\n\n/**\n * Helper function to send JSON response\n * \n * @param mixed $data - Data to send\n * @param int $statusCode - HTTP status code\n */\nfunction sendResponse($data, $statusCode = 200) {\n    // TODO: Set HTTP response code\n    http_response_code($statusCode);\n    // TODO: Echo JSON encoded data\n    echo json_encode($data);\n    // TODO: Exit to prevent further execution\n    exit();\n}\n\n\n/**\n * Helper function to validate email format\n * \n * @param string $email - Email address to validate\n * @return bool - True if valid, false otherwise\n */\nfunction validateEmail($email) {\n    // TODO: Use filter_var with FILTER_VALIDATE_EMAIL\n    // Return true if valid, false otherwise\n    return filter_var($email, FILTER_VALIDATE_EMAIL) !== false;\n}\n\n\n/**\n * Helper function to sanitize input\n * \n * @param string $data - Data to sanitize\n * @return string - Sanitized data\n */\nfunction sanitizeInput($data) {\n    // TODO: Trim whitespace\n    $data = trim($data);\n    // TODO: Strip HTML tags using strip_tags()\n    $data = strip_tags($data);\n    // TODO: Convert special characters using htmlspecialchars()\n    $data = htmlspecialchars($data, ENT_QUOTES, 'UTF-8');\n    // Return sanitized data\n    return $data;\n}\n\n?>\n","path":null,"size_bytes":19168,"size_tokens":null},"index.php":{"content":"<?php\n// Let PHP built-in server handle static files\n$requestUri = $_SERVER[\"REQUEST_URI\"];\n$filePath = __DIR__ . parse_url($requestUri, PHP_URL_PATH);\nif (php_sapi_name() === 'cli-server' && is_file($filePath)) {\n    return false;\n}\n\nsession_start();\nerror_reporting(E_ALL);\nini_set(\"display_errors\", 1);\n\n$path = trim(parse_url($_SERVER[\"REQUEST_URI\"], PHP_URL_PATH), \"/\");\n\n// --------------------------------------------------\n// STATIC HOME REDIRECT\n// --------------------------------------------------\nif ($path === \"\") {\n    header(\"Location: /login\");\n    exit();\n}\n\nswitch ($path) {\n\n    // ----------------------------------------------\n    // AUTH\n    // ----------------------------------------------\n\n    case \"login\":\n        include __DIR__ . \"/src/auth/login.php\";\n        break;\n\n    case \"logout\":\n        include __DIR__ . \"/src/auth/logout.php\";\n        break;\n\n    case \"dashboard\":\n        include __DIR__ . \"/src/auth/dashboard.php\";\n        break;\n\n    case \"admin\":\n        include __DIR__ . \"/src/auth/AdminPortal.php\";\n        break;\n\n\n    // ----------------------------------------------\n    // WEEKLY PAGES\n    // ----------------------------------------------\n\n    case \"weekly/list\":\n        include __DIR__ . \"/src/weekly/list.php\";\n        break;\n\n    case \"weekly/details\":\n        include __DIR__ . \"/src/weekly/details.php\";\n        break;\n\n    case \"weekly/admin\":\n        include __DIR__ . \"/src/weekly/admin.php\";\n        break;\n\n\n    // ----------------------------------------------\n    // RESOURCES PAGES\n    // ----------------------------------------------\n\n    case \"resources/list\":\n        include __DIR__ . \"/src/resources/list.php\";\n        break;\n\n    case \"resources/details\":\n        include __DIR__ . \"/src/resources/details.php\";\n        break;\n\n    case \"resources/admin\":\n        include __DIR__ . \"/src/resources/admin.php\";\n        break;\n\n\n    // ----------------------------------------------\n    // ASSIGNMENTS PAGES\n    // ----------------------------------------------\n\n    case \"assignments/list\":\n        include __DIR__ . \"/src/assignments/list.html\";\n        break;\n\n    case \"assignments/details\":\n        include __DIR__ . \"/src/assignments/details.html\";\n        break;\n\n    case \"assignments/admin\":\n        include __DIR__ . \"/src/assignments/admin.html\";\n        break;\n\n    case \"assignments/update\":\n        include __DIR__ . \"/src/assignments/update.html\";\n        break;\n\n\n    // ----------------------------------------------\n    // ADMIN USERS PAGE\n    // ----------------------------------------------\n\n    case \"admin/users\":\n        include __DIR__ . \"/src/admin/manage_users.html\";\n        break;\n\n\n    // ----------------------------------------------\n    // API ROUTES\n    // ----------------------------------------------\n\n    case \"api/auth\":\n        include __DIR__ . \"/src/auth/api/index.php\";\n        break;\n\n    case \"api/weekly\":\n        include __DIR__ . \"/src/weekly/api/index.php\";\n        break;\n\n    case \"api/weekly/weeks\":\n        header('Content-Type: application/json');\n        readfile(__DIR__ . \"/src/weekly/api/weeks.json\");\n        break;\n\n    case \"api/weekly/comments\":\n        header('Content-Type: application/json');\n        readfile(__DIR__ . \"/src/weekly/api/comments.json\");\n        break;\n\n    case \"api/resources\":\n        include __DIR__ . \"/src/resources/api/index.php\";\n        break;\n\n    case \"api/assignments\":\n        include __DIR__ . \"/src/assignments/api/index.php\";\n        break;\n\n    case \"api/admin/users\":\n        include __DIR__ . \"/src/admin/api/index.php\";\n        break;\n\n\n    // ----------------------------------------------\n    // DIRECT FILE API ROUTES (for JS file access)\n    // ----------------------------------------------\n\n    case \"weekly/api/index.php\":\n        include __DIR__ . \"/src/weekly/api/index.php\";\n        break;\n\n    case \"weekly/api/weeks.json\":\n        header('Content-Type: application/json');\n        readfile(__DIR__ . \"/src/weekly/api/weeks.json\");\n        break;\n\n    case \"weekly/api/comments.json\":\n        header('Content-Type: application/json');\n        readfile(__DIR__ . \"/src/weekly/api/comments.json\");\n        break;\n\n    case \"resources/api/index.php\":\n        include __DIR__ . \"/src/resources/api/index.php\";\n        break;\n\n    case \"assignments/api/index.php\":\n        include __DIR__ . \"/src/assignments/api/index.php\";\n        break;\n\n\n    // ----------------------------------------------\n    // 404 ERROR\n    // ----------------------------------------------\n\n  default:\n    http_response_code(404);\n    include __DIR__ . \"/src/errors/404.php\";\n    break;\n\n}\n","path":null,"size_bytes":4646,"size_tokens":null},"src/resources/api/index.php":{"content":"<?php\n/**\n * Course Resources API\n * \n * RESTful API for managing course resources and comments.\n * Uses PDO + MySQL database.\n */\n\n// ============================================================================\n// HEADERS AND INITIALIZATION\n// ============================================================================\n\n// Set headers\nheader(\"Content-Type: application/json\");\nheader(\"Access-Control-Allow-Origin: *\");\nheader(\"Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS\");\nheader(\"Access-Control-Allow-Headers: Content-Type, Authorization\");\n\n// Handle OPTIONS request\nif ($_SERVER[\"REQUEST_METHOD\"] === \"OPTIONS\") {\n    http_response_code(200);\n    exit;\n}\n\n// Include database file\nrequire_once __DIR__ . \"/../../../config/Config.php\";\n$db = $conn;\n\n// Method + body + query\n$method = $_SERVER['REQUEST_METHOD'];\n$body = json_decode(file_get_contents(\"php://input\"), true);\n$query = $_GET;\n\n\n// ============================================================================\n// RESOURCE FUNCTIONS\n// ============================================================================\n\nfunction getAllResources($db) {\n    $sql = \"SELECT id, title, description, external_url, created_at \n            FROM course_resources WHERE is_active = TRUE\";\n\n    // Search\n    if (isset($_GET['search'])) {\n        $sql .= \" AND (title LIKE :search OR description LIKE :search)\";\n    }\n\n    // Sorting\n    $allowedSort = [\"title\", \"created_at\"];\n    $sort = $_GET[\"sort\"] ?? \"created_at\";\n    $order = strtoupper($_GET[\"order\"] ?? \"DESC\");\n\n    if (!in_array($sort, $allowedSort)) $sort = \"created_at\";\n    if (!in_array($order, [\"ASC\", \"DESC\"])) $order = \"DESC\";\n\n    $sql .= \" ORDER BY $sort $order\";\n\n    $stmt = $db->prepare($sql);\n\n    if (isset($_GET['search'])) {\n        $search = \"%\" . $_GET['search'] . \"%\";\n        $stmt->bindParam(\":search\", $search);\n    }\n\n    $stmt->execute();\n    $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n    sendResponse([\"success\" => true, \"data\" => $rows]);\n}\n\nfunction getResourceById($db, $id) {\n    if (!is_numeric($id)) sendResponse([\"success\" => false, \"message\" => \"Invalid ID\"], 400);\n\n    $stmt = $db->prepare(\"SELECT * FROM course_resources WHERE id = ?\");\n    $stmt->execute([$id]);\n    $row = $stmt->fetch(PDO::FETCH_ASSOC);\n\n    if (!$row) sendResponse([\"success\" => false, \"message\" => \"Resource not found\"], 404);\n\n    sendResponse([\"success\" => true, \"data\" => $row]);\n}\n\nfunction createResource($db, $body) {\n    if (empty($body['title']) || empty($body['link'])) {\n        sendResponse([\"success\" => false, \"message\" => \"Title and link required\"], 400);\n    }\n\n    if (!filter_var($body['link'], FILTER_VALIDATE_URL)) {\n        sendResponse([\"success\" => false, \"message\" => \"Invalid URL\"], 400);\n    }\n\n    $title = sanitizeInput($body['title']);\n    $desc = sanitizeInput($body['description'] ?? \"\");\n    $link = $body['link'];\n\n    $stmt = $db->prepare(\"\n        INSERT INTO course_resources (title, description, resource_type, external_url, created_by)\n        VALUES (?, ?, 'web_link', ?, 1)\n    \");\n\n    $stmt->execute([$title, $desc, $link]);\n\n    sendResponse([\n        \"success\" => true,\n        \"message\" => \"Resource created\",\n        \"id\" => $db->lastInsertId()\n    ], 201);\n}\n\nfunction updateResource($db, $body) {\n    if (empty($body['id'])) sendResponse([\"success\" => false, \"message\" => \"ID required\"], 400);\n\n    $id = $body['id'];\n\n    // Check exists\n    $check = $db->prepare(\"SELECT id FROM course_resources WHERE id = ?\");\n    $check->execute([$id]);\n    if (!$check->fetch()) sendResponse([\"success\" => false, \"message\" => \"Not found\"], 404);\n\n    $fields = [];\n    $values = [];\n\n    if (isset($body['title'])) {\n        $fields[] = \"title = ?\";\n        $values[] = sanitizeInput($body['title']);\n    }\n\n    if (isset($body['description'])) {\n        $fields[] = \"description = ?\";\n        $values[] = sanitizeInput($body['description']);\n    }\n\n    if (isset($body['link'])) {\n        if (!filter_var($body['link'], FILTER_VALIDATE_URL))\n            sendResponse([\"success\" => false, \"message\" => \"Invalid URL\"], 400);\n\n        $fields[] = \"external_url = ?\";\n        $values[] = $body['link'];\n    }\n\n    if (empty($fields)) {\n        sendResponse([\"success\" => false, \"message\" => \"No fields to update\"], 400);\n    }\n\n    $sql = \"UPDATE course_resources SET \" . implode(\", \", $fields) . \" WHERE id = ?\";\n    $values[] = $id;\n\n    $stmt = $db->prepare($sql);\n    $stmt->execute($values);\n\n    sendResponse([\"success\" => true, \"message\" => \"Updated\"]);\n}\n\nfunction deleteResource($db, $id) {\n    if (!is_numeric($id)) sendResponse([\"success\" => false, \"message\" => \"Invalid ID\"], 400);\n\n    // Check exists\n    $check = $db->prepare(\"SELECT id FROM course_resources WHERE id = ?\");\n    $check->execute([$id]);\n    if (!$check->fetch()) sendResponse([\"success\" => false, \"message\" => \"Not found\"], 404);\n\n    $db->beginTransaction();\n\n    try {\n        // Delete comments\n        $delC = $db->prepare(\"DELETE FROM resource_comments WHERE resource_id = ?\");\n        $delC->execute([$id]);\n\n        // Delete resource\n        $delR = $db->prepare(\"DELETE FROM course_resources WHERE id = ?\");\n        $delR->execute([$id]);\n\n        $db->commit();\n        sendResponse([\"success\" => true, \"message\" => \"Resource deleted\"]);\n    } catch (Exception $e) {\n        $db->rollBack();\n        sendResponse([\"success\" => false, \"message\" => \"Error deleting\"], 500);\n    }\n}\n\n\n// ============================================================================\n// COMMENT FUNCTIONS\n// ============================================================================\n\nfunction getCommentsByResourceId($db, $resourceId) {\n    if (!is_numeric($resourceId)) sendResponse([\"success\" => false, \"message\" => \"Invalid ID\"], 400);\n\n    $stmt = $db->prepare(\"SELECT * FROM resource_comments WHERE resource_id = ?\");\n    $stmt->execute([$resourceId]);\n    $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n    sendResponse([\"success\" => true, \"data\" => $rows]);\n}\n\nfunction createComment($db, $body) {\n    if (empty($body['resource_id']) || empty($body['text'])) {\n        sendResponse([\"success\" => false, \"message\" => \"resource_id and text required\"], 400);\n    }\n\n    if (!is_numeric($body['resource_id']))\n        sendResponse([\"success\" => false, \"message\" => \"Invalid resource_id\"], 400);\n\n    $stmt = $db->prepare(\"INSERT INTO resource_comments (resource_id, user_id, comment_text)\n                         VALUES (?, 1, ?)\");\n\n    $stmt->execute([\n        $body['resource_id'],\n        sanitizeInput($body['text'])\n    ]);\n\n    sendResponse([\"success\" => true, \"message\" => \"Comment added\"]);\n}\n\nfunction deleteComment($db, $commentId) {\n    if (!is_numeric($commentId)) sendResponse([\"success\" => false, \"message\" => \"Invalid ID\"], 400);\n\n    $stmt = $db->prepare(\"DELETE FROM resource_comments WHERE id = ?\");\n    $stmt->execute([$commentId]);\n\n    sendResponse([\"success\" => true, \"message\" => \"Comment deleted\"]);\n}\n\n\n// ============================================================================\n// MAIN ROUTER\n// ============================================================================\n\nif ($method === \"GET\") {\n    if (isset($query['action']) && $query['action'] === \"comments\") {\n        getCommentsByResourceId($db, $query['resource_id'] ?? null);\n    } elseif (isset($query['id'])) {\n        getResourceById($db, $query['id']);\n    } else {\n        getAllResources($db);\n    }\n\n} elseif ($method === \"POST\") {\n    if (isset($query['action']) && $query['action'] === \"comment\") {\n        createComment($db, $body);\n    } else {\n        createResource($db, $body);\n    }\n\n} elseif ($method === \"PUT\") {\n    updateResource($db, $body);\n\n} elseif ($method === \"DELETE\") {\n    if (isset($query['action']) && $query['action'] === \"delete_comment\") {\n        deleteComment($db, $query['comment_id'] ?? null);\n    } else {\n        deleteResource($db, $query['id'] ?? null);\n    }\n\n} else {\n    sendResponse([\"success\" => false, \"message\" => \"Method not allowed\"], 405);\n}\n\n\n// ============================================================================\n// HELPER FUNCTIONS\n// ============================================================================\n\nfunction sendResponse($data, $status = 200) {\n    http_response_code($status);\n    echo json_encode($data, JSON_PRETTY_PRINT);\n    exit;\n}\n\nfunction sanitizeInput($str) {\n    return htmlspecialchars(strip_tags(trim($str)), ENT_QUOTES, 'UTF-8');\n}\n\n?>\n","path":null,"size_bytes":8466,"size_tokens":null},"src/common/css/styles.css":{"content":"/* CSS Styles */\nbody { \n    font-family: Arial; \n    max-width: 1200px; \n    margin: auto; \n    padding: 20px; \n}\n\n.header { \n    background: #2c3e50; \n    color: white; \n    padding: 15px; \n}\n\n.nav { \n    background: #34495e; \n    padding: 10px; \n    margin: 10px 0; \n}\n\n.nav a { \n    color: white; \n    text-decoration: none; \n    margin: 0 10px; \n}\n\n.message { \n    padding: 10px; \n    margin: 10px 0; \n}\n\n.success { \n    background: #dff0d8; \n    color: green; \n}\n\n.error { \n    background: #f2dede; \n    color: red; \n}\n\ntable { \n    width: 100%; \n    border-collapse: collapse; \n    margin: 10px 0; \n}\n\nth, td { \n    border: 1px solid #ddd; \n    padding: 8px; \n}\n\nth { \n    background: #34495e; \n    color: white; \n}\n\nbutton { \n    background: #3498db; \n    color: white; \n    padding: 8px 15px; \n    border: none; \n    margin: 5px; \n    cursor: pointer;\n}\n\n.danger { \n    background: #e74c3c; \n}\n\n.edit-form { \n    background: #f8f9fa; \n    padding: 15px; \n    margin: 10px 0; \n}\n\n.form-group { \n    margin: 10px 0; \n}\n\n.form-group label { \n    display: block; \n    margin-bottom: 5px; \n    font-weight: bold; \n}\n\n.form-group input { \n    width: 100%; \n    padding: 8px; \n    border: 1px solid #ddd; \n}\n\n.student-id { \n    background: #e8f4fd; \n    padding: 5px; \n    border-radius: 3px; \n    font-weight: bold; \n}\n\n.sidebar { \n    width: 200px; \n    background: #ecf0f1; \n    padding: 15px; \n    margin-right: 20px; \n}\n\n\n\n.form-grid { \n    display: grid; \n    grid-template-columns: 1fr 1fr; \n    gap: 15px; \n}\n\ninput { \n    padding: 8px; \n    margin: 5px 0; \n}\n","path":null,"size_bytes":1570,"size_tokens":null},"src/weekly/details.php":{"content":"<?php\nrequire_once __DIR__ . '/../../config/Config.php';\n\n// Check if user is logged in\nif (!isLoggedIn()) {\n    header(\"Location: /login\");\n    exit();\n}\n\n// Safely read session values\n$loggedInUserId   = isset($_SESSION['user_id']) ? (int)$_SESSION['user_id'] : null; // Changed from 'id' to 'user_id'\n$loggedInUsername = isset($_SESSION['username']) ? $_SESSION['username'] : null;\n$isAdmin          = function_exists('isAdmin') ? isAdmin() : false;\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Week Details</title>\n\n    <!-- FONTS -->\n\n    <!-- CSS FRAMEWORKS -->\n\n    <!-- CUSTOM CSS FILES -->\n    <link rel=\"stylesheet\" href=\"/src/common/css/background.css\">\n    <link rel=\"stylesheet\" href=\"/src/common/css/weekly-details.css\">\n\n    <!-- JS GLOBALS FROM PHP -->\n    <script>\n    window.IS_ADMIN = <?= $isAdmin ? 'true' : 'false'; ?>;\n    window.LOGGED_IN_USER_ID = <?= $loggedInUserId !== null ? $loggedInUserId : 'null' ?>;\n    window.LOGGED_IN_USER_NAME = <?= json_encode($loggedInUsername) ?>;\n\n    window.BACK_URL = <?= $isAdmin ? '\"/weekly/admin\"' : '\"/weekly/list\"' ?>;\n    </script>\n\n    <!-- JS FILES -->\n    <script src=\"/src/common/js/background.js\"></script>\n    <script src=\"/src/weekly/details.js\" defer></script>\n</head>\n\n<body>\n    <div class=\"bg-animation\">\n        <div class=\"neural-network\" id=\"neuralNetwork\"></div>\n        <div class=\"particles\" id=\"particles\"></div>\n    </div>\n\n    <header>\n        <button id=\"go-back-btn\"></button>\n        <h1 id=\"week-title\">Week details</h1>\n    </header>\n\n    <main>\n        <!-- Section 1: Weekly Information -->\n        <article>\n            <p id=\"week-start-date\">Starts on: -</p>\n\n            <h2>Description &amp; Notes</h2>\n            <p id=\"week-description\">Loading...</p>\n\n            <h2>Exercises &amp; Resources</h2>\n            <ul id=\"week-links-list\"></ul>\n        </article>\n\n        <!-- Section 2: Discussion Forum -->\n        <section id=\"discussion-forum\">\n            <h2>Discussion</h2>\n\n            <!-- Existing Comments -->\n            <div id=\"comment-list\"></div>\n\n            <!-- Add a Comment Form -->\n            <form action=\"#\" id=\"comment-form\">\n                <fieldset>\n                    <legend>Ask a Question</legend>\n\n                    <label for=\"new-comment-text\">Comment:</label>\n                    <textarea id=\"new-comment-text\" required></textarea>\n\n                    <button type=\"submit\">Post Comment</button>\n                </fieldset>\n            </form>\n        </section>\n    </main>\n</body>\n\n</html>","path":null,"size_bytes":2647,"size_tokens":null},"src/auth/AdminPortal.php":{"content":"<?php\nrequire_once __DIR__ . '/../../config/Config.php';\n\nif (!isLoggedIn() || !isAdmin()) {\n    header(\"Location: /login\");\n    exit();\n}\n\n$message = '';\n$message_type = '';\n$action = $_GET['action'] ?? 'dashboard';\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n\n    /* ===============================\n       CHANGE PASSWORD\n    =============================== */\n    if (isset($_POST['change_password'])) {\n        $current_password = $_POST['current_password'];\n        $new_password = $_POST['new_password'];\n        $confirm_password = $_POST['confirm_password'];\n\n        // FIXED: use password_hash column\n        $stmt = $conn->prepare(\"SELECT password_hash FROM users WHERE id = ?\");\n        $stmt->execute([$_SESSION['user_id']]);\n        $user = $stmt->fetch(PDO::FETCH_ASSOC);\n\n        if ($user && password_verify($current_password, $user['password_hash'])) {\n            if ($new_password === $confirm_password) {\n\n                $hashed = password_hash($new_password, PASSWORD_DEFAULT);\n\n                // FIXED\n                $update = $conn->prepare(\"UPDATE users SET password_hash = ? WHERE id = ?\");\n                $update->execute([$hashed, $_SESSION['user_id']]);\n\n                $message = \"Password changed successfully!\";\n                $message_type = \"success\";\n            } else {\n                $message = \"New passwords do not match!\";\n                $message_type = \"error\";\n            }\n        } else {\n            $message = \"Current password is incorrect!\";\n            $message_type = \"error\";\n        }\n    }\n\n    /* ===============================\n       ADD STUDENT\n    =============================== */\n    elseif (isset($_POST['add_student'])) {\n\n        $username = $_POST['username'];\n        $email = $_POST['email'];\n\n        // FIXED: use password_hash column\n        $password_hash = password_hash('student123', PASSWORD_DEFAULT);\n\n        $stmt = $conn->prepare(\"\n            INSERT INTO users (username, email, password_hash, role)\n            VALUES (?, ?, ?, 'student')\n        \");\n\n        $stmt->execute([$username, $email, $password_hash]);\n\n        $message = \"Student added successfully! Default password: student123\";\n        $message_type = \"success\";\n    }\n\n    /* ===============================\n       UPDATE STUDENT\n    =============================== */\n    elseif (isset($_POST['update_student'])) {\n\n        $id = $_POST['id'];\n        $username = $_POST['username'];\n        $email = $_POST['email'];\n\n        $stmt = $conn->prepare(\"UPDATE users SET username = ?, email = ? WHERE id = ?\");\n        $stmt->execute([$username, $email, $id]);\n\n        $message = \"Student updated!\";\n        $message_type = \"success\";\n    }\n\n    /* ===============================\n       DELETE USER\n    =============================== */\n    elseif (isset($_POST['delete_user'])) {\n\n        $id = $_POST['id'];\n\n        $stmt = $conn->prepare(\"DELETE FROM users WHERE id = ?\");\n        $stmt->execute([$id]);\n\n        $message = \"User deleted!\";\n        $message_type = \"success\";\n    }\n}\n\n/* ===============================\n   FETCH ALL STUDENTS\n=============================== */\n$students = [];\nif ($action === 'students') {\n    $stmt = $conn->query(\"SELECT id, username, email FROM users WHERE role = 'student'\");\n    $students = $stmt->fetchAll(PDO::FETCH_ASSOC);\n}\n?>\n\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Admin Portal</title>\n\n    <!-- NEON THEME -->\n    <link rel=\"stylesheet\" href=\"/src/common/css/background.css\">\n    <link rel=\"stylesheet\" href=\"/src/common/css/adminPortal.css\">\n\n    <!-- JS Background -->\n    <script src=\"/src/common/js/background.js\" defer></script>\n</head>\n\n<body>\n<div class=\"bg-animation\">\n    <div class=\"neural-network\" id=\"neuralNetwork\"></div>\n    <div class=\"particles\" id=\"particles\"></div>\n</div>\n\n<!-- HEADER -->\n<div class=\"header\">\n    <h1>Admin Control Panel</h1>\n</div>\n\n<!-- NAVIGATION -->\n<div class=\"nav\">\n    <div class=\"nav-left\">\n        <a href=\"/admin?action=dashboard\">Dashboard</a>\n        <a href=\"/admin?action=students\">Students</a>\n        <a href=\"/admin?action=password\">Password</a>\n    </div>\n\n    <div class=\"nav-right\">\n        <a href=\"/logout\">Logout</a>\n    </div>\n</div>\n\n<!-- SUCCESS / ERROR MESSAGE -->\n<?php if ($message): ?>\n<div class=\"welcome-box\" style=\"border-left: 4px solid <?php echo $message_type === 'success' ? '#00ff88' : '#ff4444'; ?>;\">\n    <p style=\"color: <?php echo $message_type === 'success' ? '#00ff88' : '#ff4444'; ?>;\">\n        <?php echo $message; ?>\n    </p>\n</div>\n<?php endif; ?>\n\n<!-- MAIN CONTENT -->\n<div class=\"main-content\">\n\n<?php if ($action === 'dashboard'): ?>\n\n    <!-- ===========================\n         ADMIN DASHBOARD (NEW)\n    ============================ -->\n\n    <div class=\"welcome-box\">\n        <h2>Welcome back, <?php echo $_SESSION['username']; ?>!</h2>\n        <p>Last login: <?php echo date(\"Y-m-d H:i:s\"); ?></p>\n    </div>\n\n    <div class=\"dashboard-grid\">\n\n    <?php if (isAdmin() || isInstructor()): ?>\n <div class=\"card\">\n        <h3>Resources</h3>\n        <p>Manage and organize all learning resources.</p>\n        <a href=\"/resources/admin\"><button>Manage Resources</button></a>\n    </div>\n\n    <div class=\"card\">\n        <h3>Weekly Breakdown</h3>\n        <p>Create and manage weekly schedules and content.</p>\n        <a href=\"/weekly/admin\"><button>Manage Weekly</button></a>\n    </div>\n\n    <div class=\"card\">\n        <h3>Assignments</h3>\n        <p>Create and manage assignments and grading.</p>\n        <a href=\"/assignments/admin\"><button>Manage Assignments</button></a>\n    </div>\n\n    <div class=\"card\">\n        <h3>General Discussion Boards</h3>\n        <p>Moderate and manage all discussion boards.</p>\n        <p>extra task (Not implemented)</p>\n        <a href=\"#\"><button>Manage Discussions</button></a>\n    </div>\n    <?php endif; ?>\n\n    </div>\n\n<?php elseif ($action === 'students'): ?>\n\n    <!-- ===========================\n         STUDENT MANAGEMENT\n    ============================ -->\n\n    <h2>Manage Students</h2>\n\n    <div class=\"card\" style=\"margin-bottom: 2rem;\">\n        <h3>Add New Student</h3>\n        <form method=\"POST\">\n            <input type=\"text\" name=\"username\" placeholder=\"Username\" required><br><br>\n            <input type=\"email\" name=\"email\" placeholder=\"Email\" required><br><br>\n            <button type=\"submit\" name=\"add_student\">Add Student</button>\n        </form>\n        <small>Default password: <b>student123</b></small>\n    </div>\n\n    <?php if (count($students) > 0): ?>\n        <table id=\"weeks-table\">\n            <tr>\n                <th>ID</th><th>Username</th><th>Email</th><th>Actions</th>\n            </tr>\n\n            <?php foreach ($students as $student): ?>\n            <tr>\n                <td><?php echo $student['id']; ?></td>\n                <td><?php echo $student['username']; ?></td>\n                <td><?php echo $student['email']; ?></td>\n                <td>\n                    <button onclick=\"showEditForm(<?php echo $student['id']; ?>, '<?php echo $student['username']; ?>', '<?php echo $student['email']; ?>')\">Edit</button>\n\n                    <form method=\"POST\" style=\"display:inline;\">\n                        <input type=\"hidden\" name=\"id\" value=\"<?php echo $student['id']; ?>\">\n                        <button type=\"submit\" name=\"delete_user\" class=\"danger\" onclick=\"return confirm('Delete student?')\">Delete</button>\n                    </form>\n                </td>\n            </tr>\n            <?php endforeach; ?>\n\n        </table>\n    <?php else: ?>\n        <p>No students found.</p>\n    <?php endif; ?>\n\n    <div id=\"editForm\" class=\"card\" style=\"display:none; margin-top: 2rem;\">\n        <h3>Edit Student</h3>\n        <form method=\"POST\">\n            <input type=\"hidden\" name=\"id\" id=\"edit_id\">\n            <input type=\"text\" name=\"username\" id=\"edit_username\" required><br><br>\n            <input type=\"email\" name=\"email\" id=\"edit_email\" required><br><br>\n            <button type=\"submit\" name=\"update_student\">Update Student</button>\n            <button type=\"button\" onclick=\"hideEditForm()\">Cancel</button>\n        </form>\n    </div>\n\n<?php elseif ($action === 'password'): ?>\n\n    <!-- ===========================\n         PASSWORD PAGE\n    ============================ -->\n\n    <h2>Change Password</h2>\n\n    <div class=\"card\" style=\"max-width: 400px;\">\n        <form method=\"POST\">\n\n            <p>Current Password:<br>\n            <input type=\"password\" name=\"current_password\" required></p>\n\n            <p>New Password:<br>\n            <input type=\"password\" name=\"new_password\" required></p>\n\n            <p>Confirm New Password:<br>\n            <input type=\"password\" name=\"confirm_password\" required></p>\n\n            <button type=\"submit\" name=\"change_password\">Change Password</button>\n        </form>\n    </div>\n\n<?php endif; ?>\n\n</div>\n\n<script>\nfunction showEditForm(id, username, email) {\n    document.getElementById('edit_id').value = id;\n    document.getElementById('edit_username').value = username;\n    document.getElementById('edit_email').value = email;\n    document.getElementById('editForm').style.display = 'block';\n}\n\nfunction hideEditForm() {\n    document.getElementById('editForm').style.display = 'none';\n}\n</script>\n\n</body>\n</html>\n","path":null,"size_bytes":9367,"size_tokens":null},"src/weekly/list.php":{"content":"<?php\nrequire_once __DIR__ . '/../../config/Config.php';\n\n// Check if user is logged in and is admin\nif (!isLoggedIn() || !isStudent()) {\n    header(\"Location: /login\");\n    exit();\n}\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Weekly Course Breakdown</title>\n\n    <!-- FONTS -->\n\n    <!-- CSS FRAMEWORKS -->\n\n    <!-- CUSTOM CSS FILES -->\n    <link rel=\"stylesheet\" href=\"/src/common/css/background.css\">\n    <link rel=\"stylesheet\" href=\"/src/common/css/weekly-list.css\">\n\n    <!-- JS FILES -->\n    <script src=\"/src/common/js/background.js\"></script>\n    <script src=\"/src/weekly/list.js\" defer></script>\n    <script src=\"/src/common/js/goBackButton.js\"></script>\n\n\n</head>\n\n<body>\n    <div class=\"bg-animation\">\n        <div class=\"neural-network\" id=\"neuralNetwork\"></div>\n        <div class=\"particles\" id=\"particles\"></div>\n    </div>\n\n    <header>\n        <button id=\"go-back-btn\"></button>\n        <h1>Weekly Course Breakdown</h1>\n    </header>\n\n    <main>\n        <section id=\"week-list-section\">\n            <!-- Dummy week 1 -->\n            <article>\n                <h2>Week 1: Introduction to HTML</h2>\n                <!-- Dummy date format: YYYY-MM-DD -->\n                <p>Starts on: 2024-01-01</p>\n                <p>Learn the fundamentals of HTML structure and basic web page creation.</p>\n                <!-- Dummy href - will link to actual week detail page later -->\n                <a href=\"week-detail.html\">View Details & Discussion</a>\n            </article>\n\n            <!-- Dummy week 2 -->\n            <article>\n                <h2>Week 2: CSS Fundamentals</h2>\n                <!-- Dummy date format: YYYY-MM-DD -->\n                <p>Starts on: 2024-01-08</p>\n                <p>Introduction to styling with CSS, selectors, and basic layout techniques.</p>\n                <!-- Dummy href - will link to actual week detail page later -->\n                <a href=\"week-detail.html\">View Details & Discussion</a>\n            </article>\n\n            <!-- Dummy week 3 -->\n            <article>\n                <h2>Week 3: JavaScript Basics</h2>\n                <!-- Dummy date format: YYYY-MM-DD -->\n                <p>Starts on: 2024-01-15</p>\n                <p>Learn JavaScript fundamentals, variables, functions, and DOM manipulation.</p>\n                <!-- Dummy href - will link to actual week detail page later -->\n                <a href=\"week-detail.html\">View Details & Discussion</a>\n            </article>\n        </section>\n    </main>\n</body>\n\n</html>","path":null,"size_bytes":2613,"size_tokens":null},"src/common/css/weekly-admin.css":{"content":":root {\n    --primary: #00ffff;\n    --secondary: #ff00ff;\n    --accent: #7c3aed;\n    --dark: #0a0a0f;\n    --darker: #050508;\n    --light: #ffffff;\n    --gray: #9ca3af;\n}\n\n\nbody {\n    font-family: 'Segoe UI', Tahoma, sans-serif;\n    background: var(--darker);\n    color: var(--light);\n    margin: 0;\n    padding: 0;\n}\n\n\nheader {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    padding: 2rem;\n    padding-bottom: 0rem;\n    margin-left: 3.5rem;\n    gap: 2.5rem;\n}\n\n#go-back-btn {\n    width: 45px;\n    height: 45px;\n    background: linear-gradient(45deg, var(--primary), var(--accent));\n    color: var(--dark);\n    border: none;\n    border-radius: 50%;\n    cursor: pointer;\n    font-size: 1.5rem;\n    font-weight: bold;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin: 0px;\n    transition: 0.25s ease;\n}\n\n#go-back-btn:hover {\n    transform: translateX(-4px);\n    box-shadow: 0 0 15px rgba(0, 255, 255, 0.6);\n}\n\nheader h1 {\n    font-size: 3rem;\n    margin-top: 1rem;\n    font-weight: bold;\n\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n\n    animation: neonTitleGlow 1.6s ease-in-out infinite alternate;\n}\n\n\n@keyframes glow {\n    from {\n        filter: drop-shadow(0 0 10px rgba(0, 255, 255, 0.3));\n    }\n\n    to {\n        filter: drop-shadow(0 0 15px rgba(255, 0, 255, 0.6));\n    }\n}\n\n\nmain {\n    max-width: 1100px;\n    margin: 0 auto;\n    padding: 2rem;\n    padding-top: 0px;\n}\n\n\nsection h2 {\n    margin-top: 2rem;\n    margin-bottom: 1rem;\n    font-size: 1.8rem;\n    font-weight: bold;\n    background: linear-gradient(45deg, var(--primary), var(--accent));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n}\n\n\nfieldset {\n    border: 1px solid rgba(255, 255, 255, 0.12);\n    padding: 2rem;\n    border-radius: 20px;\n\n    background: rgba(255, 255, 255, 0.04);\n    backdrop-filter: blur(14px);\n    box-shadow: 0 0 20px rgba(0, 255, 255, 0.10);\n\n    margin-bottom: 2rem;\n}\n\nlegend {\n    padding: 0 1rem;\n    font-size: 1.2rem;\n    color: var(--primary);\n}\n\n\nlabel {\n    display: block;\n    margin-top: 1.2rem;\n    margin-bottom: 0.3rem;\n    color: var(--primary);\n    font-weight: 500;\n}\n\n\ninput,\ntextarea {\n    width: calc(100% - 2rem);\n    margin-left: -1rem;\n\n    padding: 0.9rem 1rem;\n    border-radius: 12px;\n\n    border: 1px solid rgba(255, 255, 255, 0.22);\n    background: rgba(255, 255, 255, 0.14);\n\n    color: var(--light);\n    font-size: 1rem;\n\n    transition: 0.25s ease;\n    caret-color: var(--secondary);\n}\n\ninput::placeholder,\ntextarea::placeholder {\n    color: rgba(255, 0, 255, 0.45);\n}\n\ninput:focus,\ntextarea:focus,\ninput.date-active {\n    outline: none;\n    color: var(--secondary);\n    background: rgba(255, 255, 255, 0.20);\n    border-color: var(--secondary);\n    box-shadow: 0 0 12px rgba(255, 0, 255, 0.55);\n}\n\ninput[type=\"date\"] {\n    color-scheme: dark;\n}\n\ninput[type=\"date\"]:not(:placeholder-shown) {\n    color: var(--secondary);\n}\n\n\na,\ntable td a {\n    color: var(--primary);\n    font-weight: 500;\n    text-shadow: 0 0 6px rgba(0, 255, 255, 0.5);\n    transition: 0.3s ease;\n}\n\na:hover {\n    color: var(--secondary);\n    text-shadow: 0 0 8px rgba(255, 0, 255, 0.7);\n}\n\na:visited {\n    color: var(--secondary) !important;\n}\n\n\n#add-week,\nbutton {\n    padding: 0.8rem 1.3rem;\n    font-size: 1rem;\n    font-weight: bold;\n    border: none;\n    border-radius: 25px;\n    cursor: pointer;\n\n    background: linear-gradient(45deg, var(--primary), var(--accent));\n    color: var(--dark);\n\n    margin-top: 1rem;\n    transition: 0.3s ease;\n}\n\nbutton:hover {\n    transform: translateY(-3px);\n    box-shadow: 0 10px 25px rgba(0, 255, 255, 0.3);\n}\n\n\n#form-global-error {\n    margin-top: 10px;\n    color: #ff4444;\n    font-weight: bold;\n    display: none;\n}\n\n\n#weeks-table {\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: 1rem;\n\n    background: rgba(255, 255, 255, 0.03);\n    border-radius: 12px;\n    backdrop-filter: blur(10px);\n    overflow: hidden;\n}\n\n#weeks-table th {\n    background: rgba(255, 255, 255, 0.08);\n    color: var(--primary);\n    padding: 1rem;\n    font-size: 1.1rem;\n}\n\n#weeks-table td {\n    padding: 1rem;\n    background: rgba(255, 255, 255, 0.02);\n    border-top: 1px solid rgba(255, 255, 255, 0.07);\n    color: var(--light);\n}\n\n#weeks-table tr:hover td {\n    background: rgba(0, 255, 255, 0.10);\n}\n\n\ntd button {\n    width: 90%;\n    margin-bottom: 0.4rem;\n    font-size: 0.9rem;\n}\n\n\n.modal-overlay {\n    position: fixed;\n    inset: 0;\n    background: rgba(0, 0, 0, 0.6);\n    display: none;\n    align-items: center;\n    justify-content: center;\n    z-index: 3000;\n}\n\n\n.modal {\n    background: rgba(255, 255, 255, 0.06);\n    border-radius: 15px;\n    padding: 2rem;\n    width: 400px;\n    backdrop-filter: blur(16px);\n    border: 1px solid rgba(255, 255, 255, 0.15);\n    box-shadow: 0 0 25px rgba(0, 255, 255, 0.35);\n}\n\n.modal h2 {\n    font-size: 1.6rem;\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n}\n\n\n#cancel-edit {\n    background: rgba(255, 255, 255, 0.25);\n    color: var(--light);\n}\n\n#cancel-edit:hover {\n    background: rgba(255, 255, 255, 0.35);\n}\n\n\n\n\n#edit-week-start-date {\n    color: var(--light) !important; \n}\n\n\n#edit-week-start-date:focus {\n    color: var(--secondary) !important; \n    border-color: var(--secondary);\n    background: rgba(255, 255, 255, 0.20);\n    box-shadow: 0 0 12px rgba(255, 0, 255, 0.55);\n}\n\n\n\ntd button.delete-week-btn {\n    background: linear-gradient(45deg, #8a00ff, #ff00c8) !important;\n    color: #0a0a0f !important;\n    font-weight: bold;\n\n    border-radius: 25px;\n    transition: 0.25s ease;\n    box-shadow: 0 0 10px rgba(170, 0, 255, 0.45);\n}\n\ntd button.delete-week-btn:hover {\n    transform: translateY(-3px);\n    box-shadow:\n        0 0 18px rgba(200, 0, 255, 0.9),\n        0 0 28px rgba(255, 0, 200, 0.6);\n}\n","path":null,"size_bytes":5979,"size_tokens":null},"src/common/css/adminPortal.css":{"content":"/* ================================================\n   NEON THEME ROOT\n================================================= */\n\n:root {\n    --primary: #00ffff;\n    --secondary: #ff00ff;\n    --accent: #7c3aed;\n    --dark: #0a0a0f;\n    --darker: #050508;\n    --light: #ffffff;\n    --gray: #9ca3af;\n    --success: #00ff88;\n    --danger: #ff4444;\n}\n\n/* ================================================\n   BASE\n================================================= */\n\nbody {\n    margin: 0;\n    padding: 0;\n    background: var(--darker);\n    font-family: 'Segoe UI', Tahoma, sans-serif;\n    color: var(--light);\n}\n\n/* ================================================\n   HEADER\n================================================= */\n\n.header {\n    background: rgba(255, 255, 255, 0.04);\n    padding: 2rem 2rem;\n    margin-left: 3.5rem;\n    border-radius: 0 0 20px 20px;\n    backdrop-filter: blur(14px);\n    box-shadow: 0 0 20px rgba(0, 255, 255, 0.10);\n}\n\n.header h1 {\n    font-size: 2rem;\n    margin: 0;\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n}\n\n/* ================================================\n   NAVIGATION\n================================================= */\n\n.nav {\n    background: rgba(255, 255, 255, 0.05);\n    padding: 1rem 2rem;\n    margin: 1.5rem 3.5rem;\n    border-radius: 14px;\n    backdrop-filter: blur(12px);\n    box-shadow: 0 0 18px rgba(0, 255, 255, 0.08);\n\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.nav-left,\n.nav-right {\n    display: flex;\n    gap: 1rem;\n}\n\n.nav a {\n    color: var(--primary);\n    font-weight: 500;\n    text-decoration: none;\n    padding: 0.6rem 1.2rem;\n    border-radius: 12px;\n    transition: 0.3s ease;\n    text-shadow: 0 0 6px rgba(0,255,255,0.6);\n}\n\n.nav a:hover {\n    color: var(--secondary);\n    background: rgba(255,255,255,0.08);\n    box-shadow: 0 0 12px rgba(255,0,255,0.4);\n}\n\n/* ================================================\n   WELCOME BOX (Dashboard)\n================================================= */\n\n.welcome-box {\n    margin: 2rem 3.5rem;\n    padding: 2rem;\n\n    border-radius: 20px;\n    border: 1px solid rgba(255,255,255,0.12);\n\n    background: rgba(255,255,255,0.04);\n    backdrop-filter: blur(14px);\n\n    box-shadow: 0 0 20px rgba(0,255,255,0.12);\n}\n\n.welcome-box h2 {\n    margin: 0 0 10px 0;\n    background: linear-gradient(45deg, var(--primary), var(--accent));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n}\n\n/* ================================================\n   DASHBOARD CARDS\n================================================= */\n\n.dashboard-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(290px, 1fr));\n    gap: 2rem;\n    padding: 2rem 3.5rem;\n}\n\n.card {\n    padding: 2rem;\n\n    border-radius: 20px;\n    background: rgba(255,255,255,0.04);\n    border: 1px solid rgba(255,255,255,0.12);\n\n    box-shadow: 0 0 20px rgba(0,255,255,0.10);\n    backdrop-filter: blur(12px);\n\n    transition: 0.3s ease;\n}\n\n.card:hover {\n    transform: translateY(-6px);\n    box-shadow:\n        0 0 25px rgba(0,255,255,0.25),\n        0 0 35px rgba(255,0,255,0.25);\n}\n\n.card h3 {\n    margin-top: 0;\n    margin-bottom: 0.6rem;\n    font-size: 1.4rem;\n\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n}\n\n/* ================================================\n   BUTTONS\n================================================= */\n\nbutton,\n.card button {\n    padding: 0.8rem 1.3rem;\n    border: none;\n    border-radius: 25px;\n\n    font-size: 1rem;\n    font-weight: bold;\n\n    cursor: pointer;\n\n    background: linear-gradient(45deg, var(--primary), var(--accent));\n    color: var(--dark);\n\n    transition: 0.3s ease;\n}\n\nbutton:hover {\n    transform: translateY(-3px);\n    box-shadow: 0 10px 25px rgba(0,255,255,0.3);\n}\n\nbutton.danger {\n    background: linear-gradient(45deg, #ff0044, #ff00aa);\n    color: var(--light);\n}\n\n/* ================================================\n   INPUTS & FORM ELEMENTS\n================================================= */\n\ninput,\ntextarea,\nselect {\n    width: 100%;\n    padding: 0.9rem 1rem;\n    margin-top: 0.5rem;\n\n    border-radius: 12px;\n    border: 1px solid rgba(255,255,255,0.22);\n\n    background: rgba(255,255,255,0.14);\n    color: var(--light);\n\n    transition: 0.25s ease;\n    caret-color: var(--secondary);\n}\n\ninput:focus {\n    outline: none;\n    color: var(--secondary);\n    background: rgba(255,255,255,0.20);\n    border-color: var(--secondary);\n    box-shadow: 0 0 12px rgba(255,0,255,0.55);\n}\n\ninput::placeholder {\n    color: rgba(255, 0, 255, 0.45);\n}\n\n/* ================================================\n   ADD STUDENT / EDIT STUDENT BOXES\n================================================= */\n\n.add-student-box,\n.edit-form,\n.password-box {\n    background: rgba(255,255,255,0.05);\n    padding: 2rem;\n    border-radius: 20px;\n    border: 1px solid rgba(255,255,255,0.12);\n    backdrop-filter: blur(12px);\n    margin: 1.5rem 0;\n}\n\n.add-student-box h3,\n.edit-form h3,\n.password-box h2 {\n    margin-top: 0;\n    margin-bottom: 1rem;\n\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n}\n\n/* ================================================\n   TABLE (Students Management)\n================================================= */\n\ntable {\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: 1.5rem;\n\n    background: rgba(255, 255, 255, 0.03);\n    border-radius: 20px;\n    overflow: hidden;\n    backdrop-filter: blur(12px);\n    box-shadow: 0 0 20px rgba(0,255,255,0.10);\n}\n\nth, td {\n    text-align: center;\n}\n\nth {\n    background: rgba(255, 255, 255, 0.10);\n    color: var(--primary);\n    padding: 1.2rem;\n    font-size: 1.2rem;\n    border-bottom: 1px solid rgba(255,255,255,0.15);\n}\n\ntd {\n    padding: 1rem 1.2rem;\n    font-size: 1rem;\n    color: var(--light);\n    background: rgba(255, 255, 255, 0.025);\n    border-bottom: 1px solid rgba(255,255,255,0.08);\n}\n\ntr:last-child td {\n    border-bottom: none;\n}\n\ntr:hover td {\n    background: rgba(0, 255, 255, 0.10);\n}\n\n/* Center action buttons */\ntd button {\n    width: auto;\n    padding: 0.6rem 1.2rem;\n    margin: 0.3rem auto;\n    display: block;\n    font-size: 0.95rem;\n}\n\ntd button.danger {\n    background: linear-gradient(45deg, #ff0044, #ff00aa) !important;\n    color: var(--light) !important;\n    border-radius: 25px;\n    box-shadow: 0 0 10px rgba(255, 0, 120, 0.45);\n}\n\n/* ================================================\n   EDIT FORM\n================================================= */\n\n#editForm {\n    display: none;\n}\n\n/* ================================================\n   RESPONSIVE\n================================================= */\n\n@media (max-width: 600px) {\n    .header {\n        margin-left: 1rem;\n        padding: 1.5rem;\n    }\n    .nav {\n        margin: 1rem;\n        flex-direction: column;\n        gap: 1rem;\n    }\n    .welcome-box {\n        margin: 1rem;\n    }\n    .dashboard-grid {\n        padding: 1rem;\n    }\n}\n","path":null,"size_bytes":7169,"size_tokens":null},"src/common/css/main.css":{"content":"* {\n    margin: 0;\n    box-sizing: border-box;\n}\n\n:root {\n    --primary: #00ffff;\n    --secondary: #ff00ff;\n    --accent: #7c3aed;\n    --dark: #0a0a0f;\n    --darker: #050508;\n    --light: #ffffff;\n    --gray: #6b7280;\n    --success: #00ff88;\n}\n\nbody {\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n    background: var(--dark);\n    color: var(--light);\n    overflow-x: hidden;\n    line-height: 1.6;\n}\n\np a {\n    color: var(--accent); \n    text-decoration: none; \n    transition: color 0.3s ease;\n}\np a:hover {\n    color: var(--success); \n    text-decoration: none; \n    transition: color 0.3s ease;\n}\n\n/* Header */\nheader {\n    position: fixed;\n    top: 0;\n    width: 100%;\n    background: rgba(10, 10, 15, 0.9);\n    backdrop-filter: blur(20px);\n    z-index: 1000;\n    transition: all 0.3s ease;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n}\n\nnav {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 1rem 2rem;\n    max-width: 1200px;\n    margin: 0 auto;\n}\n\n.logo {\n    display: flex;\n    align-items: center;\n    gap: 0.8rem;\n    text-decoration: none;\n    transition: transform 0.3s ease;\n}\n\n.logo:hover {\n    transform: translateY(-2px);\n}\n\n.logo-icon {\n    width: 40px;\n    height: 40px;\n}\n\n.logo-text {\n    font-size: 1.2rem;\n    font-weight: bold;\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n}\n\n.nav-links {\n    display: flex;\n    list-style: none;\n    gap: 0.5rem;\n}\n\n.nav-links a {\n    color: rgba(255, 255, 255, 0.8);\n    text-decoration: none;\n    transition: all 0.3s ease;\n    position: relative;\n    padding: 0.6rem 1.2rem;\n    border-radius: 25px;\n    font-weight: 500;\n    font-size: 0.95rem;\n    background: transparent;\n}\n\n.nav-links a:hover {\n    color: var(--light);\n    background: rgba(255, 255, 255, 0.05);\n}\n\n.nav-links a.active {\n    color: var(--dark);\n    background: linear-gradient(45deg, var(--primary), var(--accent));\n    font-weight: 600;\n}\n\n.nav-links a::after {\n    content: '';\n    position: absolute;\n    bottom: -2px;\n    left: 50%;\n    transform: translateX(-50%);\n    width: 0;\n    height: 2px;\n    background: var(--primary);\n    transition: width 0.3s ease;\n    opacity: 0;\n}\n\n.nav-links a:hover::after {\n    width: 30px;\n    opacity: 1;\n}\n\n.nav-links a.active::after {\n    display: none;\n}\n\n.mobile-menu {\n    display: none;\n    flex-direction: column;\n    cursor: pointer;\n    z-index: 1001;\n    padding: 0.5rem;\n    border-radius: 8px;\n    transition: background 0.3s ease;\n}\n\n.mobile-menu:hover {\n    background: rgba(255, 255, 255, 0.05);\n}\n\n.mobile-menu span {\n    width: 25px;\n    height: 2px;\n    background: var(--light);\n    margin: 3px 0;\n    transition: 0.3s;\n    border-radius: 2px;\n}\n\n.mobile-menu.active span:nth-child(1) {\n    transform: rotate(-45deg) translate(-5px, 6px);\n}\n\n.mobile-menu.active span:nth-child(2) {\n    opacity: 0;\n}\n\n.mobile-menu.active span:nth-child(3) {\n    transform: rotate(45deg) translate(-5px, -6px);\n}\n\n.mobile-nav {\n    display: none;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100vh;\n    background: linear-gradient(135deg, rgba(10, 10, 15, 0.98), rgba(20, 20, 30, 0.98));\n    backdrop-filter: blur(20px);\n    z-index: 1000;\n    padding-top: 80px;\n}\n\n.mobile-nav.active {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-start;\n}\n\n.mobile-nav a {\n    color: rgba(255, 255, 255, 0.9);\n    text-decoration: none;\n    font-size: 1.2rem;\n    margin: 0.5rem 0;\n    padding: 1rem 2rem;\n    border-radius: 30px;\n    transition: all 0.3s ease;\n    background: rgba(255, 255, 255, 0.03);\n    backdrop-filter: blur(10px);\n    border: 1px solid rgba(255, 255, 255, 0.05);\n    min-width: 250px;\n    text-align: center;\n    font-weight: 500;\n    position: relative;\n    overflow: hidden;\n}\n\n.mobile-nav a::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.1), transparent);\n    transition: left 0.5s ease;\n}\n\n.mobile-nav a:hover::before {\n    left: 100%;\n}\n\n.mobile-nav a:hover {\n    background: rgba(255, 255, 255, 0.08);\n    border-color: rgba(0, 255, 255, 0.3);\n    color: var(--primary);\n    transform: scale(1.02);\n}\n\n.mobile-nav a.active {\n    background: linear-gradient(45deg, var(--primary), var(--accent));\n    color: var(--dark);\n    font-weight: 600;\n    border-color: transparent;\n}\n\n/* Hero Section */\n.hero {\n    height: 100vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n    position: relative;\n    overflow: hidden;\n}\n\n.hero-content {\n    max-width: 800px;\n    padding: 0 2rem;\n    z-index: 2;\n}\n\n.hero h1 {\n    font-size: clamp(2.5rem, 5vw, 4rem);\n    margin-top: 9rem;\n    margin-bottom: 1rem;\n    background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n    animation: glow 2s ease-in-out infinite alternate;\n}\n\n@keyframes glow {\n    from {\n        filter: drop-shadow(0 0 20px rgba(0, 255, 255, 0.3));\n    }\n    to {\n        filter: drop-shadow(0 0 30px rgba(255, 0, 255, 0.5));\n    }\n}\n\n.hero p {\n    font-size: 1.2rem;\n    color: var(--gray);\n    margin-bottom: 2rem;\n}\n\n/* Section Styles */\n.section {\n    padding: 5rem 2rem;\n    max-width: 1200px;\n    margin: 0 auto;\n}\n\n.section h2 {\n    font-size: clamp(2rem, 4vw, 3rem);\n    text-align: center;\n    margin-bottom: 3rem;\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n}\n\n.features-grid {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 2rem;\n}\n\n.feature-card {\n    background: rgba(255, 255, 255, 0.05);\n    backdrop-filter: blur(10px);\n    border-radius: 20px;\n    padding: 2rem;\n    text-align: center;\n    transition: all 0.3s ease;\n    max-width: 23.5rem;\n    border: 1px solid rgba(0, 255, 255, 0.1);\n    margin: 0 auto;\n}\n\n.feature-card:hover {\n    transform: translateY(-10px);\n    box-shadow: 0 20px 40px rgba(0, 255, 255, 0.2);\n    border-color: var(--primary);\n}\n\n.feature-icon {\n    width: 100px;\n    height: 100px;\n    border-radius: 50%;\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    margin: 0 auto 1rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 2rem;\n    color: var(--dark);\n}\n\n.feature-name {\n    font-size: 1.3rem;\n    font-weight: bold;\n    margin-bottom: 0.5rem;\n}\n\n.feature-description {\n    color: var(--primary);\n    margin-bottom: 1rem;\n}\n\n.feature-details {\n    color: var(--gray);\n    font-size: 0.9rem;\n}\n\n.login-section{\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-top: 3rem;\n    padding-bottom: 7rem;\n}\n\n/* Login Form Section */\n.login-form-section {\n    margin-top: 3rem;\n    padding: 3rem 2rem;\n    background: rgba(255, 255, 255, 0.03);\n    border-radius: 20px;\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    width: 35rem;\n}\n\n.login-container {\n    display: grid;\n    grid-template-columns: 1fr;\n    gap: 4rem;\n    max-width: 1000px;\n    margin: 0 auto;\n    align-items: center;\n}\n\n.login-form-column {\n    background: rgba(255, 255, 255, 0.05);\n    padding: 2rem;\n    border-radius: 15px;\n    border: 1px solid rgba(0, 255, 255, 0.1);\n    max-width: 30rem;\n}\n\n.login-form-title {\n    font-size: 1.5rem;\n    font-weight: bold;\n    margin-bottom: 1.5rem;\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n}\n\n.login-form {\n    display: flex;\n    flex-direction: column;\n    gap: 1.2rem;\n}\n\n.form-field {\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n}\n\n.form-field label {\n    color: var(--light);\n    font-size: 0.9rem;\n    font-weight: 500;\n}\n\n.form-field input {\n    padding: 0.8rem 1rem;\n    background: rgba(255, 255, 255, 0.08);\n    border: 1px solid rgba(255, 255, 255, 0.15);\n    border-radius: 10px;\n    color: var(--light);\n    font-size: 0.95rem;\n    font-family: inherit;\n    transition: all 0.3s ease;\n    width: 100%;\n    box-sizing: border-box;\n}\n\n.form-field input:focus {\n    outline: none;\n    border-color: var(--primary);\n    background: rgba(255, 255, 255, 0.12);\n    box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);\n}\n\n.login-submit-btn {\n    padding: 0.8rem 2rem;\n    background: linear-gradient(45deg, var(--primary), var(--accent));\n    border: none;\n    border-radius: 25px;\n    color: var(--dark);\n    font-size: 1rem;\n    font-weight: bold;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    margin-top: 0.5rem;\n    width: 100%;\n}\n\n.login-submit-btn:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 10px 25px rgba(0, 255, 255, 0.3);\n}\n\n/* Scroll-triggered animations */\n.animate-on-scroll {\n    opacity: 0;\n    transform: translateY(50px);\n    transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n}\n\n.animate-on-scroll.animated {\n    opacity: 1;\n    transform: translateY(0);\n}\n\n.animate-on-scroll.scale-up {\n    transform: scale(0.8);\n}\n\n.animate-on-scroll.scale-up.animated {\n    transform: scale(1);\n}\n\n.stagger-animation {\n    animation-delay: calc(var(--stagger) * 0.1s);\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n    .nav-links {\n        display: none;\n    }\n\n    .mobile-menu {\n        display: flex;\n    }\n\n    .login-container {\n        grid-template-columns: 1fr;\n        gap: 2rem;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: flex-start;\n    }\n\n    .login-form-column {\n        padding: 1.5rem;\n        width: 100%;\n    }\n    \n    .features-grid {\n        grid-template-columns: 1fr;\n    }\n    \n    .login-form-section {\n        width: 90%;\n    }\n}\n\n/* Password toggle styles */\n.password-wrapper {\n    position: relative;\n    width: 100%;\n}\n\n.password-toggle {\n    position: absolute;\n    right: 12px;\n    top: 50%;\n    transform: translateY(-50%);\n    background: transparent;\n    border: none;\n    color: var(--primary);\n    cursor: pointer;\n    font-size: 0.8rem;\n    font-weight: bold;\n    padding: 5px 8px;\n    z-index: 2;\n}\n\n.password-toggle:hover {\n    color: var(--secondary);\n    background: rgba(255, 255, 255, 0.05);\n    border-radius: 4px;\n}\n\n.password-wrapper input {\n    padding-right: 60px;\n}\n\n/* Error message styles */\n.error-message {\n    color: #ff4444;\n    font-size: 0.8rem;\n    margin-top: 5px;\n    display: block;\n    opacity: 0;\n    transform: translateY(-10px);\n    transition: all 0.3s ease;\n    height: 0;\n}\n\n.error-message.show {\n    opacity: 1;\n    transform: translateY(0);\n    height: auto;\n}\n\n.form-field.error input {\n    border-color: #ff4444 !important;\n    box-shadow: 0 0 10px rgba(255, 68, 68, 0.3) !important;\n}\n\n/* Loading button styles */\n.login-submit-btn {\n    position: relative;\n    overflow: hidden;\n}\n\n.login-submit-btn.loading .btn-text {\n    opacity: 0;\n}\n\n.btn-loader {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    display: none;\n    gap: 3px;\n}\n\n.login-submit-btn.loading .btn-loader {\n    display: flex;\n}\n\n.loader-bar {\n    width: 4px;\n    height: 15px;\n    background: var(--dark);\n    animation: loaderBar 1s ease-in-out infinite;\n}\n\n.loader-bar:nth-child(2) {\n    animation-delay: 0.1s;\n}\n\n.loader-bar:nth-child(3) {\n    animation-delay: 0.2s;\n}\n\n@keyframes loaderBar {\n    0%, 100% {\n        transform: scaleY(0.5);\n    }\n    50% {\n        transform: scaleY(1.5);\n    }\n}\n\n/* Success message styles */\n.success-message {\n    text-align: center;\n    padding: 2rem;\n    display: none;\n}\n\n.success-message.show {\n    display: block;\n    animation: fadeIn 0.5s ease;\n}\n\n.success-icon {\n    width: 60px;\n    height: 60px;\n    background: var(--success);\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 2rem;\n    font-weight: bold;\n    margin: 0 auto 1rem;\n    color: var(--dark);\n}\n\n.error-popup {\n    position: fixed;\n    top: 10px;\n    right: 10px;\n    background: red;\n    color: white;\n    padding: 10px;\n    z-index: 9999;\n    border-radius: 4px;\n}\n\n.logged-box {\n    margin-top: 20px;\n    padding: 15px;\n    background: rgba(255,255,255,0.1);\n    border-radius: 8px;\n    display: inline-block;\n}\n\n.admin-link {\n    color: #7c3aed;\n    text-decoration: none;\n    font-weight: bold;\n}\n\n.login-error-box {\n    background: #ffebee;\n    color: red;\n    padding: 10px;\n    border-radius: 4px;\n    margin-bottom: 15px;\n    text-align: center;\n    border-left: 4px solid red;\n}\n\n.login-success-box {\n    text-align: center;\n    padding: 20px;\n}\n\n.checkmark {\n    font-size: 48px;\n    color: #00ffff;\n}\n\n.login-success-buttons a {\n    background: #7c3aed;\n    color: white;\n    padding: 10px 20px;\n    border-radius: 5px;\n    text-decoration: none;\n}\n\n.login-success-buttons a:last-child {\n    background: transparent;\n    color: #ff00ff;\n    border: 1px solid #ff00ff;\n}\n\n\n@keyframes fadeIn {\n    from {\n        opacity: 0;\n        transform: translateY(20px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}","path":null,"size_bytes":13476,"size_tokens":null},"src/common/js/goBackButton.js":{"content":"document.addEventListener(\"DOMContentLoaded\", () => {\n    const goBackBtn = document.getElementById('go-back-btn');\n    if (!goBackBtn) return;\n    goBackBtn.addEventListener('click', () => {\n        if (document.referrer) {\n            window.location.href = document.referrer;\n        } else {\n            history.back();\n        }\n    });\n});\n","path":null,"size_bytes":346,"size_tokens":null},"src/weekly/admin.php":{"content":"<?php\nrequire_once __DIR__ . \"/../../config/Config.php\";\n\nif (!isLoggedIn() || !isAdmin()) {\n    header(\"Location: /login\");\n    exit();\n}\n\n?>\n\n\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Manage Weekly Breakdown</title>\n\n    <!-- FONTS -->\n\n    <!-- CSS FRAMEWORKS -->\n\n    <!-- CUSTOM CSS FILES -->\n    <link rel=\"stylesheet\" href=\"/src/common/css/background.css\">\n    <link rel=\"stylesheet\" href=\"/src/common/css/weekly-admin.css\">\n\n    <!-- JS FILES -->\n    <script src=\"/src/common/js/background.js\"></script>\n    <script src=\"/src/weekly/admin.js\" defer></script>\n    <script>\n    window.BACK_URL = <?= isAdmin() ? '\"/weekly/admin\"' : '\"/weekly/list\"' ?>;\n    </script>\n\n</head>\n\n<body id=\"main-content\">\n\n    <div class=\"bg-animation\">\n        <div class=\"neural-network\" id=\"neuralNetwork\"></div>\n        <div class=\"particles\" id=\"particles\"></div>\n    </div>\n\n    <header>\n        <button id=\"go-back-btn\"></button>\n        <h1>Manage Weekly Breakdown</h1>\n    </header>\n\n    <main>\n        <!-- Section 1: Add/Edit Week Form -->\n        <section>\n            <h2>Add a New Week</h2>\n            <form id=\"week-form\" action=\"#\">\n                <fieldset>\n                    <legend>Weekly Details</legend>\n\n                    <label for=\"week-title\">Week Title:</label>\n                    <input id=\"week-title\" type=\"text\" required placeholder=\"Week 1: Introduction to HTML\">\n\n                    <label for=\"week-start-date\">Start Date:</label>\n                    <input id=\"week-start-date\" type=\"date\" required>\n\n                    <label for=\"week-description\">Description:</label>\n                    <textarea id=\"week-description\" rows=\"5\"></textarea>\n\n                    <label for=\"week-links\">Links:</label>\n                    <textarea id=\"week-links\" rows=\"3\"></textarea>\n\n                    <div id=\"form-global-error\"></div>\n                    <button id=\"add-week\" type=\"submit\">Add Week</button>\n                </fieldset>\n            </form>\n        </section>\n\n\n        <!-- Section 2: Existing Weekly Entries -->\n        <section>\n            <h2>Current Weekly Breakdown</h2>\n            <table id=\"weeks-table\">\n                <thead>\n                    <tr>\n                        <th>Week Title</th>\n                        <th>Description</th>\n\n                        <th>Actions</th>\n                    </tr>\n                </thead>\n                <tbody id=\"weeks-tbody\">\n                    <!-- Dummy data row for demonstration -->\n                    <tr>\n                        <td>Week 1: Intro to HTML</td>\n                        <td>Learn the basics of HTML structure and elements</td>\n                        <td>\n                            <button>Edit</button>\n                            <button>Delete</button>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </section>\n    </main>\n\n    <!-- Modal -->\n    <div class=\"modal-overlay\" id=\"edit-modal-overlay\">\n        <div class=\"modal\">\n            <h2>Edit Week</h2>\n            <form id=\"edit-week-form\"> <label for=\"edit-week-title\">Week Title:</label> <input id=\"edit-week-title\"\n                    type=\"text\" required> <label for=\"edit-week-start-date\">Start Date:</label> <input\n                    id=\"edit-week-start-date\" type=\"date\" required> <label\n                    for=\"edit-week-description\">Description:</label> <textarea id=\"edit-week-description\"\n                    rows=\"4\"></textarea> <label for=\"edit-week-links\">Links:</label> <textarea id=\"edit-week-links\"\n                    rows=\"3\"></textarea>\n                <div style=\"margin-top: 1rem;\"> <button type=\"submit\">Save</button> <button type=\"button\"\n                        id=\"cancel-edit\">Cancel</button> </div>\n            </form>\n        </div>\n    </div>\n</body>\n\n</html>","path":null,"size_bytes":3951,"size_tokens":null},"src/common/js/main.js":{"content":"// Mobile menu toggle\nfunction toggleMenu() {\n    const mobileMenu = document.querySelector('.mobile-menu');\n    const mobileNav = document.getElementById('mobileNav');\n\n    if (mobileMenu && mobileNav) {\n        mobileMenu.classList.toggle('active');\n        mobileNav.classList.toggle('active');\n        document.body.style.overflow = mobileNav.classList.contains('active') ? 'hidden' : 'auto';\n    }\n}\n\nfunction closeMenu() {\n    const mobileMenu = document.querySelector('.mobile-menu');\n    const mobileNav = document.getElementById('mobileNav');\n\n    if (mobileMenu && mobileNav) {\n        mobileMenu.classList.remove('active');\n        mobileNav.classList.remove('active');\n        document.body.style.overflow = 'auto';\n    }\n}\n\n// Password toggle functionality\nfunction setupPasswordToggle() {\n    const passwordToggle = document.getElementById('passwordToggle');\n    const passwordInput = document.getElementById('password');\n\n    if (passwordToggle && passwordInput) {\n        passwordToggle.addEventListener('click', function() {\n            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';\n            passwordInput.setAttribute('type', type);\n            \n            const toggleText = this.querySelector('.toggle-text');\n            if (toggleText) {\n                toggleText.textContent = type === 'password' ? 'SHOW' : 'HIDE';\n            }\n        });\n    }\n}\n\n// Form validation\nfunction setupFormValidation() {\n    const loginForm = document.querySelector('.login-form');\n    if (!loginForm) return;\n\n    const usernameInput = document.getElementById('username');\n    const passwordInput = document.getElementById('password');\n    const usernameError = document.getElementById('usernameError');\n    const passwordError = document.getElementById('passwordError');\n\n    function validateForm() {\n        let isValid = true;\n\n        // Validate username\n        if (!usernameInput.value.trim()) {\n            showError(usernameError, 'Username is required');\n            isValid = false;\n        } else {\n            hideError(usernameError);\n        }\n\n        // Validate password\n        if (!passwordInput.value) {\n            showError(passwordError, 'Password is required');\n            isValid = false;\n        } else if (passwordInput.value.length < 8) {\n            showError(passwordError, 'Password must be at least 8 characters long');\n            isValid = false;\n        } else {\n            hideError(passwordError);\n        }\n\n        return isValid;\n    }\n\n    function showError(errorElement, message) {\n        if (errorElement) {\n            errorElement.textContent = message;\n            errorElement.style.display = 'block';\n            errorElement.style.opacity = '1';\n            \n            const formField = errorElement.closest('.form-field');\n            if (formField) {\n                formField.classList.add('error');\n            }\n        }\n    }\n\n    function hideError(errorElement) {\n        if (errorElement) {\n            errorElement.style.display = 'none';\n            errorElement.style.opacity = '0';\n            errorElement.textContent = '';\n            \n            const formField = errorElement.closest('.form-field');\n            if (formField) {\n                formField.classList.remove('error');\n            }\n        }\n    }\n\n    // Real-time validation\n    if (usernameInput) {\n        usernameInput.addEventListener('blur', function() {\n            if (!this.value.trim()) {\n                showError(usernameError, 'Username is required');\n            } else {\n                hideError(usernameError);\n            }\n        });\n\n        usernameInput.addEventListener('input', function() {\n            if (this.value.trim()) {\n                hideError(usernameError);\n            }\n        });\n    }\n\n    if (passwordInput) {\n        passwordInput.addEventListener('blur', function() {\n            if (!this.value) {\n                showError(passwordError, 'Password is required');\n            } else if (this.value.length < 8) {\n                showError(passwordError, 'Password must be at least 8 characters long');\n            } else {\n                hideError(passwordError);\n            }\n        });\n\n        passwordInput.addEventListener('input', function() {\n            if (this.value) {\n                if (this.value.length >= 8) {\n                    hideError(passwordError);\n                }\n            }\n        });\n    }\n\n    // Form submission validation\nloginForm.addEventListener('submit', function(e) {\n    if (!validateForm()) {\n        e.preventDefault();\n    }\n});\n\n}\n\n// Smooth scrolling for navigation links\nfunction setupSmoothScrolling() {\n    document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n        anchor.addEventListener('click', function (e) {\n            if (this.getAttribute('href') === '#login' && document.querySelector('.login-form')) {\n                return;\n            }\n            \n            e.preventDefault();\n            const target = document.querySelector(this.getAttribute('href'));\n            if (target) {\n                target.scrollIntoView({\n                    behavior: 'smooth',\n                    block: 'start'\n                });\n                closeMenu();\n            }\n        });\n    });\n}\n\n// Update active menu items on scroll\nfunction updateActiveMenuItem() {\n    const sections = document.querySelectorAll('section[id]');\n    const scrollPosition = window.scrollY + 100;\n\n    sections.forEach(section => {\n        const sectionTop = section.offsetTop;\n        const sectionHeight = section.offsetHeight;\n        const sectionId = section.getAttribute('id');\n\n        if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {\n            document.querySelectorAll('.nav-links a').forEach(link => {\n                link.classList.remove('active');\n                if (link.getAttribute('href') === `#${sectionId}`) {\n                    link.classList.add('active');\n                }\n            });\n\n            document.querySelectorAll('.mobile-nav a').forEach(link => {\n                link.classList.remove('active');\n                if (link.getAttribute('href') === `#${sectionId}`) {\n                    link.classList.add('active');\n                }\n            });\n        }\n    });\n}\n\n// Header scroll effect\nfunction setupHeaderScroll() {\n    window.addEventListener('scroll', () => {\n        const header = document.querySelector('header');\n        if (header) {\n            if (window.scrollY > 100) {\n                header.style.background = 'rgba(10, 10, 15, 0.95)';\n                header.style.borderBottom = '1px solid rgba(255, 255, 255, 0.1)';\n            } else {\n                header.style.background = 'rgba(10, 10, 15, 0.9)';\n                header.style.borderBottom = '1px solid rgba(255, 255, 255, 0.05)';\n            }\n            updateActiveMenuItem();\n        }\n    });\n}\n\n// Intersection Observer for scroll animations\nfunction initScrollAnimations() {\n    const observerOptions = {\n        threshold: 0.1,\n        rootMargin: '0px 0px -100px 0px'\n    };\n\n    const observer = new IntersectionObserver((entries) => {\n        entries.forEach(entry => {\n            if (entry.isIntersecting) {\n                entry.target.classList.add('animated');\n            }\n        });\n    }, observerOptions);\n\n    document.querySelectorAll('.section h2').forEach(heading => {\n        heading.classList.add('animate-on-scroll');\n    });\n\n    document.querySelectorAll('.feature-card').forEach((item, index) => {\n        item.style.setProperty('--stagger', index + 1);\n        item.classList.add('stagger-animation');\n    });\n\n    document.querySelectorAll('.animate-on-scroll').forEach(el => {\n        observer.observe(el);\n    });\n}\n\n// Initialize everything when DOM is loaded\ndocument.addEventListener('DOMContentLoaded', function() {\n    setupPasswordToggle();\n    // setupFormValidation();\n    setupSmoothScrolling();\n    setupHeaderScroll();\n    initScrollAnimations();\n    \n    // Close mobile menu when clicking outside\n    document.addEventListener('click', function(e) {\n        const mobileNav = document.getElementById('mobileNav');\n        const mobileMenu = document.querySelector('.mobile-menu');\n        \n        if (mobileNav && mobileNav.classList.contains('active') && \n            !mobileNav.contains(e.target) && \n            !mobileMenu.contains(e.target)) {\n            closeMenu();\n        }\n    });\n\n    document.addEventListener('keydown', function(e) {\n        if (e.key === 'Escape') {\n            closeMenu();\n        }\n    });\n});\n\nwindow.addEventListener('load', function() {\n    initScrollAnimations();\n});","path":null,"size_bytes":8702,"size_tokens":null},"replit.md":{"content":"# ITCS333 Course Page - Team 49\n\n## Overview\nA web-based course management system for the ITCS333 Internet Software Development course. Built with PHP and PostgreSQL, it provides functionality for students and administrators to manage course content, weekly breakdowns, assignments, resources, and discussions.\n\n## Project Structure\n```\n.\n config/\n    Config.php          # Database configuration and authentication helpers\n database/\n    course_page.sql     # Original MySQL schema\n    schema_postgres.sql # PostgreSQL schema for Replit\n src/\n    admin/              # Admin user management\n    assignments/        # Assignment management\n    auth/               # Authentication (login, dashboard, admin portal)\n    common/             # Shared CSS and JS files\n    discussion/         # Discussion boards\n    errors/             # Error pages\n    resources/          # Course resources management\n    weekly/             # Weekly breakdown management\n assets/                 # Fonts and images\n index.php               # Main router\n```\n\n## Tech Stack\n- **Backend**: PHP 8.2\n- **Database**: PostgreSQL (converted from MySQL)\n- **Frontend**: HTML, CSS, JavaScript with animated backgrounds\n\n## Running the Application\nThe application runs on port 5000 using PHP's built-in development server:\n```bash\nphp -S 0.0.0.0:5000\n```\n\n## Database\nUses PostgreSQL with environment variables:\n- DATABASE_URL, PGHOST, PGPORT, PGUSER, PGPASSWORD, PGDATABASE\n\n## Default Users\n- Admin: `admin` / `password123` (email: admin@example.com)\n- Instructor: `instructor1` / `password123`\n- Student: `student1` / `password123`\n\n## Key Routes\n- `/login` - Login page\n- `/dashboard` - User dashboard  \n- `/admin` - Admin portal\n- `/weekly/list` - Weekly breakdown list\n- `/weekly/details?id=X` - Weekly details page\n- `/weekly/admin` - Manage weekly content\n- `/resources/list` - Course resources\n- `/resources/details?id=X` - Resource details page\n- `/resources/admin` - Manage resources\n- `/assignments/list` - Assignments list\n- `/assignments/details?id=X` - Assignment details\n- `/assignments/admin` - Manage assignments\n- `/assignments/update?id=X` - Update assignment\n\n## API Routes\n- `/weekly/api/index.php` - Weekly API\n- `/resources/api/index.php` - Resources API\n- `/assignments/api/index.php` - Assignments API\n- `/api/auth` - Authentication API\n\n## Recent Changes\n- **2025-12-12**: Fixed static file serving in router\n  - Added static file handler to let PHP server serve CSS/JS/images directly\n  - Animated background now works on 404 error page and all pages\n- **2025-12-12**: Added instant form validation to Weekly admin\n  - Validates on blur and as-you-type (debounced)\n  - Date validation with year bounds (2020-2030)\n- **2025-12-12**: Fixed logout session handling\n  - Now checks if session already active before starting\n  - Fixed redirect path to use router\n- **2025-12-12**: Added animated background to all assignment pages\n- **2025-12-12**: Fixed PostgreSQL boolean comparison in resources API\n- **2025-12-12**: Fixed all path references across the codebase\n  - Converted all relative paths (../common/, ./api/) to absolute paths (/src/common/, /weekly/api/)\n  - Updated HTML back button links to use router paths\n  - Updated JS files to use absolute API paths\n  - Added router routes for API file access\n  - Added assignments/update route\n- **2025-12-12**: Migrated from MySQL to PostgreSQL for Replit compatibility\n- Updated Config.php to use environment variables for database connection\n- Fixed all include paths to use __DIR__ for proper routing\n- Fixed all CSS/JS resource paths to use absolute paths\n","path":null,"size_bytes":3787,"size_tokens":null},"src/auth/login.php":{"content":"<?php\nrequire_once __DIR__ . '/../../config/Config.php';\n\nerror_reporting(E_ALL);\nini_set('display_errors', 1);\n\nif (isset($_SESSION['user_id'])) {\n    if ($_SESSION['role'] === 'admin') {\n        header(\"Location: /admin\");\n        exit();\n    } else {\n        header(\"Location: /dashboard\");\n        exit();\n    }\n}\n$error = '';\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['login'])) {\n\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    try {\n        $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = ?\");\n        $stmt->execute([$username]);\n        $user = $stmt->fetch(PDO::FETCH_ASSOC);\n\n        if ($user && password_verify($password, $user['password_hash'])) {\n\n            // Set session\n            $_SESSION['user_id'] = $user['id'];\n            $_SESSION['username'] = $user['username'];\n            $_SESSION['role'] = $user['role'];\n\n            // Cookies\n            setcookie('user_id', $user['id'], time() + (86400 * 30), \"/\");\n            setcookie('username', $user['username'], time() + (86400 * 30), \"/\");\n            setcookie('role', $user['role'], time() + (86400 * 30), \"/\");\n\n            // REDIRECT based on role\n            if ($user['role'] === 'admin') {\n                header(\"Location: /admin\");\n                exit();\n            } else {\n                header(\"Location: /dashboard\");\n                exit();\n            }\n        } \n        else {\n            $error = \"Invalid username or password!\";\n        }\n\n    } catch (PDOException $e) {\n        $error = \"Database error: \" . $e->getMessage();\n    }\n}\n?>\n\n\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Web Dev Course Homepage</title>\n    <!-- CSS Files -->\n    <link rel=\"stylesheet\" href=\"/src/common/css/main.css\">\n    <link rel=\"stylesheet\" href=\"/src/common/css/background.css\">\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css\" />\n</head>\n\n<body>\n    <!-- Background Animation -->\n    <div class=\"bg-animation\">\n        <div class=\"neural-network\" id=\"neuralNetwork\"></div>\n        <div class=\"particles\" id=\"particles\"></div>\n    </div>\n\n    <!-- Header -->\n    <header>\n        <nav>\n            <a href=\"#home\" class=\"logo\">\n                <svg class=\"logo-icon\" viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <!-- Hexagon background -->\n                    <polygon points=\"50,5 85,25 85,65 50,85 15,65 15,25\" fill=\"none\" stroke=\"url(#gradientStroke)\"\n                        stroke-width=\"2\" />\n\n                    <!-- Neural network nodes -->\n                    <circle cx=\"50\" cy=\"30\" r=\"4\" fill=\"#00ffff\" />\n                    <circle cx=\"35\" cy=\"45\" r=\"4\" fill=\"#ff00ff\" />\n                    <circle cx=\"65\" cy=\"45\" r=\"4\" fill=\"#ff00ff\" />\n                    <circle cx=\"35\" cy=\"65\" r=\"4\" fill=\"#00ffff\" />\n                    <circle cx=\"65\" cy=\"65\" r=\"4\" fill=\"#00ffff\" />\n                    <circle cx=\"50\" cy=\"55\" r=\"5\" fill=\"#7c3aed\" />\n\n                    <!-- Connection lines -->\n                    <line x1=\"50\" y1=\"30\" x2=\"35\" y2=\"45\" stroke=\"#00ffff\" stroke-width=\"1\" opacity=\"0.5\" />\n                    <line x1=\"50\" y1=\"30\" x2=\"65\" y2=\"45\" stroke=\"#00ffff\" stroke-width=\"1\" opacity=\"0.5\" />\n                    <line x1=\"35\" y1=\"45\" x2=\"50\" y2=\"55\" stroke=\"#ff00ff\" stroke-width=\"1\" opacity=\"0.5\" />\n                    <line x1=\"65\" y1=\"45\" x2=\"50\" y2=\"55\" stroke=\"#ff00ff\" stroke-width=\"1\" opacity=\"0.5\" />\n                    <line x1=\"50\" y1=\"55\" x2=\"35\" y2=\"65\" stroke=\"#7c3aed\" stroke-width=\"1\" opacity=\"0.5\" />\n                    <line x1=\"50\" y1=\"55\" x2=\"65\" y2=\"65\" stroke=\"#7c3aed\" stroke-width=\"1\" opacity=\"0.5\" />\n\n                    <!-- Gradient definitions -->\n                    <defs>\n                        <linearGradient id=\"gradientStroke\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n                            <stop offset=\"0%\" style=\"stop-color:#00ffff;stop-opacity:1\" />\n                            <stop offset=\"50%\" style=\"stop-color:#ff00ff;stop-opacity:1\" />\n                            <stop offset=\"100%\" style=\"stop-color:#7c3aed;stop-opacity:1\" />\n                        </linearGradient>\n                    </defs>\n                </svg>\n                <span class=\"logo-text\"> ITCS333 - INTERNET SOFTWARE DEVELOPMENT</span>\n            </a>\n            <ul class=\"nav-links\">\n                <li><a href=\"#features\">FEATURES</a></li>\n                <li><a href=\"#login\">LOGIN</a></li>\n                <?php if (isset($_SESSION['user_id'])): ?>\n                    <li><a href=\"logout.php\">LOGOUT (<?php echo $_SESSION['username']; ?>)</a></li>\n                    <?php if ($_SESSION['role'] == 'admin'): ?>\n                        <li><a href=\"AdminPortal.php\">ADMIN</a></li>\n                    <?php endif; ?>\n                <?php endif; ?>\n            </ul>\n            <div class=\"mobile-menu\" onclick=\"toggleMenu()\">\n                <span></span>\n                <span></span>\n                <span></span>\n            </div>\n        </nav>\n        <!-- Mobile Navigation Menu -->\n        <div class=\"mobile-nav\" id=\"mobileNav\">\n            <a href=\"#features\" onclick=\"closeMenu()\">Features</a>\n            <a href=\"#login\" onclick=\"closeMenu()\">Login</a>\n            <?php if (isset($_SESSION['user_id'])): ?>\n                <a href=\"logout.php\" onclick=\"closeMenu()\">Logout (<?php echo $_SESSION['username']; ?>)</a>\n                <?php if ($_SESSION['role'] == 'admin'): ?>\n                    <a href=\"AdminPortal.php\" onclick=\"closeMenu()\">Admin</a>\n                <?php endif; ?>\n            <?php endif; ?>\n        </div>\n    </header>\n\n    <!-- Hero Section -->\n    <section id=\"home\" class=\"hero\">\n        <div class=\"hero-content\">\n            <h1> Welcome to the Web Development Course</h1>\n            <p>Go from beginner to builder. Learn the skills to create modern, responsive websites.</p>\n            <?php if (isset($_SESSION['user_id'])): ?>\n                <div style=\"margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px; display: inline-block;\">\n                    <h3 style=\"margin: 0; color: #00ffff;\">Hello, <?php echo $_SESSION['username']; ?>!</h3>\n                    <p style=\"margin: 5px 0 0 0; color: #ff00ff;\">Role: <?php echo $_SESSION['role']; ?></p>\n                    <?php if ($_SESSION['role'] == 'admin'): ?>\n                        <a href=\"AdminPortal.php\" style=\"color: #7c3aed; text-decoration: none; font-weight: bold;\"> Admin Panel</a>\n                    <?php endif; ?>\n                </div>\n            <?php endif; ?>\n        </div>\n    </section>\n\n    <!-- Features Section -->\n    <section id=\"features\" class=\"section\">\n        <h2 class=\"animate-on-scroll\"> Website Features </h2>\n        <div class=\"features-grid\">\n            <div class=\"feature-card animate-on-scroll scale-up stagger-animation\" style=\"--stagger: 1;\">\n                <div class=\"feature-icon\"><i class=\"fas fa-book\"></i></div>\n                <h3 class=\"feature-name\">Course Resources</h3>\n                <div class=\"feature-description\">Lecture notes, book chapters, slides, helpful links</div>\n                <p class=\"feature-details\">All your study goodies in one place! Peek, read, and leave comments to share\n                    thoughts with your classmates</p>\n            </div>\n            <div class=\"feature-card animate-on-scroll scale-up stagger-animation\" style=\"--stagger: 2;\">\n                <div class=\"feature-icon\"><i class=\"fas fa-calendar-alt\"></i></div>\n                <h3 class=\"feature-name\">Weekly Breakdown</h3>\n                <div class=\"feature-description\">Week-by-week topics, notes, exercises, links</div>\n                <p class=\"feature-details\">Your roadmap for the semester! Explore each week and never miss a beat</p>\n            </div>\n            <div class=\"feature-card animate-on-scroll scale-up stagger-animation\" style=\"--stagger: 3;\">\n                <div class=\"feature-icon\"><i class=\"fas fa-pencil-alt\"></i></div>\n                <h3 class=\"feature-name\">Assignments</h3>\n                <div class=\"feature-description\">Assignment titles, instructions, due dates, downloadable files</div>\n                <p class=\"feature-details\">Stay on top of your tasks! Check details, submit work, and ask questions if\n                    you get stuck</p>\n            </div>\n            <div class=\"feature-card animate-on-scroll scale-up stagger-animation\" style=\"--stagger: 4;\">\n                <div class=\"feature-icon\"><i class=\"fas fa-comments\"></i></div>\n                <h3 class=\"feature-name\">Discussion Boards</h3>\n                <div class=\"feature-description\">Topics, replies, comments, teacher guidance</div>\n                <p class=\"feature-details\">Chat, brainstorm, and ask questions! Jump into the conversation and make your\n                    voice heard</p>\n            </div>\n        </div>\n    </section>\n\n    <!-- Login Section -->\n<section id=\"login\" class=\"login-section\">\n    <div id=\"login-form-section\" class=\"login-form-section animate-on-scroll\">\n        <div class=\"login-container\">\n            <div class=\"login-form-column\">\n                <h3 class=\"login-form-title\">\n                    <?php if (isset($_SESSION['user_id'])): ?>\n                        Welcome back, <?php echo $_SESSION['username']; ?>!\n                    <?php else: ?>\n                        Welcome back!\n                    <?php endif; ?>\n                </h3>\n                \n                <?php if (!isset($_SESSION['user_id'])): ?>\n                    <form class=\"login-form\" method=\"POST\" novalidate>\n                        <div class=\"form-field\">\n                            <label for=\"username\">Username</label>\n                            <div class=\"input-wrapper\">\n                                <input type=\"text\" id=\"username\" name=\"username\" required placeholder=\"Enter your username\" autocomplete=\"username\"\n                                       value=\"<?php echo isset($_POST['username']) ? htmlspecialchars($_POST['username']) : ''; ?>\">\n                            </div>\n                            <span class=\"error-message\" id=\"usernameError\"></span>\n                        </div>\n\n                        <div class=\"form-field\">\n                            <label for=\"password\">Password</label>\n                            <div class=\"input-wrapper password-wrapper\">\n                                <input type=\"password\" id=\"password\" name=\"password\" required placeholder=\"Enter your password\" autocomplete=\"current-password\">\n                                <button type=\"button\" class=\"password-toggle\" id=\"passwordToggle\"\n                                    aria-label=\"Toggle password visibility\">\n                                    <span class=\"toggle-text\">SHOW</span>\n                                </button>\n                            </div>\n                            <span class=\"error-message\" id=\"passwordError\"></span>\n                        </div>\n\n                        <button type=\"submit\" name=\"login\" class=\"login-submit-btn\">\n                            <span class=\"btn-text\">Login</span>\n                            <div class=\"btn-loader\">\n                                <div class=\"loader-bar\"></div>\n                                <div class=\"loader-bar\"></div>\n                                <div class=\"loader-bar\"></div>\n                            </div>\n                        </button>\n                    </form>\n                <?php else: ?>\n                    <div style=\"text-align: center; padding: 20px;\">\n                        <div style=\"font-size: 48px; color: #00ffff; margin-bottom: 15px;\"></div>\n                        <h3 style=\"color: #00ffff; margin-bottom: 10px;\">You are logged in!</h3>\n                        <p style=\"color: #ff00ff; margin-bottom: 20px;\">Role: <?php echo $_SESSION['role']; ?></p>\n                        <div style=\"display: flex; gap: 10px; justify-content: center;\">\n                            <a href=\"dashboard.php\" style=\"background: #7c3aed; color: white; padding: 10px 20px; border-radius: 5px; text-decoration: none;\">Go to Dashboard</a>\n                            <a href=\"logout.php\" style=\"background: transparent; color: #ff00ff; padding: 10px 20px; border-radius: 5px; text-decoration: none; border: 1px solid #ff00ff;\">Logout</a>\n                        </div>\n                    </div>\n                <?php endif; ?>\n            </div>\n        </div>\n    </div>\n</section>\n\n    <!-- JavaScript Files -->\n    <script src=\"/src/common/js/background.js\"></script>\n    <script src=\"/src/common/js/main.js\"></script>\n    \n</body>\n\n</html>","path":null,"size_bytes":12836,"size_tokens":null},"src/weekly/admin.js":{"content":"\nlet weeks = [];\nlet currentEditId = null;\n\n\n\nconst weekForm = document.getElementById(\"week-form\");\nconst weeksTableBody = document.getElementById(\"weeks-tbody\");\nconst mainContent = document.getElementById(\"main-content\");\n\nconst editModalOverlay = document.getElementById(\"edit-modal-overlay\");\nconst editForm = document.getElementById(\"edit-week-form\");\n\nconst editTitleInput = document.getElementById(\"edit-week-title\");\nconst editStartDateInput = document.getElementById(\"edit-week-start-date\");\nconst editDescriptionInput = document.getElementById(\"edit-week-description\");\nconst editLinksInput = document.getElementById(\"edit-week-links\");\nconst cancelEditBtn = document.getElementById(\"cancel-edit\");\n\nconst globalErrorBox = document.getElementById(\"form-global-error\");\n\n\n\nfunction debounce(func, delay = 800) {\n  let timer;\n  return (...args) => {\n    clearTimeout(timer);\n    timer = setTimeout(() => func.apply(this, args), delay);\n  };\n}\n\n\n\nfunction isValidURL(url) {\n  try {\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n\n\nfunction showError(input, message) {\n  let errorElem = input.nextElementSibling;\n\n  if (!errorElem || !errorElem.classList.contains(\"error-message\")) {\n    errorElem = document.createElement(\"div\");\n    errorElem.className = \"error-message\";\n    errorElem.style.color = \"red\";\n    errorElem.style.fontSize = \"0.85rem\";\n    errorElem.style.marginTop = \"0.2rem\";\n    input.parentNode.insertBefore(errorElem, input.nextSibling);\n  }\n\n  errorElem.textContent = message;\n}\n\nfunction clearError(input) {\n  const errorElem = input.nextElementSibling;\n  if (errorElem && errorElem.classList.contains(\"error-message\")) {\n    errorElem.textContent = \"\";\n  }\n}\n\n\n\nfunction showGlobalError(message) {\n  globalErrorBox.textContent = message;\n  globalErrorBox.style.display = \"block\";\n}\n\nfunction clearGlobalError() {\n  globalErrorBox.textContent = \"\";\n  globalErrorBox.style.display = \"none\";\n}\n\n\n\nfunction validateField(input, type = \"text\") {\n  const value = input.value.trim();\n\n  if (type === \"text\") {\n    if (value.length < 3) {\n      showError(input, \"This field must contain at least 3 characters.\");\n      return false;\n    }\n    clearError(input);\n    return true;\n  }\n\n  if (type === \"date\") {\n    if (!value) {\n      showError(input, \"Please select a date.\");\n      return false;\n    }\n    \n    const selectedDate = new Date(value);\n    const year = selectedDate.getFullYear();\n    const minYear = 2020;\n    const maxYear = 2030;\n    \n    if (year < minYear || year > maxYear) {\n      showError(input, `Date must be between ${minYear} and ${maxYear}.`);\n      return false;\n    }\n    \n    clearError(input);\n    return true;\n  }\n\n  if (type === \"links\") {\n    const links = value\n      .split(\"\\n\")\n      .map(l => l.trim())\n      .filter(l => l !== \"\");\n\n    for (let link of links) {\n      if (!isValidURL(link)) {\n        showError(input, \"One or more links are invalid URLs.\");\n        return false;\n      }\n    }\n    clearError(input);\n    return true;\n  }\n\n  return true;\n}\n\nfunction validateForm(fields) {\n  let valid = true;\n  fields.forEach(({ input, type }) => {\n    if (!validateField(input, type)) valid = false;\n  });\n  return valid;\n}\n\n\n\nfunction createWeekRow(week) {\n  const row = document.createElement(\"tr\");\n\n  const titleCell = document.createElement(\"td\");\n  const link = document.createElement(\"a\");\n  link.href = `/weekly/details?id=${week.id}`;\n  link.textContent = week.title;\n  link.className = \"week-title-link\";\n  titleCell.appendChild(link);\n\n  const descCell = document.createElement(\"td\");\n  descCell.textContent = week.description;\n\n  const actionsCell = document.createElement(\"td\");\n  actionsCell.className = \"actions\";\n\n  const editBtn = document.createElement(\"button\");\n  editBtn.textContent = \"Edit\";\n  editBtn.className = \"edit-btn\";\n  editBtn.dataset.id = week.id;\n\n  const deleteBtn = document.createElement(\"button\");\n  deleteBtn.textContent = \"Delete\";\n  deleteBtn.className = \"delete-btn delete-week-btn\";\n  deleteBtn.dataset.id = week.id;\n\n  actionsCell.append(editBtn, deleteBtn);\n  row.append(titleCell, descCell, actionsCell);\n\n  return row;\n}\n\n\n\nfunction renderTable() {\n  weeksTableBody.innerHTML = \"\";\n  weeks.forEach(week => weeksTableBody.appendChild(createWeekRow(week)));\n}\n\n\n\nasync function handleAddWeek(event) {\n  event.preventDefault();\n\n  const title = document.getElementById(\"week-title\");\n  const date = document.getElementById(\"week-start-date\");\n  const description = document.getElementById(\"week-description\");\n  const links = document.getElementById(\"week-links\");\n\n  const fields = [\n    { input: title, type: \"text\" },\n    { input: date, type: \"date\" },\n    { input: description, type: \"text\" },\n    { input: links, type: \"links\" }\n  ];\n\n  if (!validateForm(fields)) {\n    showGlobalError(\"Fix the highlighted fields.\");\n    return;\n  }\n\n  clearGlobalError();\n\n  const nextWeekId =\n    weeks.length > 0 ? Math.max(...weeks.map(w => w.week_id)) + 1 : 1;\n\n  const payload = {\n    week_id: nextWeekId,\n    title: title.value.trim(),\n    description: description.value.trim(),\n    start_date: date.value.trim(),\n    links: links.value.split(\"\\n\").map(v => v.trim()).filter(v => v !== \"\")\n  };\n\n  try {\n    const res = await fetch(\"/api/weekly\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(payload)\n    });\n\n    const result = await res.json();\n\n    if (!result.success) {\n      showGlobalError(result.error || \"Error saving week.\");\n      return;\n    }\n\n    const created = result.data;\n\n    weeks.push({\n      id: Number(created.id),\n      week_id: Number(created.week_id),\n      title: created.title,\n      startDate: created.start_date,\n      description: created.description,\n      links: created.links\n    });\n\n    renderTable();\n    weekForm.reset();\n  } catch {\n    showGlobalError(\"Server error when saving week.\");\n  }\n}\n\n\n\nfunction handleTableClick(event) {\n  const target = event.target;\n\n  if (target.classList.contains(\"delete-btn\")) {\n    const id = Number(target.dataset.id);\n\n    fetch(`/api/weekly?id=${id}`, { method: \"DELETE\" })\n      .then(res => res.json())\n      .then(result => {\n        if (!result.success) {\n          alert(\"Delete failed: \" + result.error);\n          return;\n        }\n\n        weeks = weeks.filter(w => w.id !== id);\n        renderTable();\n      })\n      .catch(() => alert(\"Server error deleting week.\"));\n  }\n\n  if (target.classList.contains(\"edit-btn\")) {\n    const id = Number(target.dataset.id);\n    const week = weeks.find(w => w.id === id);\n\n    if (!week) return;\n\n    currentEditId = id;\n\n    editTitleInput.value = week.title;\n    editStartDateInput.value = week.startDate;\n    editDescriptionInput.value = week.description;\n    editLinksInput.value = week.links.join(\"\\n\");\n\n    editModalOverlay.style.display = \"flex\";\n    mainContent.classList.add(\"dimmed\");\n  }\n}\n\n\n\nasync function handleEditSubmit(event) {\n  event.preventDefault();\n\n  const fields = [\n    { input: editTitleInput, type: \"text\" },\n    { input: editStartDateInput, type: \"date\" },\n    { input: editDescriptionInput, type: \"text\" },\n    { input: editLinksInput, type: \"links\" }\n  ];\n\n  if (!validateForm(fields)) return;\n\n\n  const oldWeek = weeks.find(w => w.id === currentEditId);\n\n  const payload = {\n    id: Number(currentEditId),\n    week_id: oldWeek.week_id,\n    title: editTitleInput.value.trim(),\n    start_date: editStartDateInput.value.trim(),\n    description: editDescriptionInput.value.trim(),\n    links: editLinksInput.value\n      .split(\"\\n\")\n      .map(v => v.trim())\n      .filter(v => v !== \"\")\n  };\n\n  try {\n    const res = await fetch(\"/api/weekly\", {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(payload)\n    });\n\n    const result = await res.json();\n\n    if (!result.success) {\n      alert(\"Update failed: \" + result.error);\n      return;\n    }\n\n    const updated = result.data;\n\n    weeks = weeks.map(w =>\n      w.id === updated.id\n        ? {\n          id: updated.id,\n          week_id: updated.week_id,\n          title: updated.title,\n          startDate: updated.start_date,\n          description: updated.description,\n          links: updated.links\n        }\n        : w\n    );\n\n    renderTable();\n    closeEditModal();\n\n  } catch (e) {\n    alert(\"Server error updating week.\");\n  }\n}\n\n\n\nfunction closeEditModal() {\n  editModalOverlay.style.display = \"none\";\n  mainContent.classList.remove(\"dimmed\");\n  currentEditId = null;\n}\n\n\n\nasync function importJsonWeeksOnce(jsonWeeks) {\n  if (localStorage.getItem(\"weeksImported\") === \"yes\") {\n    console.log(\" Import skipped  already done once.\");\n    return;\n  }\n\n  try {\n    const res = await fetch(\"/api/weekly\");\n    const dbResult = await res.json();\n\n    const existingWeeks = dbResult.success ? dbResult.data : [];\n    const existingKeys = new Set();\n    let maxWeekId = 0;\n\n    existingWeeks.forEach(w => {\n      const key = (w.title || \"\").toLowerCase().trim() + \"|\" + (w.start_date || \"\").trim();\n      existingKeys.add(key);\n\n      const wid = Number(w.week_id);\n      if (!isNaN(wid) && wid > maxWeekId) maxWeekId = wid;\n    });\n\n    let nextWeekId = maxWeekId + 1;\n\n    for (const w of jsonWeeks) {\n      const startDate = w.startDate || w.start_date || \"\";\n      const key = (w.title || \"\").toLowerCase().trim() + \"|\" + String(startDate).trim();\n\n      if (existingKeys.has(key)) continue;\n\n      const payload = {\n        week_id: nextWeekId,\n        title: w.title,\n        description: w.description,\n        start_date: startDate,\n        links: w.links || []\n      };\n\n      const insertRes = await fetch(\"/api/weekly\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload)\n      });\n\n      const insertResult = await insertRes.json();\n\n      if (insertResult.success) {\n        nextWeekId++;\n      }\n    }\n\n    localStorage.setItem(\"weeksImported\", \"yes\");\n    console.log(\" JSON weeks imported once and locked.\");\n  } catch (err) {\n    console.error(\"Import error:\", err);\n  }\n}\n\n\nasync function importJsonCommentsOnce() {\n  if (localStorage.getItem(\"commentsImported\") === \"yes\") {\n    console.log(\" Comments already imported once.\");\n    return;\n  }\n\n  try {\n\n    const res = await fetch(\"/api/weekly/comments\");\n    const allComments = await res.json();\n\n\n    const usersRes = await fetch(\"/api/weekly?resource=users\");\n    const usersData = await usersRes.json();\n\n    const users = usersData.success ? usersData.data : [];\n\n    const userMap = {};\n    users.forEach(u => {\n      if (!u || !u.username) return;\n      userMap[u.username.trim().toLowerCase()] = u.id;\n    });\n\n\n    for (const weekKey in allComments) {\n      const weekId = Number(weekKey.replace(\"week_\", \"\"));\n      const comments = allComments[weekKey];\n\n      if (!Array.isArray(comments)) continue;\n\n      for (const c of comments) {\n\n        if (!c || !c.author || !c.text) continue;\n\n        const author = c.author.trim().toLowerCase();\n        const text = c.text.trim();\n\n        const userId = userMap[author];\n        if (!userId) {\n          console.warn(\" Unknown user, skipping:\", c.author);\n          continue;\n        }\n\n\n        await fetch(\"/api/weekly?action=weekly_comments\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            week_id: weekId,\n            user_id: userId,\n            comment_text: text\n          })\n        });\n      }\n    }\n\n    localStorage.setItem(\"commentsImported\", \"yes\");\n    console.log(\" Comments imported successfully (one time only).\");\n\n  } catch (err) {\n    console.error(\" Comments import error:\", err);\n  }\n}\n\n\n\n\n\nasync function loadAndInitialize() {\n  try {\n    const response = await fetch(\"/api/weekly/weeks\");\n    const jsonWeeks = await response.json();\n\n    await importJsonWeeksOnce(jsonWeeks);\n    await importJsonCommentsOnce();\n\n    const res = await fetch(\"/api/weekly\");\n    const result = await res.json();\n\n    if (result.success) {\n      weeks = result.data.map(w => ({\n        id: Number(w.id),\n        week_id: Number(w.week_id),\n        title: w.title,\n        startDate: w.start_date,\n        description: w.description,\n        links: w.links\n      }));\n    }\n  } catch {\n    weeks = [];\n  }\n\n  renderTable();\n\n  weekForm.addEventListener(\"submit\", handleAddWeek);\n  editForm.addEventListener(\"submit\", handleEditSubmit);\n  weeksTableBody.addEventListener(\"click\", handleTableClick);\n  cancelEditBtn.addEventListener(\"click\", closeEditModal);\n\n  // Add instant validation for add form fields\n  const titleInput = document.getElementById(\"week-title\");\n  const dateInput = document.getElementById(\"week-start-date\");\n  const descInput = document.getElementById(\"week-description\");\n  const linksInput = document.getElementById(\"week-links\");\n\n  titleInput.addEventListener(\"blur\", () => validateField(titleInput, \"text\"));\n  titleInput.addEventListener(\"input\", debounce(() => validateField(titleInput, \"text\")));\n  \n  dateInput.addEventListener(\"blur\", () => validateField(dateInput, \"date\"));\n  dateInput.addEventListener(\"change\", () => validateField(dateInput, \"date\"));\n  \n  descInput.addEventListener(\"blur\", () => validateField(descInput, \"text\"));\n  descInput.addEventListener(\"input\", debounce(() => validateField(descInput, \"text\")));\n  \n  linksInput.addEventListener(\"blur\", () => validateField(linksInput, \"links\"));\n  linksInput.addEventListener(\"input\", debounce(() => validateField(linksInput, \"links\")));\n\n  // Add instant validation for edit form fields\n  editTitleInput.addEventListener(\"blur\", () => validateField(editTitleInput, \"text\"));\n  editTitleInput.addEventListener(\"input\", debounce(() => validateField(editTitleInput, \"text\")));\n  \n  editStartDateInput.addEventListener(\"blur\", () => validateField(editStartDateInput, \"date\"));\n  editStartDateInput.addEventListener(\"change\", () => validateField(editStartDateInput, \"date\"));\n  \n  editDescriptionInput.addEventListener(\"blur\", () => validateField(editDescriptionInput, \"text\"));\n  editDescriptionInput.addEventListener(\"input\", debounce(() => validateField(editDescriptionInput, \"text\")));\n  \n  editLinksInput.addEventListener(\"blur\", () => validateField(editLinksInput, \"links\"));\n  editLinksInput.addEventListener(\"input\", debounce(() => validateField(editLinksInput, \"links\")));\n}\n\nloadAndInitialize();\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const btn = document.getElementById(\"go-back-btn\");\n  if (!btn) return;\n\n  btn.addEventListener(\"click\", () => {\n    window.location.href = \"/admin\";\n  });\n});\n","path":null,"size_bytes":14676,"size_tokens":null},"src/discussion/topic.js":{"content":"/*\n  Requirement: Populate the single topic page and manage replies.\n\n  Instructions:\n  1. Link this file to `topic.html` using:\n     <script src=\"topic.js\" defer></script>\n\n  2. In `topic.html`, add the following IDs:\n     - To the <h1>: `id=\"topic-subject\"`\n     - To the <article id=\"original-post\">:\n       - Add a <p> with `id=\"op-message\"` for the message text.\n       - Add a <footer> with `id=\"op-footer\"` for the metadata.\n     - To the <div> for the list of replies: `id=\"reply-list-container\"`\n     - To the \"Post a Reply\" <form>: `id=\"reply-form\"`\n\n  3. Implement the TODOs below.\n*/\n\n// --- Global Data Store ---\nlet currentTopicId = null;\nlet currentReplies = []; // Will hold replies for *this* topic\n\n// --- Element Selections ---\n// TODO: Select all the elements you added IDs for in step 2.\n\n// --- Functions ---\n\n/**\n * TODO: Implement the getTopicIdFromURL function.\n * It should:\n * 1. Get the query string from `window.location.search`.\n * 2. Use the `URLSearchParams` object to get the value of the 'id' parameter.\n * 3. Return the id.\n */\nfunction getTopicIdFromURL() {\n  // ... your implementation here ...\n}\n\n/**\n * TODO: Implement the renderOriginalPost function.\n * It takes one topic object.\n * It should:\n * 1. Set the `textContent` of `topicSubject` to the topic's subject.\n * 2. Set the `textContent` of `opMessage` to the topic's message.\n * 3. Set the `textContent` of `opFooter` to \"Posted by: {author} on {date}\".\n * 4. (Optional) Add a \"Delete\" button with `data-id=\"${topic.id}\"` to the OP.\n */\nfunction renderOriginalPost(topic) {\n  // ... your implementation here ...\n}\n\n/**\n * TODO: Implement the createReplyArticle function.\n * It takes one reply object {id, author, date, text}.\n * It should return an <article> element matching the structure in `topic.html`.\n * - Include a <p> for the `text`.\n * - Include a <footer> for the `author` and `date`.\n * - Include a \"Delete\" button with class \"delete-reply-btn\" and `data-id=\"${id}\"`.\n */\nfunction createReplyArticle(reply) {\n  // ... your implementation here ...\n}\n\n/**\n * TODO: Implement the renderReplies function.\n * It should:\n * 1. Clear the `replyListContainer`.\n * 2. Loop through the global `currentReplies` array.\n * 3. For each reply, call `createReplyArticle()`, and\n * append the resulting <article> to `replyListContainer`.\n */\nfunction renderReplies() {\n  // ... your implementation here ...\n}\n\n/**\n * TODO: Implement the handleAddReply function.\n * This is the event handler for the `replyForm` 'submit' event.\n * It should:\n * 1. Prevent the form's default submission.\n * 2. Get the text from `newReplyText.value`.\n * 3. If the text is empty, return.\n * 4. Create a new reply object:\n * {\n * id: `reply_${Date.now()}`,\n * author: 'Student' (hardcoded),\n * date: new Date().toISOString().split('T')[0],\n * text: (reply text value)\n * }\n * 5. Add this new reply to the global `currentReplies` array (in-memory only).\n * 6. Call `renderReplies()` to refresh the list.\n * 7. Clear the `newReplyText` textarea.\n */\nfunction handleAddReply(event) {\n  // ... your implementation here ...\n}\n\n/**\n * TODO: Implement the handleReplyListClick function.\n * This is an event listener on the `replyListContainer` (for delegation).\n * It should:\n * 1. Check if the clicked element (`event.target`) has the class \"delete-reply-btn\".\n * 2. If it does, get the `data-id` attribute from the button.\n * 3. Update the global `currentReplies` array by filtering out the reply\n * with the matching ID (in-memory only).\n * 4. Call `renderReplies()` to refresh the list.\n */\nfunction handleReplyListClick(event) {\n  // ... your implementation here ...\n}\n\n/**\n * TODO: Implement an `initializePage` function.\n * This function needs to be 'async'.\n * It should:\n * 1. Get the `currentTopicId` by calling `getTopicIdFromURL()`.\n * 2. If no ID is found, set `topicSubject.textContent = \"Topic not found.\"` and stop.\n * 3. `fetch` both 'topics.json' and 'replies.json' (you can use `Promise.all`).\n * 4. Parse both JSON responses.\n * 5. Find the correct topic from the topics array using the `currentTopicId`.\n * 6. Get the correct replies array from the replies object using the `currentTopicId`.\n * Store this in the global `currentReplies` variable. (If no replies exist, use an empty array).\n * 7. If the topic is found:\n * - Call `renderOriginalPost()` with the topic object.\n * - Call `renderReplies()` to show the initial replies.\n * - Add the 'submit' event listener to `replyForm` (calls `handleAddReply`).\n * - Add the 'click' event listener to `replyListContainer` (calls `handleReplyListClick`).\n * 8. If the topic is not found, display an error in `topicSubject`.\n */\nasync function initializePage() {\n  // ... your implementation here ...\n}\n\n// --- Initial Page Load ---\ninitializePage();\n","path":null,"size_bytes":4780,"size_tokens":null},"src/common/css/background.css":{"content":"/* Background Animation */\n.bg-animation {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    z-index: -1;\n    background: linear-gradient(45deg, var(--dark) 0%, var(--darker) 50%, var(--dark) 100%);\n}\n\n.neural-network {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    opacity: 0.1;\n}\n\n.node {\n    position: absolute;\n    width: 4px;\n    height: 4px;\n    background: var(--primary);\n    border-radius: 50%;\n    animation: pulse 4s infinite;\n}\n\n.connection {\n    position: absolute;\n    height: 1px;\n    background: linear-gradient(90deg, var(--primary), transparent);\n    animation: flow 6s infinite;\n}\n\n@keyframes pulse {\n    0%, 100% {\n        opacity: 0.3;\n        transform: scale(1);\n    }\n    50% {\n        opacity: 1;\n        transform: scale(1.2);\n    }\n}\n\n@keyframes flow {\n    0% {\n        opacity: 0;\n        transform: scaleX(0);\n    }\n    50% {\n        opacity: 1;\n        transform: scaleX(1);\n    }\n    100% {\n        opacity: 0;\n        transform: scaleX(0);\n    }\n}\n\n/* Particles */\n.particles {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n}\n\n.particle {\n    position: absolute;\n    width: 2px;\n    height: 2px;\n    background: var(--primary);\n    border-radius: 50%;\n    animation: float 10s infinite;\n}\n\n@keyframes float {\n    0%, 100% {\n        transform: translateY(100vh) translateX(0);\n        opacity: 0;\n    }\n    10% {\n        opacity: 1;\n    }\n    90% {\n        opacity: 1;\n    }\n    100% {\n        transform: translateY(-100px) translateX(100px);\n        opacity: 0;\n    }\n}","path":null,"size_bytes":1639,"size_tokens":null},"src/discussion/board.js":{"content":"/*\n  Requirement: Make the \"Discussion Board\" page interactive.\n\n  Instructions:\n  1. Link this file to `board.html` (or `baord.html`) using:\n     <script src=\"board.js\" defer></script>\n  \n  2. In `board.html`, add an `id=\"topic-list-container\"` to the 'div'\n     that holds the list of topic articles.\n  \n  3. Implement the TODOs below.\n*/\n\n// --- Global Data Store ---\n// This will hold the topics loaded from the JSON file.\nlet topics = [];\n\n// --- Element Selections ---\n// TODO: Select the new topic form ('#new-topic-form').\n\n// TODO: Select the topic list container ('#topic-list-container').\n\n// --- Functions ---\n\n/**\n * TODO: Implement the createTopicArticle function.\n * It takes one topic object {id, subject, author, date}.\n * It should return an <article> element matching the structure in `board.html`.\n * - The main link's `href` MUST be `topic.html?id=${id}`.\n * - The footer should contain the author and date.\n * - The actions div should contain an \"Edit\" button and a \"Delete\" button.\n * - The \"Delete\" button should have a class \"delete-btn\" and `data-id=\"${id}\"`.\n */\nfunction createTopicArticle(topic) {\n  // ... your implementation here ...\n}\n\n/**\n * TODO: Implement the renderTopics function.\n * It should:\n * 1. Clear the `topicListContainer`.\n * 2. Loop through the global `topics` array.\n * 3. For each topic, call `createTopicArticle()`, and\n * append the resulting <article> to `topicListContainer`.\n */\nfunction renderTopics() {\n  // ... your implementation here ...\n}\n\n/**\n * TODO: Implement the handleCreateTopic function.\n * This is the event handler for the form's 'submit' event.\n * It should:\n * 1. Prevent the form's default submission.\n * 2. Get the values from the '#topic-subject' and '#topic-message' inputs.\n * 3. Create a new topic object with the structure:\n * {\n * id: `topic_${Date.now()}`,\n * subject: (subject value),\n * message: (message value),\n * author: 'Student' (use a hardcoded author for this exercise),\n * date: new Date().toISOString().split('T')[0] // Gets today's date YYYY-MM-DD\n * }\n * 4. Add this new topic object to the global `topics` array (in-memory only).\n * 5. Call `renderTopics()` to refresh the list.\n * 6. Reset the form.\n */\nfunction handleCreateTopic(event) {\n  // ... your implementation here ...\n}\n\n/**\n * TODO: Implement the handleTopicListClick function.\n * This is an event listener on the `topicListContainer` (for delegation).\n * It should:\n * 1. Check if the clicked element (`event.target`) has the class \"delete-btn\".\n * 2. If it does, get the `data-id` attribute from the button.\n * 3. Update the global `topics` array by filtering out the topic\n * with the matching ID (in-memory only).\n * 4. Call `renderTopics()` to refresh the list.\n */\nfunction handleTopicListClick(event) {\n  // ... your implementation here ...\n}\n\n/**\n * TODO: Implement the loadAndInitialize function.\n * This function needs to be 'async'.\n * It should:\n * 1. Use `fetch()` to get data from 'topics.json'.\n * 2. Parse the JSON response and store the result in the global `topics` array.\n * 3. Call `renderTopics()` to populate the list for the first time.\n * 4. Add the 'submit' event listener to `newTopicForm` (calls `handleCreateTopic`).\n * 5. Add the 'click' event listener to `topicListContainer` (calls `handleTopicListClick`).\n */\nasync function loadAndInitialize() {\n  // ... your implementation here ...\n}\n\n// --- Initial Page Load ---\n// Call the main async function to start the application.\nloadAndInitialize();\n","path":null,"size_bytes":3485,"size_tokens":null},"README.md":{"content":"[![Review Assignment Due Date](https://classroom.github.com/assets/deadline-readme-button-22041afd0340ce965d47ae6ef1cefeee28c7c493a6346c4f15d667ab976d596c.svg)](https://classroom.github.com/a/p4UBLUhf)\n[![Open in Visual Studio Code](https://classroom.github.com/assets/open-in-vscode-2e0aaae1b6195c2367325f4f02e2d04e9abb55f0b24a779b69b11b9e10269abc.svg)](https://classroom.github.com/online_ide?assignment_repo_id=20973172&assignment_repo_type=AssignmentRepo)\n\n#  ITCS333 Course Page - Team 49\n\n##  Team Members\n\n|  Student Name                              |  Student ID |  GitHub Username   |  GitHub Email                 |\n|----------------------------------------------|--------------|-------------------|--------------------------------|\n| Malak Zakareya Husain                         | 202208286    | MalakZakareya      | malakl7assan@gmail.com         |\n| Fatema Ali Ahmed Alkomaish                    | 202208354    | FatemaAliAhmed     | f2a0t0k4@gmail.com             |\n| Manar Ali Jaafar Shaikh Yusuf                 | 202208628    | manar-alshaikh     | manar_alshaik@hotmail.com      |\n| Taqwa Sayed Mahdi Khalil Ali Abdulla         | 202208441    | Taqwa-Abdulla      | taqwasat@gmail.com             |\n\n##  Task Assignment\n\n|  Task                   |  Owner             |  Responsibilities                       |\n|---------------------------|--------------------|-----------------------------------------|\n| **Task 1**              | FatemaAliAhmed      | Homepage, Admin Portal & User Management |\n| **Task 2**              | MalakZakareya       | Course Resources & Materials            |\n| **Task 3**              | manar-alshaikh      | Weekly Breakdown & Schedule             |\n| **Task 4**              | Taqwa-Abdulla       | Assignments & Submissions               |\n| **Task 5**              | Collaborative work  | General Discussion Boards               |\n\n## A link to your live, hosted application on Replit.\n","path":null,"size_bytes":2002,"size_tokens":null},"src/discussion/api/index.php":{"content":"<?php\n/**\n * Discussion Board API\n * \n * This is a RESTful API that handles all CRUD operations for the discussion board.\n * It manages both discussion topics and their replies.\n * It uses PDO to interact with a MySQL database.\n * \n * Database Table Structures (for reference):\n * \n * Table: topics\n * Columns:\n *   - id (INT, PRIMARY KEY, AUTO_INCREMENT)\n *   - topic_id (VARCHAR(50), UNIQUE) - The topic's unique identifier (e.g., \"topic_1234567890\")\n *   - subject (VARCHAR(255)) - The topic subject/title\n *   - message (TEXT) - The main topic message\n *   - author (VARCHAR(100)) - The author's name\n *   - created_at (TIMESTAMP) - When the topic was created\n * \n * Table: replies\n * Columns:\n *   - id (INT, PRIMARY KEY, AUTO_INCREMENT)\n *   - reply_id (VARCHAR(50), UNIQUE) - The reply's unique identifier (e.g., \"reply_1234567890\")\n *   - topic_id (VARCHAR(50)) - Foreign key to topics.topic_id\n *   - text (TEXT) - The reply message\n *   - author (VARCHAR(100)) - The reply author's name\n *   - created_at (TIMESTAMP) - When the reply was created\n * \n * API Endpoints:\n * \n * Topics:\n *   GET    /api/discussion.php?resource=topics              - Get all topics (with optional search)\n *   GET    /api/discussion.php?resource=topics&id={id}      - Get single topic\n *   POST   /api/discussion.php?resource=topics              - Create new topic\n *   PUT    /api/discussion.php?resource=topics              - Update a topic\n *   DELETE /api/discussion.php?resource=topics&id={id}      - Delete a topic\n * \n * Replies:\n *   GET    /api/discussion.php?resource=replies&topic_id={id} - Get all replies for a topic\n *   POST   /api/discussion.php?resource=replies              - Create new reply\n *   DELETE /api/discussion.php?resource=replies&id={id}      - Delete a reply\n * \n * Response Format: JSON\n */\n\n// TODO: Set headers for JSON response and CORS\n// Set Content-Type to application/json\n// Allow cross-origin requests (CORS) if needed\n// Allow specific HTTP methods (GET, POST, PUT, DELETE, OPTIONS)\n// Allow specific headers (Content-Type, Authorization)\n\n\n// TODO: Handle preflight OPTIONS request\n// If the request method is OPTIONS, return 200 status and exit\n\n\n// TODO: Include the database connection class\n// Assume the Database class has a method getConnection() that returns a PDO instance\n\n\n// TODO: Get the PDO database connection\n// $db = $database->getConnection();\n\n\n// TODO: Get the HTTP request method\n// Use $_SERVER['REQUEST_METHOD']\n\n\n// TODO: Get the request body for POST and PUT requests\n// Use file_get_contents('php://input') to get raw POST data\n// Decode JSON data using json_decode()\n\n\n// TODO: Parse query parameters for filtering and searching\n\n\n// ============================================================================\n// TOPICS FUNCTIONS\n// ============================================================================\n\n/**\n * Function: Get all topics or search for specific topics\n * Method: GET\n * \n * Query Parameters:\n *   - search: Optional search term to filter by subject, message, or author\n *   - sort: Optional field to sort by (subject, author, created_at)\n *   - order: Optional sort order (asc or desc, default: desc)\n */\nfunction getAllTopics($db) {\n    // TODO: Initialize base SQL query\n    // Select topic_id, subject, message, author, and created_at (formatted as date)\n    \n    // TODO: Initialize an array to hold bound parameters\n    \n    // TODO: Check if search parameter exists in $_GET\n    // If yes, add WHERE clause using LIKE for subject, message, OR author\n    // Add the search term to the params array\n    \n    // TODO: Add ORDER BY clause\n    // Check for sort and order parameters in $_GET\n    // Validate the sort field (only allow: subject, author, created_at)\n    // Validate order (only allow: asc, desc)\n    // Default to ordering by created_at DESC\n    \n    // TODO: Prepare the SQL statement\n    \n    // TODO: Bind parameters if search was used\n    // Loop through $params array and bind each parameter\n    \n    // TODO: Execute the query\n    \n    // TODO: Fetch all results as an associative array\n    \n    // TODO: Return JSON response with success status and data\n    // Call sendResponse() helper function or echo json_encode directly\n}\n\n\n/**\n * Function: Get a single topic by topic_id\n * Method: GET\n * \n * Query Parameters:\n *   - id: The topic's unique identifier\n */\nfunction getTopicById($db, $topicId) {\n    // TODO: Validate that topicId is provided\n    // If empty, return error with 400 status\n    \n    // TODO: Prepare SQL query to select topic by topic_id\n    // Select topic_id, subject, message, author, and created_at\n    \n    // TODO: Prepare and bind the topic_id parameter\n    \n    // TODO: Execute the query\n    \n    // TODO: Fetch the result\n    \n    // TODO: Check if topic exists\n    // If topic found, return success response with topic data\n    // If not found, return error with 404 status\n}\n\n\n/**\n * Function: Create a new topic\n * Method: POST\n * \n * Required JSON Body:\n *   - topic_id: Unique identifier (e.g., \"topic_1234567890\")\n *   - subject: Topic subject/title\n *   - message: Main topic message\n *   - author: Author's name\n */\nfunction createTopic($db, $data) {\n    // TODO: Validate required fields\n    // Check if topic_id, subject, message, and author are provided\n    // If any required field is missing, return error with 400 status\n    \n    // TODO: Sanitize input data\n    // Trim whitespace from all string fields\n    // Use the sanitizeInput() helper function\n    \n    // TODO: Check if topic_id already exists\n    // Prepare and execute a SELECT query to check for duplicate\n    // If duplicate found, return error with 409 status (Conflict)\n    \n    // TODO: Prepare INSERT query\n    // Insert topic_id, subject, message, and author\n    // The created_at field should auto-populate with CURRENT_TIMESTAMP\n    \n    // TODO: Prepare the statement and bind parameters\n    // Bind all the sanitized values\n    \n    // TODO: Execute the query\n    \n    // TODO: Check if insert was successful\n    // If yes, return success response with 201 status (Created)\n    // Include the topic_id in the response\n    // If no, return error with 500 status\n}\n\n\n/**\n * Function: Update an existing topic\n * Method: PUT\n * \n * Required JSON Body:\n *   - topic_id: The topic's unique identifier\n *   - subject: Updated subject (optional)\n *   - message: Updated message (optional)\n */\nfunction updateTopic($db, $data) {\n    // TODO: Validate that topic_id is provided\n    // If not provided, return error with 400 status\n    \n    // TODO: Check if topic exists\n    // Prepare and execute a SELECT query\n    // If not found, return error with 404 status\n    \n    // TODO: Build UPDATE query dynamically based on provided fields\n    // Only update fields that are provided in the request\n    \n    // TODO: Check if there are any fields to update\n    // If $updates array is empty, return error\n    \n    // TODO: Complete the UPDATE query\n    \n    // TODO: Prepare statement and bind parameters\n    // Bind all parameters from the $params array\n    \n    // TODO: Execute the query\n    \n    // TODO: Check if update was successful\n    // If yes, return success response\n    // If no rows affected, return appropriate message\n    // If error, return error with 500 status\n}\n\n\n/**\n * Function: Delete a topic\n * Method: DELETE\n * \n * Query Parameters:\n *   - id: The topic's unique identifier\n */\nfunction deleteTopic($db, $topicId) {\n    // TODO: Validate that topicId is provided\n    // If not, return error with 400 status\n    \n    // TODO: Check if topic exists\n    // Prepare and execute a SELECT query\n    // If not found, return error with 404 status\n    \n    // TODO: Delete associated replies first (foreign key constraint)\n    // Prepare DELETE query for replies table\n    \n    // TODO: Prepare DELETE query for the topic\n    \n    // TODO: Prepare, bind, and execute\n    \n    // TODO: Check if delete was successful\n    // If yes, return success response\n    // If no, return error with 500 status\n}\n\n\n// ============================================================================\n// REPLIES FUNCTIONS\n// ============================================================================\n\n/**\n * Function: Get all replies for a specific topic\n * Method: GET\n * \n * Query Parameters:\n *   - topic_id: The topic's unique identifier\n */\nfunction getRepliesByTopicId($db, $topicId) {\n    // TODO: Validate that topicId is provided\n    // If not provided, return error with 400 status\n    \n    // TODO: Prepare SQL query to select all replies for the topic\n    // Select reply_id, topic_id, text, author, and created_at (formatted as date)\n    // Order by created_at ASC (oldest first)\n    \n    // TODO: Prepare and bind the topic_id parameter\n    \n    // TODO: Execute the query\n    \n    // TODO: Fetch all results as an associative array\n    \n    // TODO: Return JSON response\n    // Even if no replies found, return empty array (not an error)\n}\n\n\n/**\n * Function: Create a new reply\n * Method: POST\n * \n * Required JSON Body:\n *   - reply_id: Unique identifier (e.g., \"reply_1234567890\")\n *   - topic_id: The parent topic's identifier\n *   - text: Reply message text\n *   - author: Author's name\n */\nfunction createReply($db, $data) {\n    // TODO: Validate required fields\n    // Check if reply_id, topic_id, text, and author are provided\n    // If any field is missing, return error with 400 status\n    \n    // TODO: Sanitize input data\n    // Trim whitespace from all fields\n    \n    // TODO: Verify that the parent topic exists\n    // Prepare and execute SELECT query on topics table\n    // If topic doesn't exist, return error with 404 status (can't reply to non-existent topic)\n    \n    // TODO: Check if reply_id already exists\n    // Prepare and execute SELECT query to check for duplicate\n    // If duplicate found, return error with 409 status\n    \n    // TODO: Prepare INSERT query\n    // Insert reply_id, topic_id, text, and author\n    \n    // TODO: Prepare statement and bind parameters\n    \n    // TODO: Execute the query\n    \n    // TODO: Check if insert was successful\n    // If yes, return success response with 201 status\n    // Include the reply_id in the response\n    // If no, return error with 500 status\n}\n\n\n/**\n * Function: Delete a reply\n * Method: DELETE\n * \n * Query Parameters:\n *   - id: The reply's unique identifier\n */\nfunction deleteReply($db, $replyId) {\n    // TODO: Validate that replyId is provided\n    // If not, return error with 400 status\n    \n    // TODO: Check if reply exists\n    // Prepare and execute SELECT query\n    // If not found, return error with 404 status\n    \n    // TODO: Prepare DELETE query\n    \n    // TODO: Prepare, bind, and execute\n    \n    // TODO: Check if delete was successful\n    // If yes, return success response\n    // If no, return error with 500 status\n}\n\n\n// ============================================================================\n// MAIN REQUEST ROUTER\n// ============================================================================\n\ntry {\n    // TODO: Route the request based on resource and HTTP method\n    \n    // TODO: For GET requests, check for 'id' parameter in $_GET\n    \n    // TODO: For DELETE requests, get id from query parameter or request body\n    \n    // TODO: For unsupported methods, return 405 Method Not Allowed\n    \n    // TODO: For invalid resources, return 400 Bad Request\n    \n} catch (PDOException $e) {\n    // TODO: Handle database errors\n    // DO NOT expose the actual error message to the client (security risk)\n    // Log the error for debugging (optional)\n    // Return generic error response with 500 status\n    \n} catch (Exception $e) {\n    // TODO: Handle general errors\n    // Log the error for debugging\n    // Return error response with 500 status\n}\n\n\n// ============================================================================\n// HELPER FUNCTIONS\n// ============================================================================\n\n/**\n * Helper function to send JSON response and exit\n * \n * @param mixed $data - Data to send (will be JSON encoded)\n * @param int $statusCode - HTTP status code (default: 200)\n */\nfunction sendResponse($data, $statusCode = 200) {\n    // TODO: Set HTTP response code\n    \n    // TODO: Echo JSON encoded data\n    // Make sure to handle JSON encoding errors\n    \n    // TODO: Exit to prevent further execution\n}\n\n\n/**\n * Helper function to sanitize string input\n * \n * @param string $data - Data to sanitize\n * @return string - Sanitized data\n */\nfunction sanitizeInput($data) {\n    // TODO: Check if data is a string\n    // If not, return as is or convert to string\n    \n    // TODO: Trim whitespace from both ends\n    \n    // TODO: Remove HTML and PHP tags\n    \n    // TODO: Convert special characters to HTML entities (prevents XSS)\n    \n    // TODO: Return sanitized data\n}\n\n\n/**\n * Helper function to validate resource name\n * \n * @param string $resource - Resource name to validate\n * @return bool - True if valid, false otherwise\n */\nfunction isValidResource($resource) {\n    // TODO: Define allowed resources\n    \n    // TODO: Check if resource is in the allowed list\n}\n\n?>\n","path":null,"size_bytes":13146,"size_tokens":null},"src/resources/list.php":{"content":"<!--\n  Student View - Course Resources (Read Only)\n-->\n<?php\nrequire_once __DIR__ . \"/../../config/Config.php\";\n\nif (!isLoggedIn() || !isStudent()) {\n    header(\"Location: /login\");\n    exit();\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n     <meta charset=\"UTF-8\">\n     <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n     <title>Course Resources</title>\n\n     <!-- CSS FRAMEWORK (Optional) -->\n     <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/pico-css@1.5.10/dist/pico.min.css\">\n\n     <!-- CUSTOM CSS (Optional) -->\n     <style>\n        main {\n            width: 90%;\n            max-width: 900px;\n            margin: auto;\n            padding-top: 20px;\n        }\n\n        article {\n            margin-bottom: 20px;\n        }\n     </style>\n\n     <!-- JS -->\n     <link rel=\"stylesheet\" href=\"/src/common/css/background.css\">\n<link rel=\"stylesheet\" href=\"/src/common/css/weekly-list.css\">\n\n<script src=\"/src/common/js/background.js\"></script>\n<script src=\"/src/common/js/goBackButton.js\" defer></script>\n<script src=\"/src/resources/list.js\" defer></script>\n\n</head>\n\n<body>\n<div class=\"bg-animation\">\n    <div class=\"neural-network\" id=\"neuralNetwork\"></div>\n    <div class=\"particles\" id=\"particles\"></div>\n</div>\n\n <header>\n        <button id=\"go-back-btn\"></button>\n     <h1>Course Resources</h1>\n </header>\n\n <main>\n    \n     <!-- REQUIRED SECTION ID -->\n     <section id=\"resource-list-section\">\n         <!-- JavaScript (list.js) will insert resources here -->\n     </section>\n </main>\n\n</body>\n</html>\n\n","path":null,"size_bytes":1554,"size_tokens":null},"src/weekly/api/index.php":{"content":"<?php\n/**\n * Weekly Course Breakdown API (Corrected Version)\n * Stores ALL user-typed text RAW (title, description, comments, replies)\n * Escaping happens ONLY on the frontend (safe with JS .textContent)\n */\n\nheader(\"Content-Type: application/json\");\nheader(\"Access-Control-Allow-Origin: *\");\nheader(\"Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS\");\nheader(\"Access-Control-Allow-Headers: Content-Type, Authorization\");\n\nif ($_SERVER['REQUEST_METHOD'] === 'OPTIONS') {\n    http_response_code(200);\n    exit();\n}\n\nrequire_once __DIR__ . \"/../../../config/Config.php\";\n\n$method = $_SERVER['REQUEST_METHOD'];\n$query  = $_GET;\n$input  = json_decode(file_get_contents('php://input'), true);\n\n/* ===========================================================\n   RESPONSE HELPERS\n=========================================================== */\nfunction sendResponse($data, $statusCode = 200) {\n    http_response_code($statusCode);\n    echo json_encode($data);\n    exit();\n}\n\nfunction sendError($msg, $statusCode = 400) {\n    sendResponse([\"success\" => false, \"error\" => $msg], $statusCode);\n}\n\n/* ===========================================================\n   NOTE: WE NO LONGER ESCAPE TEXT HERE.\n   All text is stored RAW so <html> stays <html>.\n=========================================================== */\n\nfunction cleanInt($v) {\n    return intval($v);\n}\n\n/* ===========================================================\n   GET USERS (for comment importer)\n=========================================================== */\nif ($method === \"GET\" && ($query[\"resource\"] ?? \"\") === \"users\") {\n    try {\n        $stmt = $conn->prepare(\"SELECT id, username FROM users\");\n        $stmt->execute();\n        $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);\n        sendResponse([\"success\" => true, \"data\" => $rows]);\n    } catch (PDOException $e) {\n        sendError(\"Database error: \" . $e->getMessage(), 500);\n    }\n}\n\n/* ===========================================================\n   GET ALL WEEKS\n=========================================================== */\nfunction getAllWeeks($conn) {\n    $sql = \"\n        SELECT wb.id, wb.week_id, wb.title, wb.description, wb.links,\n               wb.start_date, wb.created_by, u.username AS created_by_name,\n               wb.created_at, wb.updated_at\n        FROM weekly_breakdown wb\n        LEFT JOIN users u ON wb.created_by = u.id\n        ORDER BY wb.week_id ASC\n    \";\n\n    try {\n        $stmt = $conn->prepare($sql);\n        $stmt->execute();\n        $weeks = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n        foreach ($weeks as &$w) {\n            $w[\"links\"] = json_decode($w[\"links\"], true) ?? [];\n        }\n\n        sendResponse([\"success\" => true, \"data\" => $weeks]);\n    } catch (PDOException $e) {\n        sendError(\"Database error: \" . $e->getMessage(), 500);\n    }\n}\n\n/* ===========================================================\n   GET WEEK BY ID\n=========================================================== */\nfunction getWeekById($conn, $id) {\n    if (!$id || !is_numeric($id)) sendError(\"Valid ID required\");\n\n    $sql = \"SELECT * FROM weekly_breakdown WHERE id = ? OR week_id = ? LIMIT 1\";\n\n    try {\n        $stmt = $conn->prepare($sql);\n        $stmt->execute([$id, $id]);\n        $row = $stmt->fetch(PDO::FETCH_ASSOC);\n\n        if (!$row) sendError(\"Week not found\", 404);\n\n        $row[\"links\"] = json_decode($row[\"links\"], true) ?? [];\n\n        sendResponse([\"success\" => true, \"data\" => $row]);\n    } catch (PDOException $e) {\n        sendError(\"Database error: \" . $e->getMessage(), 500);\n    }\n}\n\n/* ===========================================================\n   CREATE WEEK (STORE TEXT RAW)\n=========================================================== */\nfunction createWeek($conn, $d) {\n    foreach ([\"week_id\",\"title\",\"description\",\"start_date\"] as $f) {\n        if (!isset($d[$f])) sendError(\"Missing field: $f\");\n    }\n\n    $week_id = cleanInt($d[\"week_id\"]);\n    $title   = trim($d[\"title\"]);         // RAW text\n    $desc    = trim($d[\"description\"]);   // RAW text\n    $date    = trim($d[\"start_date\"]);    // RAW\n    $created = 1;\n\n    $check = $conn->prepare(\"SELECT id FROM weekly_breakdown WHERE week_id = ?\");\n    $check->execute([$week_id]);\n    if ($check->fetch()) sendError(\"Week ID already exists\", 409);\n\n    $links = isset($d[\"links\"]) && is_array($d[\"links\"])\n        ? json_encode($d[\"links\"])\n        : \"[]\";\n\n    $sql = \"\n        INSERT INTO weekly_breakdown (week_id, title, description, links, start_date, created_by)\n        VALUES (?, ?, ?, ?, ?, ?)\n    \";\n\n    try {\n        $stmt = $conn->prepare($sql);\n        $stmt->execute([$week_id, $title, $desc, $links, $date, $created]);\n        getWeekById($conn, $conn->lastInsertId());\n    } catch (PDOException $e) {\n        sendError(\"Database error: \" . $e->getMessage(), 500);\n    }\n}\n\n/* ===========================================================\n   UPDATE WEEK (RAW TEXT)\n=========================================================== */\nfunction updateWeek($conn, $d) {\n    if (!isset($d[\"id\"])) sendError(\"Week ID required\");\n\n    $id = cleanInt($d[\"id\"]);\n\n    $check = $conn->prepare(\"SELECT id FROM weekly_breakdown WHERE id = ?\");\n    $check->execute([$id]);\n    if (!$check->fetch()) sendError(\"Week not found\", 404);\n\n    $set = [];\n    $params = [];\n\n    if (isset($d[\"week_id\"])) {\n        $set[] = \"week_id = ?\";\n        $params[] = cleanInt($d[\"week_id\"]);\n    }\n\n    if (isset($d[\"title\"])) {\n        $set[] = \"title = ?\";\n        $params[] = trim($d[\"title\"]);  \n    }\n\n    if (isset($d[\"description\"])) {\n        $set[] = \"description = ?\";\n        $params[] = trim($d[\"description\"]);  \n    }\n\n    if (isset($d[\"start_date\"])) {\n        $set[] = \"start_date = ?\";\n        $params[] = trim($d[\"start_date\"]);  \n    }\n\n    if (isset($d[\"links\"])) {\n        $set[] = \"links = ?\";\n        $params[] = json_encode($d[\"links\"]);\n    }\n\n    if (!$set) sendError(\"No fields to update\");\n\n    $sql = \"UPDATE weekly_breakdown SET \".implode(\", \", $set).\", updated_at = NOW() WHERE id = ?\";\n    $params[] = $id;\n\n    try {\n        $stmt = $conn->prepare($sql);\n        $stmt->execute($params);\n        getWeekById($conn, $id);\n    } catch (PDOException $e) {\n        sendError(\"Database error: \" . $e->getMessage(), 500);\n    }\n}\n\n/* ===========================================================\n   DELETE WEEK\n=========================================================== */\nfunction deleteWeek($conn, $id) {\n    if (!$id) sendError(\"ID required\");\n\n    try {\n        $stmt = $conn->prepare(\"DELETE FROM weekly_breakdown WHERE id = ?\");\n        $stmt->execute([$id]);\n\n        sendResponse([\"success\" => true, \"message\" => \"Week deleted\"]);\n    } catch (PDOException $e) {\n        sendError(\"Database error: \" . $e->getMessage(), 500);\n    }\n}\n\n/* ===========================================================\n   GET COMMENTS FOR A WEEK\n=========================================================== */\nfunction getCommentsForWeek($conn, $week_id) {\n    if (!$week_id) sendError(\"Missing week_id\");\n\n    try {\n        $stmt = $conn->prepare(\"\n            SELECT wc.*, u.username \n            FROM weekly_comments wc\n            JOIN users u ON wc.user_id = u.id\n            WHERE wc.week_id = ?\n            ORDER BY wc.created_at ASC\n        \");\n        $stmt->execute([$week_id]);\n        $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n        sendResponse([\"success\" => true, \"data\" => $rows]);\n    } catch (PDOException $e) {\n        sendError(\"DB error: \" . $e->getMessage(), 500);\n    }\n}\n\n/* ===========================================================\n   ROUTER\n=========================================================== */\n\n// GET\nif ($method === \"GET\") {\n\n    if (($query[\"resource\"] ?? \"\") === \"weekly_comments\") {\n        getCommentsForWeek($conn, $query[\"week_id\"] ?? null);\n    }\n    elseif (isset($query[\"id\"])) {\n        getWeekById($conn, $query[\"id\"]);\n    }\n    elseif (isset($query[\"week_id\"])) {\n        getWeekById($conn, $query[\"week_id\"]);\n    }\n    else {\n        getAllWeeks($conn);\n    }\n}\n\n// DELETE COMMENT\nelseif ($method === 'DELETE' && ($query['action'] ?? '') === 'delete_comment') {\n\n    $commentId = cleanInt($query['id'] ?? 0);\n\n    $stmt = $conn->prepare(\"DELETE FROM weekly_comments WHERE id = ?\");\n    $success = $stmt->execute([$commentId]);\n\n    sendResponse([\n        \"success\" => $success,\n        \"message\" => $success ? \"Comment deleted\" : \"Delete failed\"\n    ]);\n}\n\n// POST: ADD COMMENT\nelseif ($method === \"POST\" && ($query[\"action\"] ?? \"\") === \"weekly_comments\") {\n\n    if (!is_array($input)) sendError(\"Invalid JSON\");\n\n    foreach ([\"week_id\", \"user_id\", \"comment_text\"] as $field) {\n        if (!isset($input[$field])) sendError(\"Missing field: $field\", 422);\n    }\n\n    $week_id  = cleanInt($input[\"week_id\"]);\n    $user_id  = cleanInt($input[\"user_id\"]);\n    $text     = trim($input[\"comment_text\"]); // RAW text\n    $parentId = isset($input[\"parent_comment_id\"]) ? cleanInt($input[\"parent_comment_id\"]) : null;\n\n    try {\n        $stmt = $conn->prepare(\"\n            INSERT INTO weekly_comments (week_id, user_id, comment_text, parent_comment_id)\n            VALUES (?, ?, ?, ?)\n        \");\n        $stmt->execute([$week_id, $user_id, $text, $parentId]);\n\n        sendResponse([\"success\" => true, \"id\" => $conn->lastInsertId()]);\n    }\n    catch (PDOException $e) {\n        sendError(\"DB error inserting comment: \" . $e->getMessage(), 500);\n    }\n}\n\n// POST: CREATE WEEK\nelseif ($method === \"POST\") {\n    createWeek($conn, $input);\n}\n\n// PUT: UPDATE WEEK\nelseif ($method === \"PUT\") {\n    updateWeek($conn, $input);\n}\n\n// DELETE WEEK\nelseif ($method === \"DELETE\") {\n    deleteWeek($conn, $query[\"id\"] ?? 0);\n}\n\n// INVALID METHOD\nelse {\n    sendError(\"Method not allowed\", 405);\n}\n\n?>\n","path":null,"size_bytes":9763,"size_tokens":null},"src/common/css/weekly-details.css":{"content":"\n\n:root {\n    --primary: #00ffff;\n    --secondary: #ff00ff;\n    --accent: #7c3aed;\n    --dark: #0a0a0f;\n    --darker: #050508;\n    --light: #ffffff;\n    --gray: #9ca3af;\n\n    --pink: #ff6bbd;\n    --pink-hover: #ff3e9c;\n}\n\n\nbody {\n    font-family: 'Segoe UI', Tahoma, sans-serif;\n    background: var(--darker);\n    color: var(--light);\n    margin: 0;\n    padding: 0;\n}\n\n\nheader {\n    display: flex;\n    align-items: center;\n    gap: 2.5rem;\n    padding: 2rem;\n    padding-bottom: 1rem;\n    margin-left: 3.5rem;\n}\n\n#go-back-btn {\n    width: 45px;\n    height: 45px;\n    background: linear-gradient(45deg, var(--primary), var(--accent));\n    color: var(--dark);\n    border: none;\n    border-radius: 50%;\n    cursor: pointer;\n    font-size: 1.5rem;\n    font-weight: bold;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: 0.25s ease;\n}\n\n#go-back-btn:hover {\n    transform: translateX(-4px);\n    box-shadow: 0 0 15px rgba(0,255,255,0.6);\n}\n\nheader h1 {\n    font-size: 2.4rem;\n    margin: 0;\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    animation: glowTitle 1.6s ease-in-out infinite alternate;\n}\n\n@keyframes glowTitle {\n    from { filter: drop-shadow(0 0 10px rgba(0,255,255,0.4)); }\n    to   { filter: drop-shadow(0 0 18px rgba(255,0,255,0.5)); }\n}\n\n\nmain {\n    max-width: 1100px;\n    margin: 0 auto;\n    padding: 2rem;\n}\n\n\narticle {\n    background: rgba(255,255,255,0.05);\n    padding: 2rem;\n    border-radius: 18px;\n    border: 1px solid rgba(255,255,255,0.12);\n    backdrop-filter: blur(12px);\n    box-shadow: 0 0 20px rgba(0,255,255,0.1);\n    margin-bottom: 2rem;\n}\n\narticle h2 {\n    margin-top: 1rem;\n    font-size: 1.7rem;\n    background: linear-gradient(45deg, var(--primary), var(--accent));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n}\n\narticle p,\narticle li {\n    font-size: 1.05rem;\n    opacity: 0.95;\n}\n\n\narticle a {\n    color: var(--primary);\n    font-weight: 600;\n    text-decoration: none;\n    transition: 0.3s ease;\n    text-shadow: 0 0 6px rgba(0,255,255,0.5);\n}\n\narticle a:hover {\n    color: var(--secondary);\n    text-shadow: 0 0 10px rgba(255,0,255,0.7);\n}\n\n\n#discussion-forum h2 {\n    margin-top: 0;\n    font-size: 1.8rem;\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n}\n\n\n#comment-list article {\n    padding: 1.2rem;\n    border-radius: 15px;\n    background: rgba(255,255,255,0.04);\n    border: 1px solid rgba(255,255,255,0.10);\n    backdrop-filter: blur(8px);\n    margin-bottom: 1rem;\n    box-shadow: 0 0 12px rgba(0,255,255,0.1);\n}\n\n\n\n.comment-header,\n.reply-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between; \n    width: 100%;\n    margin-bottom: 0.5rem;\n}\n\n.comment-header-left,\n.reply-header-left {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n}\n\n\n.comment-icon,\n.reply-icon {\n    width: 40px;\n    height: 40px;\n    background: linear-gradient(45deg, var(--primary), var(--secondary));\n    border-radius: 50%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: var(--dark);\n    font-weight: bold;\n    font-size: 1.1rem;\n    box-shadow: 0 0 10px rgba(0,255,255,0.5);\n}\n\n.reply-icon {\n    width: 32px;\n    height: 32px;\n    font-size: 1rem;\n}\n\n\n.comment-author,\n.reply-author {\n    font-weight: bold;\n    color: var(--light);\n}\n\n.comment-timestamp,\n.reply-timestamp {\n    font-size: 0.85rem;\n    opacity: 0.7;\n}\n\n\n\n.nested-replies {\n    margin-left: 40px;\n    margin-top: 12px;\n    padding: 15px;\n    background: rgba(255,255,255,0.03);\n    border-radius: 12px;\n    border: 1px solid rgba(0,255,255,0.25);\n    backdrop-filter: blur(8px);\n    display: flex;\n    flex-direction: column;\n    gap: 14px;\n}\n\n.nested-replies:empty {\n    display: none;\n}\n\n.reply {\n    padding: 12px 14px;\n    background: rgba(255,255,255,0.06);\n    border-radius: 12px;\n    border: 1px solid rgba(255,255,255,0.12);\n    box-shadow: 0 0 12px rgba(0,255,255,0.15);\n    backdrop-filter: blur(6px);\n}\n\n\n\n.delete-comment-btn,\n.delete-reply-btn {\n    background: var(--pink);\n    color: rgb(0, 0, 0);\n    border: none;\n    border-radius: 50%;\n    width: 22px;\n    height: 22px;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    font-size: 0.9rem;\n    font-weight: bold;\n\n    cursor: pointer;\n    padding: 0;\n    transition: 0.25s ease;\n\n    box-shadow: 0 0 12px rgba(255, 80, 160, 0.6);\n}\n\n.delete-comment-btn:hover,\n.delete-reply-btn:hover {\n    background: var(--pink-hover);\n    box-shadow: 0 0 18px rgba(255, 0, 150, 0.9);\n}\n\n\n\nfieldset {\n    margin-top: 1.5rem;\n    padding: 1.8rem;\n    border-radius: 15px;\n    border: 1px solid rgba(255,255,255,0.15);\n    background: rgba(255,255,255,0.06);\n    backdrop-filter: blur(12px);\n}\n\ntextarea {\n    width: 97%;\n    padding: 1rem;\n    margin-top: 1rem;\n    border-radius: 12px;\n    background: rgba(255,255,255,0.12);\n    color: var(--light);\n    border: 1px solid rgba(255,255,255,0.25);\n    transition: 0.25s ease;\n}\n\ntextarea:focus {\n    outline: none;\n    border-color: var(--secondary);\n    box-shadow: 0 0 12px rgba(255,0,255,0.55);\n}\n\n\nbutton {\n    margin-top: 1rem;\n    padding: 0.7rem 1.4rem;\n    border: none;\n    border-radius: 25px;\n    cursor: pointer;\n\n    background: linear-gradient(45deg, var(--primary), var(--accent));\n    color: var(--dark);\n    font-weight: bold;\n\n    transition: 0.25s ease;\n}\n\nbutton:hover {\n    transform: translateY(-3px);\n    box-shadow: 0 0 25px rgba(0,255,255,0.3);\n}\n\n\n@media (max-width: 768px) {\n    header h1 { font-size: 1.8rem; }\n    #go-back-btn { width: 38px; height: 38px; }\n    article { padding: 1.3rem; }\n}\n","path":null,"size_bytes":5804,"size_tokens":null},"src/auth/login.js":{"content":"/*\n  Requirement: Add client-side validation to the login form.\n\n  Instructions:\n  1. Link this file to your HTML using a <script> tag with the 'defer' attribute.\n     Example: <script src=\"login.js\" defer></script>\n  \n  2. In your login.html, add a <div> element *after* the </fieldset> but\n     *before* the </form> closing tag. Give it an id=\"message-container\".\n     This div will be used to display success or error messages.\n     Example: <div id=\"message-container\"></div>\n  \n  3. Implement the JavaScript functionality as described in the TODO comments.\n*/\n\n// --- Element Selections ---\n// We can safely select elements here because 'defer' guarantees\n// the HTML document is parsed before this script runs.\n\n// TODO: Select the login form. (You'll need to add id=\"login-form\" to the <form> in your HTML).\nconst loginForm = document.getElementById('login-form');\n// TODO: Select the email input element by its ID.\nconst emailInput = document.getElementById('email');\n// TODO: Select the password input element by its ID.\nconst passwordInput = document.getElementById('password');\n// TODO: Select the message container element by its ID.\nconst messageContainer = document.getElementById('message-container');\n// --- Functions ---\n\n/**\n * TODO: Implement the displayMessage function.\n * This function takes two arguments:\n * 1. message (string): The message to display.\n * 2. type (string): \"success\" or \"error\".\n *\n * It should:\n * 1. Set the text content of `messageContainer` to the `message`.\n * 2. Set the class name of `messageContainer` to `type`\n * (this will allow for CSS styling of 'success' and 'error' states).\n */\nfunction displayMessage(message, type) {\n  messageContainer.textContent = message;\n  messageContainer.className = type;\n}\n\n/**\n * TODO: Implement the isValidEmail function.\n * This function takes one argument:\n * 1. email (string): The email string to validate.\n *\n * It should:\n * 1. Use a regular expression to check if the email format is valid.\n * 2. Return `true` if the email is valid (e.g., \"test@example.com\").\n * 3. Return `false` if the email is invalid (e.g., \"test@\", \"test.com\", \"test@.com\").\n *\n * A simple regex for this purpose is: /\\S+@\\S+\\.\\S+/\n */\nfunction isValidEmail(email) {\n  const emailRegex = /\\S+@\\S+\\.\\S+/;\n  return emailRegex.test(email);\n}\n\n/**\n * TODO: Implement the isValidPassword function.\n * This function takes one argument:\n * 1. password (string): The password string to validate.\n *\n * It should:\n * 1. Check if the password length is 8 characters or more.\n * 2. Return `true` if the password is valid.\n * 3. Return `false` if the password is not valid.\n */\nfunction isValidPassword(password) {\n   return password.length >= 8;\n}\n\n/**\n * TODO: Implement the handleLogin function.\n * This function will be the event handler for the form's \"submit\" event.\n * It should:\n * 1. Prevent the form's default submission behavior.\n * 2. Get the `value` from `emailInput` and `passwordInput`, trimming any whitespace.\n * 3. Validate the email using `isValidEmail()`.\n * - If invalid, call `displayMessage(\"Invalid email format.\", \"error\")` and stop.\n * 4. Validate the password using `isValidPassword()`.\n * - If invalid, call `displayMessage(\"Password must be at least 8 characters.\", \"error\")` and stop.\n * 5. If both email and password are valid:\n * - Call `displayMessage(\"Login successful!\", \"success\")`.\n * - (Optional) Clear the email and password input fields.\n */\nfunction handleLogin(event) {\n  event.preventDefault();\n  \n  const email = emailInput.value.trim();\n  const password = passwordInput.value.trim();\n  \n  if (!isValidEmail(email)) {\n    displayMessage(\"Invalid email format.\", \"error\");\n    return;\n  }\n  \n  if (!isValidPassword(password)) {\n    displayMessage(\"Password must be at least 8 characters.\", \"error\");\n    return;\n  }\n  \n  displayMessage(\"Login successful!\", \"success\");\n  emailInput.value = '';\n  passwordInput.value = '';\n}\n\n/**\n * TODO: Implement the setupLoginForm function.\n * This function will be called once to set up the form.\n * It should:\n * 1. Check if `loginForm` exists.\n * 2. If it exists, add a \"submit\" event listener to it.\n * 3. The event listener should call the `handleLogin` function.\n */\nfunction setupLoginForm() {\n  if (loginForm) {\n    loginForm.addEventListener('submit', handleLogin);\n  }\n}\n\n// --- Initial Page Load ---\n// Call the main setup function to attach the event listener.\nsetupLoginForm();\n","path":null,"size_bytes":4424,"size_tokens":null},"src/resources/details.php":{"content":"<?php\nrequire_once __DIR__ . \"/../../config/Config.php\";\n\nif (!isLoggedIn()) {\n    header(\"Location: /login\");\n    exit();\n}\n\n$loggedInUserId   = $_SESSION['user_id'] ?? null;\n$loggedInUsername = $_SESSION['username'] ?? null;\n$isAdmin          = function_exists('isAdmin') ? isAdmin() : false;\n\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Resource Details</title>\n\n    <!-- CSS FILES -->\n    <link rel=\"stylesheet\" href=\"/src/common/css/background.css\">\n    <link rel=\"stylesheet\" href=\"/src/common/css/weekly-details.css\">\n\n    <!-- SESSION VARIABLES PASSED TO JS -->\n    <script>\n        window.IS_ADMIN = <?= $isAdmin ? 'true' : 'false'; ?>;\n        window.LOGGED_IN_USER_ID = <?= $loggedInUserId ?? 'null'; ?>;\n        window.LOGGED_IN_USER_NAME = <?= json_encode($loggedInUsername); ?>;\n    </script>\n\n    <!-- JS FILES -->\n    <script src=\"/src/common/js/background.js\"></script>\n    <script src=\"/src/common/js/goBackButton.js\" defer></script>\n    <script src=\"/src/resources/details.js\" defer></script>\n</head>\n\n<body>\n\n    <!-- BACKGROUND ANIMATION -->\n    <div class=\"bg-animation\">\n        <div class=\"neural-network\" id=\"neuralNetwork\"></div>\n        <div class=\"particles\" id=\"particles\"></div>\n    </div>\n\n    <!-- PAGE HEADER -->\n    <header>\n        <button id=\"go-back-btn\"></button>\n        <h1 id=\"resource-title\">Loading...</h1>\n    </header>\n\n    <!-- MAIN CONTENT -->\n    <main>\n\n        <!-- Resource Information -->\n        <article>\n            <p id=\"resource-description\"></p>\n\n            <a id=\"resource-link\" href=\"#\" target=\"_blank\">\n                Access Resource Material\n            </a>\n        </article>\n\n        <!-- Discussion Section -->\n        <section id=\"discussion-forum\">\n            <h2>Discussion</h2>\n\n            <!-- Existing comments -->\n            <div id=\"comment-list\"></div>\n\n            <!-- Add a new comment -->\n            <form id=\"comment-form\">\n                <fieldset>\n                    <legend>Leave a Comment</legend>\n\n                    <label for=\"new-comment-text\">Comment:</label>\n                    <textarea id=\"new-comment-text\" required></textarea>\n\n                    <button type=\"submit\">Post Comment</button>\n                </fieldset>\n            </form>\n        </section>\n\n    </main>\n\n</body>\n\n</html>\n\n","path":null,"size_bytes":2412,"size_tokens":null},"src/auth/dashboard.php":{"content":"<?php\nrequire_once __DIR__ . '/../../config/Config.php';\n\n// Check if user is logged in\nif (!isset($_SESSION['user_id'])) {\n    header(\"Location: /login\");\n    exit();\n}\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n        <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Dashboard - Course System</title>\n     <link rel=\"stylesheet\" href=\"/src/common/css/background.css\">\n        <link rel=\"stylesheet\" href=\"/src/common/css/dashboard.css\">\n         <script src=\"/src/common/js/background.js\"></script>\n</head>\n<body>\n    <div class=\"bg-animation\">\n    <div class=\"neural-network\" id=\"neuralNetwork\"></div>\n    <div class=\"particles\" id=\"particles\"></div>\n</div>\n\n    <div class=\"header\">\n        <h1>Course Management System</h1>\n    </div>\n\n<div class=\"nav\">\n    <div class=\"nav-left\">\n        <a href=\"/dashboard\">Dashboard</a>\n\n        <?php if (isAdmin()): ?>\n            <a href=\"/admin\">Admin Portal</a>\n        <?php endif; ?>\n\n        <?php if (isInstructor()): ?>\n            <a href=\"InstructorPortal.php\">Instructor Portal</a>\n        <?php endif; ?>\n    </div>\n\n    <div class=\"nav-right\">\n        <a href=\"/logout\">Logout</a>\n    </div>\n</div>\n\n\n\n    <div class=\"welcome-box\">\n        <h2>Welcome back, <?php echo $_SESSION['username']; ?>!</h2>\n        <p>Last login: <?php echo date('Y-m-d H:i:s'); ?></p>\n    </div>\n\n  <div class=\"dashboard-grid\">\n    <!-- Student Cards - Only visible to students -->\n    <?php if (isStudent()): ?>\n    <div class=\"card\">\n        <h3>Resources</h3>\n        <p>Access learning materials, documents, and study resources.</p>\n        <a href=\"/resources/list\"><button>View Resources</button></a>\n    </div>\n\n    <div class=\"card\">\n        <h3>Weekly Breakdown</h3>\n        <p>Check out this week's learning schedule and topics.</p>\n        <a href=\"/weekly/list\"><button>Go to Weekly</button></a>\n    </div>\n\n    <div class=\"card\">\n        <h3>Assignments</h3>\n        <p>View and submit your assignments and projects.</p>\n        <a href=\"/assignments/list\"><button>View Assignments</button></a>\n    </div>\n\n    <div class=\"card\">\n        <h3>General Discussion Boards</h3>\n        <p>Participate in course discussions and ask questions.</p>\n        <p>extra task (Not implemented)</p>\n        <a href=\"#\"><button>Join Discussion</button></a>\n    </div>\n    <?php endif; ?>\n\n</div>\n\n</body>\n</html>","path":null,"size_bytes":2397,"size_tokens":null},"src/weekly/list.js":{"content":"\n\n\n\n\nconst listSection = document.getElementById('week-list-section');\n\n\n\n\nfunction createWeekArticle(week) {\n  const article = document.createElement('article');\n\n  const heading = document.createElement('h2');\n  heading.textContent = week.title;\n\n  const startDate = document.createElement('p');\n  startDate.textContent = `Starts on: ${week.startDate || \"-\"}`;\n\n  const description = document.createElement('p');\n  description.textContent = week.description;\n\n\n  const detailsLink = document.createElement('a');\n  detailsLink.href = `/weekly/details?id=${week.id}`;\n  detailsLink.textContent = 'View Details & Discussion';\n\n  article.appendChild(heading);\n  article.appendChild(startDate);\n  article.appendChild(description);\n  article.appendChild(detailsLink);\n\n  return article;\n}\n\n\n\n\n\nasync function loadWeeks() {\n  try {\n    const response = await fetch('/api/weekly');\n    const result = await response.json();\n\n    if (!result.success) {\n      listSection.innerHTML = '<p>Error loading weeks.</p>';\n      return;\n    }\n\n    const weeks = result.data.map(w => ({\n      id: Number(w.id),\n      title: w.title,\n      startDate: w.start_date,\n      description: w.description\n    }));\n\n    listSection.innerHTML = '';\n\n    weeks.forEach(week => {\n      const article = createWeekArticle(week);\n      listSection.appendChild(article);\n    });\n\n  } catch (error) {\n    console.error('Error loading weeks:', error);\n    listSection.innerHTML =\n      '<p>Error loading weekly breakdown. Please try again later.</p>';\n  }\n}\n\nloadWeeks();\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const btn = document.getElementById(\"go-back-btn\");\n  if (!btn) return;\n\n  btn.addEventListener(\"click\", () => {\n    window.location.href = \"/admin\";\n  });\n});","path":null,"size_bytes":1753,"size_tokens":null}},"version":2}